// {{{ 2 "IncludeGuard" "PragmaOnce"
#pragma global
// }} ""
#include "HSLStrLib.hsl"
#include "HSLMthLib.hsl"
#include "HSLSeqLib.hsl"
#include "Labware Properties\\Resources\\LPQ_GLOBAL.hsl"
#include "HSLDevLib.hsl"
#include "HSLExtensions\\File.hsl"
#include "Alpha Numeric Conversion\\Alpha Numeric Conversion.hs_"
#include "HSLErrLib.hsl"
#include "HSLUtilLib.hsl"
#include "HSLDeckVisualize.hsl"
#include "HSLUtilLib2.hsl"
/* {{ 2 "LibraryInsertLine" "" */ // }} ""
// {{ 2 "TemplateIncludeBlock" ""
#include "HSLMETEDLib.hs_"
#include "HSLMECCLib.hs_"
// }} ""
// {{{ 2 "LibraryNamespace" "Begin"
namespace LPQ {
// }} ""
/* {{ 2 "VariableInsertLine" "" */ // }} ""
// {{{ 2 "SubmethodForwardDeclaration" ""
function ADJUST_AddCarrierToDeckSite( device & Instrument, variable i_str_ConfigFile, variable i_str_NewLabwareID, variable i_int_DeckPosition ) void ;
function ADJUST_AddContainerToPosition( device & Instrument, sequence i_seq_LabwareToChange, variable i_str_NewContainerFile, variable i_flt_OffsetX, variable i_flt_OffsetY, variable i_flt_OffsetZ ) void ;
function ADJUST_AddContainerToPositions( device & Instrument, sequence i_seq_LabwareToChange, variable i_str_NewContainerFile, variable i_flt_OffsetX, variable i_flt_OffsetY, variable i_flt_OffsetZ ) void ;
function ADJUST_ChangeLabwareID( device & Instrument, variable i_str_LabwareID, variable i_str_NewLabID ) void ;
function ADJUST_GetCurrentStack( device & Instrument, variable i_str_LabwareNameForStack, variable & o_arr_StackedLabware[] ) void ;
function ADJUST_MoveLabwareSite( device & Instrument, sequence i_seq_LabwareToAdjust, variable i_str_NewSiteID ) void ;
function ADJUST_MoveLabwareToDeckSite( device & Instrument, variable i_str_Labware, variable i_str_Template, variable i_str_Site ) void ;
private function ADJUST_MoveSitesDelta( device & Instrument, variable i_str_Template, variable i_flt_DeltaX, variable i_flt_DeltaY, variable i_flt_DeltaZ ) void ;
function ADJUST_OffsetWells( device & Instrument, sequence i_seq_LabwarePositionsToOffset, variable i_flt_X_Offset, variable i_flt_Y_Offset ) void ;
function ADJUST_OffsetWells2( device & Instrument, sequence i_seq_LabwarePositionsToOffset, variable i_flt_X_Offset, variable i_flt_Y_Offset, variable i_flt_Z_Offset ) void ;
function ADJUST_RotateLabware( device & Instrument, sequence i_seq_LabwarePositionsToOffset, variable i_flt_TargetRotation ) void ;
function ADJUST_SetAbsolutePosition( device & Instrument, sequence i_seq_LabwarePositionsToAdjust, variable i_fltPositionX, variable i_fltPositionY, variable i_fltPositionZ, variable i_fltPositionR ) void ;
function ADJUST_SetAbsolutePositionForLabwareID( device & Instrument, variable i_strLabwareID, variable i_fltPositionX, variable i_fltPositionY, variable i_fltPositionZ, variable i_fltPositionR ) void ;
function ADJUST_SetProperties( device & Instrument, sequence i_seq_LabwarePositionsToAdjust, variable i_strPropertyKey, variable i_strProperyValue ) void ;
function ADJUST_SetPropertiesForLabwareID( device & Instrument, variable i_strLabwareID, variable i_strPropertyKey, variable i_strProperyValue ) void ;
function ADJUST_SetRelativePosition( device & Instrument, sequence i_seq_LabwarePositionsToAdjust, variable i_fltPositionX, variable i_fltPositionY, variable i_fltPositionZ, variable i_fltPositionR ) void ;
function ADJUST_SetRelativePositionForLabwareID( device & Instrument, variable & i_strLabwareID, variable i_fltPositionX, variable i_fltPositionY, variable i_fltPositionZ, variable i_fltPositionR ) void ;
function ADJUST_StackCreateAtTemplateSite( device & Instrument, variable i_str_ConfigFile, variable i_str_LabwareNameForStack, variable i_str_TemplateID, variable i_str_TemplateSiteID, variable i_int_TotalStack, variable i_int_LabwareType, variable i_bln_LiddedLabware, variable & o_arr_StackedLabware[] ) void ;
function ADJUST_StackDecrease( device & Instrument, variable i_str_LabwareNameForStack, variable & o_arr_StackedLabware[] ) void ;
function ADJUST_StackIncrease( device & Instrument, variable i_str_LabwareNameForStack, variable & o_str_LabwareID ) void ;
function ADJUST_TiltLabware( device & Instrument, sequence i_seq_LabwarePositionsToOffset, variable i_bool_ShiftToDeepestPoint, variable i_flt_TiltAngle, variable i_flt_XOffset, variable i_flt_ZOffset ) void ;
function CONT_GetBaseMeasurement( device & Instrument, sequence & i_seq_Labware, variable & o_flt_ContainerBaseThickness, variable & o_flt_ContainerBaseOffset ) void ;
function CONT_GetConfigFile( device & Instrument, sequence i_seq_Labware, variable & o_str_ContainerFileName ) void ;
function CONT_GetContainerBaseThickness( device & Instrument, sequence i_seq_Labware, variable & o_containerBaseThickness ) void ;
function CONT_GetContainerDepth( device & Instrument, sequence i_seq_Labware, variable i_bool_UseDeckCoordinates, variable & o_ContainerDepth, variable & o_ContainerClearanceHeight ) void ;
function CONT_GetContainerWidth( device & Instrument, sequence i_seq_Labware, variable & o_flt_ContainerWidth ) void ;
function FILE_GetDefinitionFileValue( variable & i_str_ConfigFilePath, variable i_str_ValueToSearch, variable & o_str_Value ) variable ;
function LABWARE_GetCarrierAndSiteID( device & Instrument, sequence i_seq_Labware, variable & o_str_TemplateID, variable & o_str_TemplateSiteID ) void ;
function LABWARE_GetCarrierTracks( device & Instrument, sequence i_seq_Labware, variable & o_int_TotalTracks, variable & o_int_LeftMostTrack, variable & o_int_RightMostTrack ) void ;
function LABWARE_GetConfigFile( device & Instrument, sequence i_seq_Labware, variable & o_str_ConfigFilePath ) void ;
function LABWARE_GetContainerBaseOffset( device & Instrument, sequence i_seq_Labware, variable & o_flt_ContainerBaseOffset ) void ;
function LABWARE_GetCurrentPosition( device & Instrument, sequence i_seq_Labware, variable & o_flt_X_Coord, variable & o_flt_Y_Coord, variable & o_flt_Z_Coord ) void ;
function LABWARE_GetDescription( device & Instrument, sequence i_seq_Labware, variable & o_str_LabwareDescription ) void ;
function LABWARE_GetFirstPosition( device & Instrument, variable i_str_LabID, variable & o_str_PosID ) void ;
function LABWARE_GetLabwareCenter( device & Instrument, sequence i_seq_Labware, variable & o_flt_X_Center, variable & o_flt_Y_Center ) void ;
function LABWARE_GetLabwareLW( device & Instrument, sequence i_seq_Labware, variable & o_flt_Labware_L, variable & o_flt_Labware_W ) void ;
function LABWARE_GetLabwareOrigin( device & Instrument, sequence i_seq_Labware, variable & o_flt_X_Coord, variable & o_flt_Y_Coord, variable & o_flt_Z_Coord ) void ;
function LABWARE_GetLabwareStackHeight( device & Instrument, sequence i_seq_Labware, variable & o_flt_LabwareStackHeight ) void ;
function LABWARE_GetLabwareViewName( device & Instrument, sequence i_seq_Labware, variable & o_str_LabwareViewName ) void ;
function LABWARE_GetRackHeight( device & Instrument, sequence i_seq_Labware, variable i_bool_UseDeckCoordinates, variable & o_flt_RackHeight, variable & o_flt_RackClearanceHeight ) void ;
function LABWARE_GetRowColumnNumber( device & Instrument, sequence i_seq_Labware, variable & o_int_RowCount, variable & o_int_ColumnCount, variable & o_bool_AlphaNumeric, variable & o_bool_IncrementContainer ) void ;
function LABWARE_GetVisibility( device & Instrument, sequence i_seq_Labware, variable & o_bool_LabwareVisibility ) void ;
function LABWARE_IsContainersConnected( device & Instrument, sequence i_seq_Labware, variable & o_bool_ConnectedContainer ) void ;
function SEQ_GetDefaultSequence( device & Instrument, variable i_str_LabID, variable i_bool_SortByColumn, sequence & o_seq_DefaultSequence ) void ;
private function SEQ_GetDefaultSequenceForLabware( device & Instrument, variable i_str_LabwareID, sequence & o_seq_DefaultSequence ) void ;
function SEQ_ReloadSequence( device & Instrument, sequence & io_seq_SequenceToReload ) void ;
function TEMPLATE_GetConfigFile( device & Instrument, sequence i_seq_Labware, variable & o_str_ConfigFilePath ) void ;
function TEMPLATE_GetConfigFile2( device & Instrument, variable i_str_Labware, variable & o_str_ConfigFilePath ) void ;
function TEMPLATE_GetTemplateOrigin( device & Instrument, sequence i_seq_Labware, variable & o_flt_X_Coord, variable & o_flt_Y_Coord, variable & o_flt_Z_Coord ) void ;
function TEMPLATE_GetTemplateOrigin2( device & Instrument, variable i_str_TemplateLabID, variable & o_flt_X_Coord, variable & o_flt_Y_Coord, variable & o_flt_Z_Coord ) void ;
private function _CalcualteOffsetHeight( variable i_flt_WellAngle, variable i_flt_YOffset, variable & o_flt_ZOffset ) void ;
private function _CalculateWellAngle( variable i_flt_BottomWellSegment_Height, variable i_flt_BottomWellSegment_TopWidth, variable i_flt_BottomWellSegment_BottomWidth, variable & o_flt_BottomWellSegment_Angle ) void ;
private function _ConvertToFloat( variable iVariable, variable & oVariable ) void ;
private function _ConvertToInteger( variable iVariable, variable & oVariable ) void ;
private function _FunctionError( variable i_str_FunctionName, variable i_str_ErrorDescription ) void ;
private function _GetLabwareOrigin( device & Instrument, variable i_str_LabID, variable & o_flt_X_Coord, variable & o_flt_Y_Coord, variable & o_flt_Z_Coord ) void ;
private function _GetLabwareWL( device & Instrument, variable i_str_LabID, variable & o_flt_LabwareWidth, variable & o_flt_LabwareLength ) void ;
private function _GetSequencePosition( device & Instrument, sequence i_seq_LabwareSequence, variable & o_str_LabID, variable & o_str_PosID ) variable ;
private function _Lookup( variable & array[], variable item ) variable ;
private function _RemoveTruncatedSequencePositions( device & Instrument, sequence & io_Sequence ) void ;
// }} ""
function _InitLibrary() {
// {{ 2 "AutoInitBlock" ""
ANC::_InitLibrary();
// }} ""
}
function _ExitLibrary() {
// {{ 2 "AutoExitBlock" ""
ANC::_ExitLibrary();
// }} ""
}
// {{{ 5 "_Lookup" "Begin"
private function _Lookup( variable & array[], variable item ) variable {
// }} ""
private variable index;
private variable lookupreturn;
// {{ 5 "_Lookup" "InitLocals"
// }} ""
// {{{ 1475 1 0 "bb21371b_12f5_4675_a40eca6fa05d908c" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
lookupreturn = Util::Lookup(array, item, index);
// }} ""
// {{ 1476 1 0 "116d2bcd_7c6a_4bb1_801246bbff09b5fc" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (lookupreturn > 0)
{
// }} ""
// {{ 1477 1 0 "ef916050_81c9_431b_98d54feeedead5f4" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
index = index + 1;
// }} ""
// {{{ 1478 1 0 "9035fe7f_af4f_4f11_b8c424b01ed5b4a2" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return (index);
// }} ""
// {{ 1479 1 0 "116d2bcd_7c6a_4bb1_801246bbff09b5fc" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{{ 1480 1 0 "2d5cdb77_ae42_4a31_b00deefabcda0e60" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return (0);
// }} ""
// {{ 1481 1 0 "116d2bcd_7c6a_4bb1_801246bbff09b5fc" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 5 "_Lookup" "End"
}
// }} ""
// {{{ 5 "ADJUST_ChangeLabwareID" "Begin"
function ADJUST_ChangeLabwareID( device & Instrument, variable i_str_LabwareID, variable i_str_NewLabID ) void {
// }} ""
private variable int_CutNum;
private variable int_Length;
private variable strFunctionName;
private variable strFunctionName_Cut;
private variable int_Count;
// {{ 5 "ADJUST_ChangeLabwareID" "InitLocals"
// }} ""
// {{ 192 1 0 "2cee2429_3103_4b1b_a016bf500e458cf3" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 193 1 0 "196594b2_bcde_4322_8df441c075c87f30" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 195 1 0 "71f20b53_66ef_436a_a9ebf71039c7cde6" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Count = StrReverseFind(strFunctionName, Translate(":"));
// }} ""
// {{ 196 1 0 "8642197c_fd03_44df_a3ed42dbb392e25a" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_Count = int_Count + 1;
// }} ""
// {{{ 197 1 0 "5c906070_eb7e_4ad5_be8b6fd5dbbd1333" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Length = StrGetLength(strFunctionName);
// }} ""
// {{ 198 1 0 "7157ca89_882f_4dd9_bd6c9b8fc2f1345c" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_CutNum = int_Length - int_Count;
// }} ""
// {{{ 199 1 0 "f5b6338a_9ecf_4d26_ac6ec3e2e9b7bd06" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
strFunctionName_Cut = StrMid(strFunctionName, int_Count, int_CutNum);
// }} ""
Trace("===========================================================================");
Trace(strFunctionName_Cut," - START");
Trace("");
// {{ 201 1 0 "2cee2429_3103_4b1b_a016bf500e458cf3" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
Trace("Labware ID:  ",i_str_LabwareID,"  -  ","New ID:  ",i_str_NewLabID);
// {{ 203 1 0 "7cd5868d_3c3c_436a_a75bb6bd99ea34c8" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
{
   object objDeckLayout;
   //object objLabware;
   object objEditDeckLayout8;

   objDeckLayout = Instrument.GetDeckLayoutObject();

   if(!objDeckLayout.IsNull())
   {
      objDeckLayout.GetObject("IEditDeckLayout8", objEditDeckLayout8);
      objEditDeckLayout8.RenameLabware(i_str_NewLabID,i_str_LabwareID);
   }

   objDeckLayout.ReleaseObject();
   objEditDeckLayout8.ReleaseObject();
}
// {{ 205 1 0 "bc302fce_0178_4994_9cfb2a8f4f7c204b" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
Trace("");
Trace(strFunctionName_Cut," - FINISH");
Trace("===========================================================================");
// {{ 207 1 0 "bc302fce_0178_4994_9cfb2a8f4f7c204b" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 5 "ADJUST_ChangeLabwareID" "End"
}
// }} ""
// {{{ 5 "ADJUST_MoveLabwareSite" "Begin"
function ADJUST_MoveLabwareSite( device & Instrument, sequence i_seq_LabwareToAdjust, variable i_str_NewSiteID ) void {
// }} ""
private variable int_CutNum;
private variable int_Length;
private variable strFunctionName;
private variable str_CurrentTemplate;
private variable str_LabID;
private variable strFunctionName_Cut;
private variable int_Count;
private variable str_PosID;
private variable bool_SequenceValid;
private variable str_CurrentSite;
// {{ 5 "ADJUST_MoveLabwareSite" "InitLocals"
// }} ""
// {{ 218 1 0 "5c1b8fb2_9366_4958_871e0f24853cc09d" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 219 1 0 "2f4f6025_483d_4c10_98020df1d6e16c0e" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 221 1 0 "ab4db9c7_e622_4dc8_ac1c4bb7f53665e3" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Count = StrReverseFind(strFunctionName, Translate(":"));
// }} ""
// {{ 222 1 0 "244494ad_df8b_40e4_889a89fc77fe2f53" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_Count = int_Count + 1;
// }} ""
// {{{ 223 1 0 "cb159cbf_dade_46eb_8e1e364140446948" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Length = StrGetLength(strFunctionName);
// }} ""
// {{ 224 1 0 "c03ba6c4_b5d7_4c5e_9b837f252a4093b2" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_CutNum = int_Length - int_Count;
// }} ""
// {{{ 225 1 0 "df6a27b2_d4cb_46ca_ba078eea3034c463" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
strFunctionName_Cut = StrMid(strFunctionName, int_Count, int_CutNum);
// }} ""
Trace("===========================================================================");
Trace(strFunctionName_Cut," - START");
Trace("");
// {{ 227 1 0 "5c1b8fb2_9366_4958_871e0f24853cc09d" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 228 1 0 "5a408507_7fdc_4ae0_b980b1a61cc2e6e5" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 229 1 0 "1a32db8a_e01f_46f7_adec4bede4624ba5" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 231 1 0 "4f132fab_a4bb_4b8d_a2a4bc349766325e" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_LabwareToAdjust, str_LabID, str_PosID);
// }} ""
// {{ 232 1 0 "ab34ec23_f650_4a75_860e3cab81895f2c" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 233 1 0 "86dd20c3_f433_4af4_bffdda0eda18da3f" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 234 1 0 "ab34ec23_f650_4a75_860e3cab81895f2c" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 235 1 0 "5a408507_7fdc_4ae0_b980b1a61cc2e6e5" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 236 1 0 "0864c0c6_de11_4fd2_aff14fe4f918f903" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetCarrierAndSiteID(Instrument, i_seq_LabwareToAdjust, str_CurrentTemplate, str_CurrentSite);
// }} ""
Trace("Move ",str_LabID," on ",str_CurrentTemplate," from ",str_CurrentSite," to ",i_str_NewSiteID);
// {{ 238 1 0 "41b0ecc2_fabc_4e47_bd2c37e9da2d7a7c" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
{
   object objDeckLayout;
   object objLabware;
   object objEditDeckLayout8;

   objDeckLayout = Instrument.GetDeckLayoutObject();

   if(!objDeckLayout.IsNull())
   {
      objLabware = objDeckLayout.Labware(str_CurrentTemplate);
      objLabware.GetObject("ITemplate", objEditDeckLayout8);
      objEditDeckLayout8.MoveLabware(str_LabID,i_str_NewSiteID);
   }

   objDeckLayout.ReleaseObject();
   objEditDeckLayout8.ReleaseObject();
   objLabware.ReleaseObject();
}
// {{ 240 1 0 "7a7a104b_a9d6_42d7_9791294aa1ebdcf7" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
Trace("");
Trace(strFunctionName_Cut," - FINISH");
Trace("===========================================================================");
// {{ 242 1 0 "7a7a104b_a9d6_42d7_9791294aa1ebdcf7" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 5 "ADJUST_MoveLabwareSite" "End"
}
// }} ""
// {{{ 5 "ADJUST_MoveLabwareToDeckSite" "Begin"
function ADJUST_MoveLabwareToDeckSite( device & Instrument, variable i_str_Labware, variable i_str_Template, variable i_str_Site ) void {
// }} ""
// {{ 5 "ADJUST_MoveLabwareToDeckSite" "InitLocals"
// }} ""
{
   object objDeckLayout;
   object objLabware;
   object objEditDeckLayout8;
   object objTemplate;
   object objEditTemplate;

   objDeckLayout = Instrument.GetDeckLayoutObject();

   if(!objDeckLayout.IsNull())
   {
      objLabware = objDeckLayout.Labware(i_str_Labware);
      objDeckLayout.GetObject("IEditDeckLayout6", objEditDeckLayout8);
      objTemplate = objDeckLayout.Labware(i_str_Template);
      //objTemplate.GetObject("ITemplate",objEditTemplate);
      objEditDeckLayout8.MoveLabwareToDeckSite(objLabware,i_str_Template,i_str_Site);
      //objEditDeckLayout8.AddLabwareToDeckSite(objLabware,i_str_Site,i_str_Labware+"1",i_str_Template);
      //objEditDeckLayout8.BringToFront(i_str_Labware,i_str_Template);
   }

   objDeckLayout.ReleaseObject();
   objEditDeckLayout8.ReleaseObject();
   objLabware.ReleaseObject();
}
// {{{ 5 "ADJUST_MoveLabwareToDeckSite" "End"
}
// }} ""
// {{{ 5 "ADJUST_MoveSitesDelta" "Begin"
private function ADJUST_MoveSitesDelta( device & Instrument, variable i_str_Template, variable i_flt_DeltaX, variable i_flt_DeltaY, variable i_flt_DeltaZ ) void {
// }} ""
// {{ 5 "ADJUST_MoveSitesDelta" "InitLocals"
// }} ""
{
   object objDeckLayout;
   object objLabware;
   object objEditDeckLayout8;

   objDeckLayout = Instrument.GetDeckLayoutObject();

   if(!objDeckLayout.IsNull())
   {
      objLabware = objDeckLayout.Labware(i_str_Template);
      objLabware.GetObject("ITemplate", objEditDeckLayout8);
      objEditDeckLayout8.MoveSitesDelta(i_flt_DeltaX,i_flt_DeltaY,i_flt_DeltaZ);
   }

   objDeckLayout.ReleaseObject();
   objEditDeckLayout8.ReleaseObject();
   objLabware.ReleaseObject();
}
// {{{ 5 "ADJUST_MoveSitesDelta" "End"
}
// }} ""
// {{{ 5 "ADJUST_OffsetWells" "Begin"
function ADJUST_OffsetWells( device & Instrument, sequence i_seq_LabwarePositionsToOffset, variable i_flt_X_Offset, variable i_flt_Y_Offset ) void {
// }} ""
private variable flt_ContainerXOffset;
private variable int_CutNum;
private variable flt_ContainerYOffset;
private variable str_ContainerFilePath;
private variable int_Length;
private variable flt_ContainerBottomWidth;
private variable int_LabwareCount;
private variable flt_Y_Offset;
private variable flt_MaximumRadius;
private variable strFunctionName;
private variable str_SearchValue;
private variable flt_WellOffset2;
private variable int_LabwareIndex;
private variable flt_WellAngle;
private variable strFunctionName_Cut;
private variable flt_ContainerBaseOffset;
private variable str_LabID;
private variable flt_ContainerBottomHeight;
private variable int_ContainerExists;
private variable flt_Z_Offset;
private variable flt_WellOffsetSum;
private variable str_ShapeValue;
private variable int_SegmentCount;
private variable str_Return;
private variable flt_BottomSegmentRadius;
private variable flt_WellOffset;
private variable int_Count;
private variable bool_SequenceValid;
private variable str_PosID;
private variable flt_X_Offset;
private variable str_LabwareConfigFilePath;
private variable flt_ContainerTopWidth;
private variable int_ContainerShape;
private variable int_Index;
private variable int_TotalPositions;
private sequence seq_Temp;
private variable arr_LabwareIDs[];
// {{ 5 "ADJUST_OffsetWells" "InitLocals"
// }} ""
// {{ 248 1 0 "fbfae96f_c066_4a9b_93f278c9e7abfb3d" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 249 1 0 "49934fdb_81b6_432d_b3221c267bb99a5c" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 251 1 0 "04d775cd_ca24_4c0d_8843c46c37f5b944" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Count = StrReverseFind(strFunctionName, Translate(":"));
// }} ""
// {{ 252 1 0 "d80cb9be_1502_4e1c_86411bca708cc0b7" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_Count = int_Count + 1;
// }} ""
// {{{ 253 1 0 "78518aa7_7718_49d0_b1f5616d4b4a6edb" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Length = StrGetLength(strFunctionName);
// }} ""
// {{ 254 1 0 "b3abac88_f464_4111_9804e9c8ec50e8e8" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_CutNum = int_Length - int_Count;
// }} ""
// {{{ 255 1 0 "ad3ea817_3b30_4dfa_a2482c7ce7aba9d4" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
strFunctionName_Cut = StrMid(strFunctionName, int_Count, int_CutNum);
// }} ""
Trace("===========================================================================");
Trace(strFunctionName_Cut," - START");
Trace("");
// {{ 257 1 0 "fbfae96f_c066_4a9b_93f278c9e7abfb3d" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 258 1 0 "65c2d403_e923_4865_9491bdcf46739731" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 259 1 0 "3131f664_ef92_4ece_8b1698816417b615" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 261 1 0 "c8d7b9b7_2d47_4e76_aa53384d6283bdec" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_LabwarePositionsToOffset, str_LabID, str_PosID);
// }} ""
// {{ 262 1 0 "1cc425a6_1068_44c9_ab391c4d8e072d6d" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 263 1 0 "387f07a3_bea7_4369_9d4f8ebee42f88c3" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 264 1 0 "1cc425a6_1068_44c9_ab391c4d8e072d6d" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 265 1 0 "65c2d403_e923_4865_9491bdcf46739731" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 266 1 0 "71ab9d60_8c47_4b84_860dd229192e5dc6" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 267 1 0 "f63dc81c_c946_4271_a71aa0c961bb7a9e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (LPQ::LABWARE_OFFSET_GLOBAL::BOOL_LIBRARY_INITIALIZED == 0)
{
// }} ""
// {{{ 268 1 0 "8da27293_5d80_4258_8b6c55e1f7c8ed34" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
LPQ::InitializeVariables();
// }} ""
// {{ 269 1 0 "8fbb9c83_4819_4682_b3b9c97988d2f210" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_BOTTOM_HEIGHT.SetSize(0);
// }} ""
// {{ 270 1 0 "70517458_803d_4131_914211ca9a06f6c8" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_BOTTOM_WIDTH.SetSize(0);
// }} ""
// {{ 271 1 0 "2009a3bb_dc69_4d6d_bd08983db8963b44" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_CONFIG_FILE.SetSize(0);
// }} ""
// {{ 272 1 0 "0c2ee69b_cb9f_466c_aa5e8741e8e5bf88" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_SHAPE.SetSize(0);
// }} ""
// {{ 273 1 0 "b71ea40c_f3e4_41df_91c1070eb6e02529" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_TOP_WIDTH.SetSize(0);
// }} ""
// {{ 274 1 0 "1ed85fee_d5c6_45ed_82eb8865122769fc" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_BASE_OFFSET.SetSize(0);
// }} ""
// {{ 275 1 0 "2ca1ed57_0ddf_4f8e_95dded06099d52fe" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_X_OFFSET.SetSize(0);
// }} ""
// {{ 276 1 0 "02fbd606_6d54_47c2_8ff6a7cdb16fae66" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_Y_OFFSET.SetSize(0);
// }} ""
// {{ 277 1 0 "c6179e98_f60d_4ae6_aab202b9132ae431" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
LPQ::LABWARE_OFFSET_GLOBAL::BOOL_LIBRARY_INITIALIZED = 1;
// }} ""
// {{ 278 1 0 "f63dc81c_c946_4271_a71aa0c961bb7a9e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 279 1 0 "889c671a_5f04_4b18_a3085253cfc8ac1d" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_RemoveTruncatedSequencePositions(Instrument, i_seq_LabwarePositionsToOffset);
// }} ""
// {{{ 280 1 0 "dec35e49_6dc4_49c3_baa0ea38514a40a1" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
SeqGetLabwareIds(i_seq_LabwarePositionsToOffset, arr_LabwareIDs);
// }} ""
// {{ 281 1 0 "122e2ea7_0bf8_4a13_b7f7348ae95b1ef4" "{72EACF88-8D49-43e3-92C8-2F90E81E3260}"
int_LabwareCount=arr_LabwareIDs.GetSize();
// }} ""
// {{ 282 1 0 "6e759a3f_967c_489e_b37108f9c9b89331" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(int_LabwareIndex = 0; int_LabwareIndex < int_LabwareCount;)
{
int_LabwareIndex = int_LabwareIndex + 1;
// }} ""
// {{ 283 1 0 "681dba95_7d88_453d_b1cda2ce6f6ceda0" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
str_LabID=arr_LabwareIDs.GetAt(int_LabwareIndex-1);
// }} ""
// {{{ 284 1 0 "4694e3e2_0e24_42de_b556fbc4e8a68c33" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
SEQ_GetDefaultSequence(Instrument, str_LabID, 1, seq_Temp);
// }} ""
// {{{ 285 1 0 "bf63b1eb_518d_427b_86d1cd5207fac1aa" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_TotalPositions = SeqGetPositionCountForCurrLabware(i_seq_LabwarePositionsToOffset);
// }} ""
Trace("Total Positions:  ",int_TotalPositions);
// {{{ 287 1 0 "4f0b083a_aa8e_4001_8857a839f7d3be66" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetConfigFile(Instrument, seq_Temp, str_LabwareConfigFilePath);
// }} ""
// {{{ 288 1 0 "b9799f64_50a4_41ce_ab8604716f0bb6d6" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
CONT_GetConfigFile(Instrument, seq_Temp, str_ContainerFilePath);
// }} ""
// {{ 289 1 0 "d9f72a91_c460_4e1c_b3127681e0f0996d" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(int_Index = 0; int_Index < int_TotalPositions;)
{
int_Index = int_Index + 1;
// }} ""
// {{ 290 1 0 "26acc018_d843_4e31_8d377709358c06af" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 291 1 0 "c3d9c036_caae_4a92_a4b26ae0afe01414" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 292 1 0 "3ca53111_5eee_4cd3_9f758b29e31e3c81" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_Z_Offset = 0.0;
// }} ""
// {{ 293 1 0 "e6fde6ed_cf8a_4e35_8edde67f88b9bc65" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_WellOffset = 0.0;
// }} ""
// {{ 294 1 0 "044077c3_e413_4d22_b5c56d00ab7dc2a0" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_WellOffsetSum = 0.0;
// }} ""
// {{ 295 1 0 "c23e4716_f266_44b5_815e33f6e328a8b5" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_X_Offset = i_flt_X_Offset;
// }} ""
// {{ 296 1 0 "f1514edc_4aff_403f_96f18b3dcac41280" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_Y_Offset = i_flt_Y_Offset;
// }} ""
// {{ 297 1 0 "3dffa116_f0ec_4808_94720cb3d90417fd" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (flt_X_Offset < 0)
{
// }} ""
// {{ 298 1 0 "10675977_297a_4831_97a40e47603095a4" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_X_Offset = flt_X_Offset * -1;
// }} ""
// {{ 299 1 0 "3dffa116_f0ec_4808_94720cb3d90417fd" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 300 1 0 "85e43a24_369a_49d3_bdb2b1f8fc382862" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (flt_Y_Offset < 0)
{
// }} ""
// {{ 301 1 0 "a666efaf_de3d_4fe2_ae67730376e8f286" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Y_Offset = flt_Y_Offset * -1;
// }} ""
// {{ 302 1 0 "85e43a24_369a_49d3_bdb2b1f8fc382862" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
flt_X_Offset = flt_X_Offset^2;
flt_Y_Offset = flt_Y_Offset^2;
flt_WellOffsetSum = flt_X_Offset + flt_Y_Offset;
// {{{ 304 1 0 "b1bb7e2a_2dec_455e_ad2bf33c4977f489" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_WellOffset = MthPow(flt_WellOffsetSum, 0.5);
// }} ""
// {{{ 305 1 0 "17c8a6f4_3898_42c9_bf42bdb75b79af44" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_WellOffset2 = MthRound(flt_WellOffset, 1);
// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
Trace("Well Offset 2:  ",flt_WellOffset2);
/* {{ 1 "" "1" */ } /* }} "" */
// {{ 307 1 0 "26acc018_d843_4e31_8d377709358c06af" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 308 1 0 "7ab65959_d602_4126_ab5ea6344678d5f8" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_LabID = SeqGetLabwareId(i_seq_LabwarePositionsToOffset);
// }} ""
// {{{ 309 1 0 "de95df99_a1de_47a3_8fcf201367a3d133" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_PosID = SeqGetPositionId(i_seq_LabwarePositionsToOffset);
// }} ""
// {{{ 310 1 0 "ff404ea8_835a_4852_8577b4f35905e270" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
int_ContainerExists = _Lookup(LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_CONFIG_FILE, str_ContainerFilePath);
// }} ""
// {{ 311 1 0 "476aa229_ff70_413e_b53203361f342a56" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_ContainerExists == 0)
{
// }} ""
// {{ 312 1 0 "70b71bfd_5685_42b3_82b5236120685752" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 313 1 0 "f962b7d0_4020_4393_84521a669583e7f2" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_LabwareConfigFilePath, Translate("Cntr.1.offsetx"), str_Return);
// }} ""
// {{{ 314 1 0 "ff67bc38_051a_4af9_847c314f8432eac9" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerXOffset);
// }} ""
// {{ 315 1 0 "6789ac15_4fb6_49dc_bdcfb081ba2dc3ee" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 316 1 0 "a0795556_eb94_498c_b0c0681707f1ad59" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_LabwareConfigFilePath, Translate("Cntr.1.offsety"), str_Return);
// }} ""
// {{{ 317 1 0 "db7a74ef_645f_481c_abd11bd45ce82825" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerYOffset);
// }} ""
// {{ 318 1 0 "a3af9bfd_0251_43cd_8ee7bf6f7761d88e" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 319 1 0 "5c7ccdde_0b81_49cf_aea3b9f7ba22309a" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_LabwareConfigFilePath, Translate("Cntr.1.base"), str_Return);
// }} ""
// {{{ 320 1 0 "7a5a5326_a8dd_40b1_a874e32594f62ce3" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBaseOffset);
// }} ""
// {{ 321 1 0 "dc283901_5bbd_411e_b5d733412af4943d" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 322 1 0 "a0182bfe_8af0_4a8b_8f016d7fe569205c" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, Translate("Segments"), str_Return);
// }} ""
// {{{ 323 1 0 "05b82791_881a_4a9b_a3243522f207069d" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToInteger(str_Return, int_SegmentCount);
// }} ""
// {{ 324 1 0 "35512f8c_16b9_4d3b_a0440c043eb00241" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 325 1 0 "ed140507_5593_4cfe_a21dedc0fda4728e" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_ShapeValue = StrConcat2(int_SegmentCount, Translate(".Shape"));
// }} ""
// {{{ 326 1 0 "5ff40fb7_6ca9_4145_8ec703e5ddd74ff6" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_ShapeValue, str_Return);
// }} ""
// {{{ 327 1 0 "c697fb15_4774_44a3_a5723b41a66e3933" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToInteger(str_Return, int_ContainerShape);
// }} ""
// {{ 328 1 0 "9bd56445_ca3b_49e8_aadc7a18b73780ed" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 329 1 0 "beefe11a_70ec_4555_96e5e0ff3bd649a9" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_ContainerShape == 0)
{
// }} ""
// {{ 330 1 0 "6c3ac7f8_eb54_455c_baa5191f5cf64a23" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 331 1 0 "f3dd1a2f_394a_422f_aea3acf8f3b89125" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".DY"));
// }} ""
// {{{ 332 1 0 "9148f1ea_d407_430e_80cf30198daf6f9e" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 333 1 0 "be8e84ad_4ff2_4a27_826928068e7b4302" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerTopWidth);
// }} ""
// {{{ 334 1 0 "8aed86ed_ca1b_4e02_9850f554fd3dcfc5" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".DY"));
// }} ""
// {{{ 335 1 0 "89c51f82_1a22_4542_9dab53c61b6bee03" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 336 1 0 "c5d6f6f4_859f_494c_9dfeba14aa0b3daa" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBottomWidth);
// }} ""
// {{{ 337 1 0 "c802d61e_949a_4a3e_a3176904c4785257" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".Max"));
// }} ""
// {{{ 338 1 0 "407068bc_1ae9_4348_b5d8b4ff8f0f82a9" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 339 1 0 "878afeab_b048_4cb3_a86c3defae33a74a" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBottomHeight);
// }} ""
// {{ 340 1 0 "beefe11a_70ec_4555_96e5e0ff3bd649a9" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 341 1 0 "8b127817_6b69_4197_ab2d787432de4162" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_ContainerShape == 1)
{
// }} ""
// {{ 342 1 0 "895975c7_c04a_4140_9651885b0af6fb2c" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 343 1 0 "1feb99db_4f66_42e4_acc6bb26eef13d9a" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".DX"));
// }} ""
// {{{ 344 1 0 "39ff8ba4_dd38_4b53_9d01f0483b3dad86" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 345 1 0 "bdda5af5_0157_491f_b7240e8d11b34359" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerTopWidth);
// }} ""
// {{{ 346 1 0 "5bb1be3e_f619_4465_9ef9d2e1568ec2c2" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".DY"));
// }} ""
// {{{ 347 1 0 "0ccafae6_e1c2_4650_a911fc24ca700f80" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 348 1 0 "abc743fb_7759_4c6e_b30e52be0d612999" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBottomWidth);
// }} ""
// {{{ 349 1 0 "c5c13c1e_3fe2_41e1_95bcb017fd436e36" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".Max"));
// }} ""
// {{{ 350 1 0 "54119794_270c_4c3c_b1a808b698042e0b" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 351 1 0 "c1cc5973_e7b7_43dd_87867cd58b8fefa8" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBottomHeight);
// }} ""
// {{ 352 1 0 "8b127817_6b69_4197_ab2d787432de4162" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 353 1 0 "4e249b1d_7d64_4017_bd7cf38929556d22" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_ContainerShape == 2)
{
// }} ""
// {{ 354 1 0 "cfb52732_51f0_4021_828501c4ff6f2d40" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 355 1 0 "befc4e15_b3d3_435a_b839daad189684bf" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".DX"));
// }} ""
// {{{ 356 1 0 "3275448f_4e85_44bd_a8f226f11e6ae8ae" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 357 1 0 "01d1edba_2efa_4fff_8ff86790c0028b8d" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerTopWidth);
// }} ""
// {{{ 358 1 0 "3d1ed2f7_7240_4476_b1f8a6783b2ffca1" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".DY"));
// }} ""
// {{{ 359 1 0 "7ece013c_3722_4628_ba612dbfadeeba12" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 360 1 0 "9dcc6826_debf_42d5_98ca064f2ef640ac" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBottomWidth);
// }} ""
// {{{ 361 1 0 "8b07efab_2f4d_4545_8ebb38d901109aec" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".Max"));
// }} ""
// {{{ 362 1 0 "d3120271_452e_4fd2_9bac94ad7fafbcff" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 363 1 0 "6aebb40f_500e_4072_a2d75929d87cd344" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBottomHeight);
// }} ""
// {{ 364 1 0 "4e249b1d_7d64_4017_bd7cf38929556d22" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 365 1 0 "9e4403d8_3090_438a_b98bda59dd75885e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_ContainerShape == 3)
{
// }} ""
// {{ 366 1 0 "d0f1de1d_e742_4d09_b1b9d5aed2814a58" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 367 1 0 "575bfcb1_95f6_466e_97ffaba7921e1b78" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".DX"));
// }} ""
// {{{ 368 1 0 "4d99fce1_ac17_44be_b78690365bc70ecc" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 369 1 0 "9f4e07ce_1ce3_4b80_be30ec105c657c90" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerTopWidth);
// }} ""
// {{{ 370 1 0 "84806990_7bda_48a9_a03506fa2b97f1af" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".DY"));
// }} ""
// {{{ 371 1 0 "0a4a566d_b1cd_4a1f_9034f401c3178973" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 372 1 0 "c282e462_4e06_413d_aabf09566f0bd609" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBottomWidth);
// }} ""
// {{{ 373 1 0 "a532d8b1_2f9c_45c3_affa9b9ee78a41d5" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".Max"));
// }} ""
// {{{ 374 1 0 "11d3f07f_a682_4491_a8c7a70ef4c73dad" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 375 1 0 "78ee2ab9_d77a_44e1_8d5f068d881b2fce" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBottomHeight);
// }} ""
// {{ 376 1 0 "9e4403d8_3090_438a_b98bda59dd75885e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 377 1 0 "9177526b_9e5e_4e9b_816911075adfa409" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_ContainerShape == 4)
{
// }} ""
// {{ 378 1 0 "9fd606c5_1669_493a_bb25e96aef443514" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 379 1 0 "e7b27095_7f88_44de_888fda4b81c6966a" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".DX"));
// }} ""
// {{{ 380 1 0 "6f376f5d_1a83_40d0_84fa9e2c19fdb809" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 381 1 0 "e3fb116f_1dcb_4e01_a51b5c63963f5360" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerTopWidth);
// }} ""
// {{ 382 1 0 "9449bf42_b6d2_4171_8c6c72d208cb5b83" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_ContainerBottomWidth = 0.0;
// }} ""
// {{{ 383 1 0 "5002e177_8c75_4ec5_aa7b3b213c97fe4e" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".Max"));
// }} ""
// {{{ 384 1 0 "66cc1ac8_c30b_490a_b587ff10b9754e93" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 385 1 0 "2209bf91_a6b6_4e11_a25a12cf1d31d0a7" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBottomHeight);
// }} ""
// {{ 386 1 0 "9177526b_9e5e_4e9b_816911075adfa409" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 387 1 0 "486a6ed5_3e45_484c_ab0243448c195891" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_ContainerShape == 5)
{
// }} ""
// {{ 388 1 0 "2c3fce65_f8ee_4c16_a32a8609e8b5059a" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 389 1 0 "cff3a409_4f95_493e_80079b6b054c2ebe" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".DX"));
// }} ""
// {{{ 390 1 0 "098b644b_474a_47fb_b5ac921adf9e99d4" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 391 1 0 "3fac5e6b_6b79_4968_9b91f08e6c1753ee" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerTopWidth);
// }} ""
// {{ 392 1 0 "154524f4_2432_44fe_a77217a0c1cb8639" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_ContainerBottomWidth = 0.0;
// }} ""
// {{{ 393 1 0 "314cbaca_24a7_43e6_b59cdba010e43a39" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".Max"));
// }} ""
// {{{ 394 1 0 "3ef92cc8_9092_4e94_a03ac1b3968daae7" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 395 1 0 "2200e1b7_a52c_43ce_b22a2105bc46c51d" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBottomHeight);
// }} ""
// {{ 396 1 0 "486a6ed5_3e45_484c_ab0243448c195891" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 397 1 0 "9bd56445_ca3b_49e8_aadc7a18b73780ed" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 398 1 0 "53e58ef1_7386_4d27_8317578d81f77c5e" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_SHAPE.AddAsLast(int_ContainerShape);
// }} ""
// {{ 399 1 0 "31b6f7d3_3e76_47c4_bd5ff40498515a85" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_CONFIG_FILE.AddAsLast(str_ContainerFilePath);
// }} ""
// {{ 400 1 0 "9f813675_eb56_4aed_a85a828519a40368" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_TOP_WIDTH.AddAsLast(flt_ContainerTopWidth);
// }} ""
// {{ 401 1 0 "ef2ca633_0c7e_424d_bed823b0c90047b6" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_BOTTOM_WIDTH.AddAsLast(flt_ContainerBottomWidth);
// }} ""
// {{ 402 1 0 "82ad2ff4_3734_40f1_a1a85aa3edf04025" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_BOTTOM_HEIGHT.AddAsLast(flt_ContainerBottomHeight);
// }} ""
// {{ 403 1 0 "00111d6e_5c45_4585_b61e456a799cab06" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_BASE_OFFSET.AddAsLast(flt_ContainerBaseOffset);
// }} ""
// {{ 404 1 0 "93fabb8f_02cf_418e_88050ed3e5eb5e7e" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_X_OFFSET.AddAsLast(flt_ContainerXOffset);
// }} ""
// {{ 405 1 0 "3c7b6ab0_28b4_426a_bc32e16ae75a3e5f" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_Y_OFFSET.AddAsLast(flt_ContainerYOffset);
// }} ""
// {{ 406 1 0 "476aa229_ff70_413e_b53203361f342a56" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 407 1 0 "695b91d7_aa45_4d9a_a9c0b9011ee83f91" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
int_ContainerShape=LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_SHAPE.GetAt(int_ContainerExists-1);
// }} ""
// {{ 408 1 0 "677a1514_bcda_4a84_bb5d7fb5f6412bd9" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
str_ContainerFilePath=LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_CONFIG_FILE.GetAt(int_ContainerExists-1);
// }} ""
// {{ 409 1 0 "9d4ae617_e241_4d10_98b46c498d042af9" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
flt_ContainerTopWidth=LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_TOP_WIDTH.GetAt(int_ContainerExists-1);
// }} ""
// {{ 410 1 0 "21dcc4ba_427f_4f37_9e5d6657efe48f03" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
flt_ContainerBottomWidth=LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_BOTTOM_WIDTH.GetAt(int_ContainerExists-1);
// }} ""
// {{ 411 1 0 "688782d7_7837_49ed_b76aff88b8df92ac" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
flt_ContainerBottomHeight=LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_BOTTOM_HEIGHT.GetAt(int_ContainerExists-1);
// }} ""
// {{ 412 1 0 "ac5ad8ff_f196_4310_b36cfc267e16cf76" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
flt_ContainerBaseOffset=LPQ::LABWARE_OFFSET_GLOBAL::ARR_BASE_OFFSET.GetAt(int_ContainerExists-1);
// }} ""
// {{ 413 1 0 "9179a8e7_7da6_44d2_a11d5f01566cd0d0" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
flt_ContainerXOffset=LPQ::LABWARE_OFFSET_GLOBAL::ARR_X_OFFSET.GetAt(int_ContainerExists-1);
// }} ""
// {{ 414 1 0 "7c8ab5e5_6ad1_41e6_9a279cb80ca766dd" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
flt_ContainerYOffset=LPQ::LABWARE_OFFSET_GLOBAL::ARR_Y_OFFSET.GetAt(int_ContainerExists-1);
// }} ""
// {{ 415 1 0 "476aa229_ff70_413e_b53203361f342a56" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 416 1 0 "98d36492_1c8f_44c8_96a335b601b0fcd3" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_MaximumRadius = flt_ContainerTopWidth / (2 * 1.0);
// }} ""
// {{ 417 1 0 "5d4dbb02_7ebf_4ce0_91faa762e68be7e5" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 418 1 0 "91b73aff_5a61_4628_883a017946ae40ec" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (flt_WellOffset2 > flt_MaximumRadius)
{
// }} ""
// {{ 419 1 0 "00bd5229_e329_4ba4_bcd0cdda523b6748" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_WellOffset2 = flt_MaximumRadius;
// }} ""
// {{ 420 1 0 "91b73aff_5a61_4628_883a017946ae40ec" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 421 1 0 "26e63cae_7332_4653_a583b3a9022abd38" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_BottomSegmentRadius = flt_ContainerBottomWidth / (2 * 1.0);
// }} ""
// {{ 422 1 0 "9f5b7565_4e92_4d72_b42de948b805ecec" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_WellOffset = flt_WellOffset2 - flt_BottomSegmentRadius;
// }} ""
// {{ 423 1 0 "2695ed8e_6b92_424c_a769090611903f1a" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (flt_WellOffset < 0)
{
// }} ""
// {{ 424 1 0 "601272b0_8b93_44c6_ac37a31d23ec983f" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_WellOffset = 0.0;
// }} ""
// {{ 425 1 0 "2695ed8e_6b92_424c_a769090611903f1a" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 426 1 0 "a02365a8_2dc4_4ba2_bc5f7427eeb34bd6" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 427 1 0 "74bba43a_0d4e_4b58_ad3eee7313d77638" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_ContainerShape == 3)
{
// }} ""
// {{{ 428 1 0 "93ee2f5b_f2b2_4ee8_8e5ca984fd4ae2c4" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_CalculateWellAngle(flt_ContainerBottomHeight, flt_ContainerTopWidth, flt_ContainerBottomWidth, flt_WellAngle);
// }} ""
// {{{ 429 1 0 "90e59882_165e_4d69_80abbdfa31314326" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_CalcualteOffsetHeight(flt_WellAngle, flt_WellOffset, flt_Z_Offset);
// }} ""
// {{ 430 1 0 "74bba43a_0d4e_4b58_ad3eee7313d77638" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 431 1 0 "c373a39b_220c_4ca4_8243540320e221b8" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_ContainerShape == 4)
{
// }} ""
// {{{ 432 1 0 "8bf6d18f_7e8f_4aac_87aaf4c0106fa6a2" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_CalculateWellAngle(flt_ContainerBottomHeight, flt_ContainerTopWidth, flt_ContainerBottomWidth, flt_WellAngle);
// }} ""
// {{{ 433 1 0 "71ecebe8_816e_46c9_95477a07cf86dbfe" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_CalcualteOffsetHeight(flt_WellAngle, flt_WellOffset, flt_Z_Offset);
// }} ""
// {{ 434 1 0 "c373a39b_220c_4ca4_8243540320e221b8" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 435 1 0 "60668be0_ca95_4aea_893915f3ae2e1af3" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_ContainerShape == 5)
{
// }} ""
// {{{ 436 1 0 "57c1604c_b340_4e30_ab80cdcfcf74406e" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_CalculateWellAngle(flt_ContainerBottomHeight, flt_ContainerTopWidth, flt_ContainerBottomWidth, flt_WellAngle);
// }} ""
// {{{ 437 1 0 "326d315d_0862_4f17_a973884ae59c4391" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_CalcualteOffsetHeight(flt_WellAngle, flt_WellOffset, flt_Z_Offset);
// }} ""
// {{ 438 1 0 "60668be0_ca95_4aea_893915f3ae2e1af3" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 439 1 0 "a02365a8_2dc4_4ba2_bc5f7427eeb34bd6" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
Trace("Lab ID:  ",str_LabID," Pos ID:  ",str_PosID," X Offset:  ",i_flt_X_Offset," Y Offset:  ",i_flt_Y_Offset,"  Z Offset:  ",flt_Z_Offset);
// {{ 441 1 0 "4f9c4dad_442a_4aca_a65a8344f8cb2b15" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_X_Offset = i_flt_X_Offset + flt_ContainerXOffset;
// }} ""
// {{ 442 1 0 "80038118_23d2_4bc1_94f5fb6a59934860" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Y_Offset = i_flt_Y_Offset + flt_ContainerYOffset;
// }} ""
// {{ 443 1 0 "25469874_b2b8_4f4d_932f550e395cd7d9" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Z_Offset = flt_Z_Offset + flt_ContainerBaseOffset;
// }} ""
// {{{ 444 1 0 "afbc963e_331b_4dd4_a2e24236d757642b" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DevAddContainerToRack(Instrument, str_LabID, str_PosID, str_ContainerFilePath, flt_X_Offset, flt_Y_Offset, flt_Z_Offset);
// }} ""
// {{{ 445 1 0 "e9085318_f954_43b7_96c2f2155d0d4cf1" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
SeqIncrement(i_seq_LabwarePositionsToOffset, 1);
// }} ""
// {{ 446 1 0 "d9f72a91_c460_4e1c_b3127681e0f0996d" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 447 1 0 "6e759a3f_967c_489e_b37108f9c9b89331" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 448 1 0 "5c3625c1_b2f2_4a69_ae2122e1d87d520a" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
Trace("");
Trace(strFunctionName_Cut," - FINISH");
Trace("===========================================================================");
// {{ 450 1 0 "5c3625c1_b2f2_4a69_ae2122e1d87d520a" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 5 "ADJUST_OffsetWells" "End"
}
// }} ""
// {{{ 5 "ADJUST_OffsetWells2" "Begin"
function ADJUST_OffsetWells2( device & Instrument, sequence i_seq_LabwarePositionsToOffset, variable i_flt_X_Offset, variable i_flt_Y_Offset, variable i_flt_Z_Offset ) void {
// }} ""
private variable flt_ContainerXOffset;
private variable int_CutNum;
private variable flt_ContainerYOffset;
private variable str_ContainerFilePath;
private variable int_Length;
private variable i;
private variable flt_Y_Offset;
private variable int_LabwareCount;
private variable flt_ContainerBottomWidth;
private variable strFunctionName;
private variable str_SearchValue;
private variable int_LabwareIndex;
private variable strFunctionName_Cut;
private variable flt_ContainerBaseOffset;
private variable flt_ContainerBottomHeight;
private variable str_LabID;
private variable int_ContainerExists;
private variable flt_Z_Offset;
private variable str_ShapeValue;
private variable int_SegmentCount;
private variable str_Return;
private variable int_Count;
private variable bool_SequenceValid;
private variable str_PosID;
private variable flt_X_Offset;
private variable flt_ContainerTopWidth;
private variable int_ContainerShape;
private variable str_LabwareConfigFilePath;
private variable int_TotalPositions;
private sequence seq_Temp;
private variable arr_LabwareIDs[];
// {{ 5 "ADJUST_OffsetWells2" "InitLocals"
// }} ""
// {{ 452 1 0 "6fa09d08_4e2b_4904_bded0020ee43ff69" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 453 1 0 "c896cfeb_ed36_450b_be91f48460c0e276" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 455 1 0 "5788eb8e_1b40_452a_a0286170ce880bce" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Count = StrReverseFind(strFunctionName, Translate(":"));
// }} ""
// {{ 456 1 0 "ecd06868_4c81_4b27_86246e73a2dde830" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_Count = int_Count + 1;
// }} ""
// {{{ 457 1 0 "994366c5_6a60_4e20_a99ecdd60494e547" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Length = StrGetLength(strFunctionName);
// }} ""
// {{ 458 1 0 "67797f96_e89d_403d_a558708b79284282" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_CutNum = int_Length - int_Count;
// }} ""
// {{{ 459 1 0 "1ff06218_7143_493a_821a728b18aa4261" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
strFunctionName_Cut = StrMid(strFunctionName, int_Count, int_CutNum);
// }} ""
Trace("===========================================================================");
Trace(strFunctionName_Cut," - START");
Trace("");
// {{ 461 1 0 "6fa09d08_4e2b_4904_bded0020ee43ff69" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 462 1 0 "aecf7d64_96f1_4bc3_a5de0aa797f2ada0" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 463 1 0 "088aedf4_3bf4_4814_b04567ed81746b7d" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 465 1 0 "83de41c5_877e_4107_9058b65c44c9354f" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_LabwarePositionsToOffset, str_LabID, str_PosID);
// }} ""
// {{ 466 1 0 "eccc8dea_8cdf_4c8b_bc6ee5e6bc8eca9f" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 467 1 0 "a78e2137_5c84_47f6_b0e75e00d60b6431" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 468 1 0 "eccc8dea_8cdf_4c8b_bc6ee5e6bc8eca9f" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 469 1 0 "aecf7d64_96f1_4bc3_a5de0aa797f2ada0" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 470 1 0 "38ecec3d_4076_4aa1_be4c547cc4ce3b71" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_RemoveTruncatedSequencePositions(Instrument, i_seq_LabwarePositionsToOffset);
// }} ""
// {{ 471 1 0 "c5640046_d854_449e_ae1f52556f4d1b37" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 472 1 0 "c1f477eb_0327_4715_818cb7c33c24b7c9" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (LPQ::LABWARE_OFFSET_GLOBAL::BOOL_LIBRARY_INITIALIZED == 0)
{
// }} ""
// {{{ 473 1 0 "042602fd_2dc6_4f3d_931a510cbc7655f2" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
LPQ::InitializeVariables();
// }} ""
// {{ 474 1 0 "898a62d8_1b17_435a_839fa26f3befefac" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_BOTTOM_HEIGHT.SetSize(0);
// }} ""
// {{ 475 1 0 "18ac20ea_fde1_44cb_81c22dbced46b27a" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_BOTTOM_WIDTH.SetSize(0);
// }} ""
// {{ 476 1 0 "2bd91015_4b3e_4c54_bf422fe17d5971c2" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_CONFIG_FILE.SetSize(0);
// }} ""
// {{ 477 1 0 "c3653fc8_450c_443c_a6f9f49a2f34d334" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_SHAPE.SetSize(0);
// }} ""
// {{ 478 1 0 "3baa1a5a_1171_460d_95a7ff533b1ee094" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_TOP_WIDTH.SetSize(0);
// }} ""
// {{ 479 1 0 "5d4915f5_c2ba_4583_852f14715ee13737" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_BASE_OFFSET.SetSize(0);
// }} ""
// {{ 480 1 0 "1dc03e99_d4cc_4ed1_824214a248ad32ae" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_X_OFFSET.SetSize(0);
// }} ""
// {{ 481 1 0 "ebae8f64_2c2e_46cb_94f3028a523a5904" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_Y_OFFSET.SetSize(0);
// }} ""
// {{ 482 1 0 "b31636a4_91bd_477e_993db97eab0924c1" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
LPQ::LABWARE_OFFSET_GLOBAL::BOOL_LIBRARY_INITIALIZED = 1;
// }} ""
// {{ 483 1 0 "c1f477eb_0327_4715_818cb7c33c24b7c9" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 484 1 0 "0959a9ad_55cc_4d62_91b19defbc59c767" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_TotalPositions = SeqGetTotal(i_seq_LabwarePositionsToOffset);
// }} ""
// {{{ 485 1 0 "0bb1cdc9_0499_4f3c_a2cd40169b755a73" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
SeqGetLabwareIds(i_seq_LabwarePositionsToOffset, arr_LabwareIDs);
// }} ""
// {{ 486 1 0 "b84c9a93_4c0f_49b7_84aab30514f6e6a4" "{72EACF88-8D49-43e3-92C8-2F90E81E3260}"
int_LabwareCount=arr_LabwareIDs.GetSize();
// }} ""
// {{ 487 1 0 "36c5d0e4_f540_4874_8a258a4f0068c9c4" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(int_LabwareIndex = 0; int_LabwareIndex < int_LabwareCount;)
{
int_LabwareIndex = int_LabwareIndex + 1;
// }} ""
// {{ 488 1 0 "603d401a_b38f_4bf9_ac2fd32b150e18fe" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
str_LabID=arr_LabwareIDs.GetAt(int_LabwareIndex-1);
// }} ""
// {{{ 489 1 0 "acae7d5b_5512_4185_850abdbe6429f9a9" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
SEQ_GetDefaultSequence(Instrument, str_LabID, 1, seq_Temp);
// }} ""
// {{{ 490 1 0 "b22f1c72_a680_468b_88150d218c4ecf13" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_TotalPositions = SeqGetPositionCountForCurrLabware(i_seq_LabwarePositionsToOffset);
// }} ""
// {{{ 491 1 0 "4dc1cb00_42a2_467b_bc329bd6bce07beb" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetConfigFile(Instrument, seq_Temp, str_LabwareConfigFilePath);
// }} ""
// {{{ 492 1 0 "458b7d42_8102_48f1_b3295f5375236ca9" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
CONT_GetConfigFile(Instrument, seq_Temp, str_ContainerFilePath);
// }} ""
Trace("Total Positions:  ",int_TotalPositions);
// {{ 494 1 0 "06dde8b4_c2ff_445b_9b05f957fb7899d1" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(i = 0; i < int_TotalPositions;)
{
i = i + 1;
// }} ""
// {{ 495 1 0 "ad2d2188_d9f0_4a57_92e65975c723bdae" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_Z_Offset = 0.0;
// }} ""
// {{{ 496 1 0 "8ee6d559_7cfa_486b_a9e6a159cfcd8900" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_LabID = SeqGetLabwareId(i_seq_LabwarePositionsToOffset);
// }} ""
// {{{ 497 1 0 "f09d01e8_dc71_48fc_aef7197eda648c1a" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_PosID = SeqGetPositionId(i_seq_LabwarePositionsToOffset);
// }} ""
// {{{ 498 1 0 "a35d0586_3566_414e_983d19b4c51b3481" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
int_ContainerExists = _Lookup(LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_CONFIG_FILE, str_ContainerFilePath);
// }} ""
// {{ 499 1 0 "2a112a2a_db3a_4db8_8593a84953c9d08f" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_ContainerExists == 0)
{
// }} ""
// {{ 500 1 0 "3762d1a6_f079_4b64_add29bed0b06c5b0" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 501 1 0 "164cc805_2194_4a22_868e3a93e051b3e8" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_ShapeValue = StrConcat2(int_SegmentCount, Translate(".Shape"));
// }} ""
// {{{ 502 1 0 "0bace9f3_a3e7_4634_909ebaa826d09529" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_ShapeValue, str_Return);
// }} ""
// {{{ 503 1 0 "d6fc946f_cb46_4794_b3a3d3a76db6df89" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToInteger(str_Return, int_ContainerShape);
// }} ""
// {{ 504 1 0 "d983efdb_2beb_41a7_949ac1479ef21beb" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 505 1 0 "70d403e5_96f0_4bbd_9f63cf66d68ec737" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_ContainerShape == 0)
{
// }} ""
// {{ 506 1 0 "86a7f8fd_60e6_4af0_ad8e5b9140507ae5" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 507 1 0 "77007da6_23ba_4685_b7ee032d51399697" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".DY"));
// }} ""
// {{{ 508 1 0 "462dac62_41af_464b_a9961a4d27be375a" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 509 1 0 "550b8751_46f8_4dcf_a73d4c8b0e41eddc" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerTopWidth);
// }} ""
// {{{ 510 1 0 "63fb3625_a9fd_44d1_97d25fd87f2c6c48" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".DY"));
// }} ""
// {{{ 511 1 0 "5d40da45_883e_4d70_b82bec72d61e58f8" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 512 1 0 "04a143dd_a3a9_4563_ba04c74d37353e0a" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBottomWidth);
// }} ""
// {{{ 513 1 0 "7537fb40_7ade_4ecf_a40a214aeabfcfcc" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".Max"));
// }} ""
// {{{ 514 1 0 "f5410733_58df_4033_a82ca662d55f652e" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 515 1 0 "04f3a87f_ffbd_4c94_a8537d9761b443bd" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBottomHeight);
// }} ""
// {{ 516 1 0 "70d403e5_96f0_4bbd_9f63cf66d68ec737" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 517 1 0 "9a069836_3e1f_418c_8b6fd570761edc1c" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_ContainerShape == 1)
{
// }} ""
// {{ 518 1 0 "3eeff826_539a_46b7_8f4abb9e9be1c807" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 519 1 0 "3de58403_a8e9_4971_93b0cf615835cc0f" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".DX"));
// }} ""
// {{{ 520 1 0 "8fd2ccbd_7f09_4832_9e7296b0d61dc86c" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 521 1 0 "baab88da_61d5_4331_baed9df1b53df854" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerTopWidth);
// }} ""
// {{{ 522 1 0 "acbe5721_b255_458d_831763840e1d8926" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".DY"));
// }} ""
// {{{ 523 1 0 "af43eb3f_a181_4caa_b6a3193863857246" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 524 1 0 "3209e940_5156_4c36_ab7d300740c010bf" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBottomWidth);
// }} ""
// {{{ 525 1 0 "04371bfe_6f62_402f_8b3ee67e905bb48f" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".Max"));
// }} ""
// {{{ 526 1 0 "41d56366_fd78_4f44_a0c79be288121760" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 527 1 0 "cf9fab65_216a_4fec_9ad1348a44ad018e" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBottomHeight);
// }} ""
// {{ 528 1 0 "9a069836_3e1f_418c_8b6fd570761edc1c" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 529 1 0 "476aeebd_5f40_4928_8958525e68f634ad" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_ContainerShape == 2)
{
// }} ""
// {{ 530 1 0 "f547b9ce_ea95_408d_95b85f0ece099c9b" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 531 1 0 "f040e0fa_f09f_43f3_9046b64b209675c1" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".DX"));
// }} ""
// {{{ 532 1 0 "89efd6c5_c56d_4f24_bbd43fd68e820dde" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 533 1 0 "d6385399_c644_45b6_9cd9d8c687280159" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerTopWidth);
// }} ""
// {{{ 534 1 0 "dbd04ad9_e08f_4fac_93bb5a26d9e3eee9" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".DY"));
// }} ""
// {{{ 535 1 0 "db3692a3_caa5_440f_b35a5390e4498bf6" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 536 1 0 "adb5e611_6b46_41a4_be28310a41b7ac75" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBottomWidth);
// }} ""
// {{{ 537 1 0 "c679ce25_f7cf_4c79_846f7a840c099681" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".Max"));
// }} ""
// {{{ 538 1 0 "ac82ff9b_62ce_48d5_95e7b5e409643352" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 539 1 0 "d6865e96_1daa_4add_991a828ba3715a26" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBottomHeight);
// }} ""
// {{ 540 1 0 "476aeebd_5f40_4928_8958525e68f634ad" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 541 1 0 "1189abbe_2155_4dfb_9fc8041a783a166c" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_ContainerShape == 3)
{
// }} ""
// {{ 542 1 0 "e37d9370_7c4e_4e0d_a4a851202d7d9969" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 543 1 0 "ac57ad97_c05c_4471_bae59fc4864eb622" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".DX"));
// }} ""
// {{{ 544 1 0 "b097d201_33ba_480e_817bb9e841525236" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 545 1 0 "1f107a0b_a45b_480f_ba2511d1f9d24eb8" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerTopWidth);
// }} ""
// {{{ 546 1 0 "395c11f1_cef5_442e_9d90e2f56f73eea9" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".DY"));
// }} ""
// {{{ 547 1 0 "c19bfb3b_d6f5_474f_afc83bd6b276f9ea" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 548 1 0 "522abdf9_0297_436e_8beb2aaf78e03a9c" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBottomWidth);
// }} ""
// {{{ 549 1 0 "5386d09f_0626_4cec_961a0c5daa738888" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".Max"));
// }} ""
// {{{ 550 1 0 "d3b0544c_eca7_4b6f_940a9f9f60fd187c" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 551 1 0 "fff5fcbc_3b79_4190_94747c5d0a01c8c5" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBottomHeight);
// }} ""
// {{ 552 1 0 "1189abbe_2155_4dfb_9fc8041a783a166c" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 553 1 0 "44f6a9bc_2c34_4506_904729b33d6dd46b" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_ContainerShape == 4)
{
// }} ""
// {{ 554 1 0 "96e69e68_554c_47a2_81e68cedf2620a02" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 555 1 0 "1112f860_4d50_4e8f_a3473a5969b6801b" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".DX"));
// }} ""
// {{{ 556 1 0 "7e99d8b4_aa06_4cfc_aad215c394269293" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 557 1 0 "ec1de675_7d29_43ee_8f54e88dc8dff774" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerTopWidth);
// }} ""
// {{ 558 1 0 "02e93178_dc39_45bb_bb44c01eaf4a2c19" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_ContainerBottomWidth = 0.0;
// }} ""
// {{{ 559 1 0 "161ffdd4_47fa_46a4_aa8c14eb12664d89" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".Max"));
// }} ""
// {{{ 560 1 0 "fed8b709_0c43_48a5_81903535c29ccbaa" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 561 1 0 "6e4fd674_f2d0_471d_9f71ba280de35d45" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBottomHeight);
// }} ""
// {{ 562 1 0 "44f6a9bc_2c34_4506_904729b33d6dd46b" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 563 1 0 "e4eaa235_f955_4606_a1e9dec79a1d5b0e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_ContainerShape == 5)
{
// }} ""
// {{ 564 1 0 "400bcf2e_de93_451d_a8b38aae239571cc" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 565 1 0 "dc192de9_4a1a_4160_a734fa4cbae8557f" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".DX"));
// }} ""
// {{{ 566 1 0 "15f23158_a14c_4151_8791bf93bc17c67e" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 567 1 0 "e71455bc_dadf_496b_8c39659af413e5bb" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerTopWidth);
// }} ""
// {{ 568 1 0 "47923586_2936_474e_937e984cde50ead6" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_ContainerBottomWidth = 0.0;
// }} ""
// {{{ 569 1 0 "a24eda20_bb64_4e6f_a08138b81339d4ba" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SearchValue = StrConcat2(int_SegmentCount, Translate(".Max"));
// }} ""
// {{{ 570 1 0 "fa5f19db_6ef8_4441_ab9f3750b2651617" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ContainerFilePath, str_SearchValue, str_Return);
// }} ""
// {{{ 571 1 0 "3b37a23f_e08b_41f4_baf3eee87edadee5" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBottomHeight);
// }} ""
// {{ 572 1 0 "e4eaa235_f955_4606_a1e9dec79a1d5b0e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 573 1 0 "d983efdb_2beb_41a7_949ac1479ef21beb" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 574 1 0 "c67152de_f2a6_43a8_a286dbc604b830e9" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 575 1 0 "a565a0b7_8729_45f9_ba1070c38b435fce" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_LabwareConfigFilePath, Translate("Cntr.1.offsetx"), str_Return);
// }} ""
// {{{ 576 1 0 "3b459565_759b_4ed0_843bfad89947cb6a" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerXOffset);
// }} ""
// {{ 577 1 0 "6c8756f9_2962_4041_a26db02e681d324d" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 578 1 0 "d6a68bcc_8a8b_49a6_8b0fc677b7f2fff7" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_LabwareConfigFilePath, Translate("Cntr.1.offsety"), str_Return);
// }} ""
// {{{ 579 1 0 "8847e21a_82d1_4d6f_9732df2b9e535de7" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerYOffset);
// }} ""
// {{ 580 1 0 "b670d3cb_ca96_4119_954dd4603f1c0612" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 581 1 0 "dcd7ce9b_1a33_4700_8ac2d4bb2a7564a2" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_LabwareConfigFilePath, Translate("Cntr.1.base"), str_Return);
// }} ""
// {{{ 582 1 0 "a24f3f0f_57e7_4758_b0c4f9d021285076" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBaseOffset);
// }} ""
// {{ 583 1 0 "d569178b_3c87_4a0e_94720c70803e492c" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_SHAPE.AddAsLast(int_ContainerShape);
// }} ""
// {{ 584 1 0 "da2e1034_a786_49cc_ac16bb51a37b6ad6" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_CONFIG_FILE.AddAsLast(str_ContainerFilePath);
// }} ""
// {{ 585 1 0 "160af8cc_8ffa_48f8_87ecc5639f980033" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_TOP_WIDTH.AddAsLast(flt_ContainerTopWidth);
// }} ""
// {{ 586 1 0 "97e13d0f_af46_4280_afe696266facf87c" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_BOTTOM_WIDTH.AddAsLast(flt_ContainerBottomWidth);
// }} ""
// {{ 587 1 0 "6490e321_ab74_498e_a315f6b36df21dd8" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_BOTTOM_HEIGHT.AddAsLast(flt_ContainerBottomHeight);
// }} ""
// {{ 588 1 0 "0766abf8_8cee_40d9_b6fe7327bc520a77" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_BASE_OFFSET.AddAsLast(flt_ContainerBaseOffset);
// }} ""
// {{ 589 1 0 "e3150f56_45d9_487d_b0c4e9d85b181a95" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_X_OFFSET.AddAsLast(flt_ContainerXOffset);
// }} ""
// {{ 590 1 0 "123bbd60_14af_4e8e_bc1dc4f34a98eac6" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
LPQ::LABWARE_OFFSET_GLOBAL::ARR_Y_OFFSET.AddAsLast(flt_ContainerYOffset);
// }} ""
// {{ 591 1 0 "2a112a2a_db3a_4db8_8593a84953c9d08f" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 592 1 0 "96f25417_cd9b_4a8e_821c27861afd2258" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
int_ContainerShape=LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_SHAPE.GetAt(int_ContainerExists-1);
// }} ""
// {{ 593 1 0 "5127a1c0_1ad3_4913_bee6dfc6d86b8185" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
str_ContainerFilePath=LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_CONFIG_FILE.GetAt(int_ContainerExists-1);
// }} ""
// {{ 594 1 0 "f8621ecb_0ff5_4e02_9e637b3b4476fee3" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
flt_ContainerTopWidth=LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_TOP_WIDTH.GetAt(int_ContainerExists-1);
// }} ""
// {{ 595 1 0 "f8092eda_a3f5_4fe1_8a299d4813afe1ac" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
flt_ContainerBottomWidth=LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_BOTTOM_WIDTH.GetAt(int_ContainerExists-1);
// }} ""
// {{ 596 1 0 "f23b858a_9e93_4e56_802c26473a4b28f0" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
flt_ContainerBottomHeight=LPQ::LABWARE_OFFSET_GLOBAL::ARR_CONTAINER_BOTTOM_HEIGHT.GetAt(int_ContainerExists-1);
// }} ""
// {{ 597 1 0 "73c1596a_d926_4bdd_a3c354e30e8ff175" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
flt_ContainerBaseOffset=LPQ::LABWARE_OFFSET_GLOBAL::ARR_BASE_OFFSET.GetAt(int_ContainerExists-1);
// }} ""
// {{ 598 1 0 "31eaed7c_7e43_4de9_b4943ad6a7f68b77" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
flt_ContainerXOffset=LPQ::LABWARE_OFFSET_GLOBAL::ARR_X_OFFSET.GetAt(int_ContainerExists-1);
// }} ""
// {{ 599 1 0 "d1a8c415_bdd1_4d98_ac3568006223172b" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
flt_ContainerYOffset=LPQ::LABWARE_OFFSET_GLOBAL::ARR_Y_OFFSET.GetAt(int_ContainerExists-1);
// }} ""
// {{ 600 1 0 "2a112a2a_db3a_4db8_8593a84953c9d08f" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
Trace("Lab ID:  ",str_LabID," Pos ID:  ",str_PosID," X Offset:  ",i_flt_X_Offset," Y Offset:  ",i_flt_Y_Offset,"  Z Offset:  ",i_flt_Z_Offset);
// {{ 602 1 0 "16be14c8_b88e_4d58_bd7df8cb02d50e02" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_X_Offset = i_flt_X_Offset + flt_ContainerXOffset;
// }} ""
// {{ 603 1 0 "c8f22335_661e_4049_84f4ddf95bc061a4" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Y_Offset = i_flt_Y_Offset + flt_ContainerYOffset;
// }} ""
// {{ 604 1 0 "6e353268_046f_4354_8304e64c72304e11" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Z_Offset = i_flt_Z_Offset + flt_ContainerBaseOffset;
// }} ""
// {{{ 605 1 0 "7e698b8e_b81c_4c9c_9912628816dc5161" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DevAddContainerToRack(Instrument, str_LabID, str_PosID, str_ContainerFilePath, flt_X_Offset, flt_Y_Offset, flt_Z_Offset);
// }} ""
// {{{ 606 1 0 "91470237_3d69_4976_a9f0462de14df43c" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
SeqIncrement(i_seq_LabwarePositionsToOffset, 1);
// }} ""
// {{ 607 1 0 "06dde8b4_c2ff_445b_9b05f957fb7899d1" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 608 1 0 "36c5d0e4_f540_4874_8a258a4f0068c9c4" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 609 1 0 "080544fc_48a3_445f_bcf24a354db7bed4" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
Trace("");
Trace(strFunctionName_Cut," - FINISH");
Trace("===========================================================================");
// {{ 611 1 0 "080544fc_48a3_445f_bcf24a354db7bed4" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 5 "ADJUST_OffsetWells2" "End"
}
// }} ""
// {{{ 5 "ADJUST_RotateLabware" "Begin"
function ADJUST_RotateLabware( device & Instrument, sequence i_seq_LabwarePositionsToOffset, variable i_flt_TargetRotation ) void {
// }} ""
private variable int_CutNum;
private variable flt_A_Difference;
private variable flt_CurrentX;
private variable int_Length;
private variable flt_CurrentY;
private variable flt_DeltaX;
private variable flt_CurrentZ;
private variable strFunctionName;
private variable flt_DeltaY;
private variable flt_CenterY2;
private variable strFunctionName_Cut;
private variable flt_CenterX2;
private variable str_LabID;
private variable flt_CurrentA;
private variable int_Count;
private variable flt_CenterX;
private variable str_PosID;
private variable bool_SequenceValid;
private variable flt_CenterY;
// {{ 5 "ADJUST_RotateLabware" "InitLocals"
// }} ""
// {{ 613 1 0 "3322f576_0eeb_40f0_9ae253aa8ec6c194" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 614 1 0 "a5fca648_3434_4756_b5042ac85f621262" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 616 1 0 "68908be1_78af_4d05_a7a849a9630bcb97" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Count = StrReverseFind(strFunctionName, Translate(":"));
// }} ""
// {{ 617 1 0 "aceaacf6_4e60_4194_bfca2662cc5bc4e6" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_Count = int_Count + 1;
// }} ""
// {{{ 618 1 0 "3b9f2f0f_fe4b_4caf_b8c2de5633353247" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Length = StrGetLength(strFunctionName);
// }} ""
// {{ 619 1 0 "aee7c623_9278_45c1_a5604f0905b8f850" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_CutNum = int_Length - int_Count;
// }} ""
// {{{ 620 1 0 "0509d289_a174_40d7_b09e21ae1064c150" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
strFunctionName_Cut = StrMid(strFunctionName, int_Count, int_CutNum);
// }} ""
Trace("===========================================================================");
Trace(strFunctionName_Cut," - START");
Trace("");
// {{ 622 1 0 "3322f576_0eeb_40f0_9ae253aa8ec6c194" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 623 1 0 "62b04b93_ef2e_4a2c_a7d6f44fe0dcc14a" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 624 1 0 "788aea9f_4724_4a3b_8c642e4d67861e1c" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 626 1 0 "777934a2_fcdf_40cc_a66d8aec6bd57fab" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_LabwarePositionsToOffset, str_LabID, str_PosID);
// }} ""
// {{ 627 1 0 "5eec4b9b_c61d_49a5_a2b83a99a457f0be" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 628 1 0 "39f4c20e_ebc5_4fe6_af17cbf52f31bd34" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 629 1 0 "5eec4b9b_c61d_49a5_a2b83a99a457f0be" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 630 1 0 "62b04b93_ef2e_4a2c_a7d6f44fe0dcc14a" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 631 1 0 "03aad7ba_85e6_4953_a538ba3adac49d7e" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_RemoveTruncatedSequencePositions(Instrument, i_seq_LabwarePositionsToOffset);
// }} ""
// {{{ 632 1 0 "b39fa980_63e4_4da1_9ba9f0cda908dc0b" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DevGetLabwarePosition(Instrument, str_LabID, flt_CurrentX, flt_CurrentY, flt_CurrentZ, flt_CurrentA);
// }} ""
// {{ 633 1 0 "f675d333_9897_4867_9d3aa132c568fadc" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_A_Difference = i_flt_TargetRotation - flt_CurrentA;
// }} ""
// {{{ 634 1 0 "c2cb9661_4624_4a70_8224c3f5506dc103" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetLabwareCenter(Instrument, i_seq_LabwarePositionsToOffset, flt_CenterX, flt_CenterY);
// }} ""
Trace("Current X:  ",flt_CurrentX,"  Current Y:  ",flt_CurrentY);
Trace("Rotation Difference:  ",flt_A_Difference);
Trace("Center X:  ",flt_CenterX,"  Center Y:  ",flt_CenterY);
// {{ 636 1 0 "283ce635_9994_4dc4_92fc996bc7c55bc3" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_DeltaX = 0.0;
// }} ""
// {{ 637 1 0 "4c280571_f91a_4a5f_bb26a91c8065b8eb" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_DeltaY = 0.0;
// }} ""
// {{ 638 1 0 "6d49183f_3b9b_4521_b656992404f93396" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 639 1 0 "f21531af_756f_4f2a_a99902a28dad60ca" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
ADJUST_SetRelativePositionForLabwareID(Instrument, str_LabID, 0.0, 0.0, 0.0, flt_A_Difference);
// }} ""
// {{ 640 1 0 "a8291268_a976_420d_a51ccf7fc51f3948" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 641 1 0 "90d0391d_9b78_4bd0_8b92fffbdf4fb802" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetLabwareCenter(Instrument, i_seq_LabwarePositionsToOffset, flt_CenterX2, flt_CenterY2);
// }} ""
// {{ 642 1 0 "f50f4692_e5ff_42f4_b817e5a53dc0172e" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_DeltaX = flt_CenterX - flt_CenterX2;
// }} ""
// {{ 643 1 0 "a021c0d1_0420_4250_9c0ce560e37ff6ff" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_DeltaY = flt_CenterY - flt_CenterY2;
// }} ""
// {{ 644 1 0 "d86e3bdd_c625_4cec_942635514b500c16" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 645 1 0 "ad0389c5_d958_4c4e_9a5b0a4b2fafeafe" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
ADJUST_SetRelativePositionForLabwareID(Instrument, str_LabID, flt_DeltaX, flt_DeltaY, 0.0, 0.0);
// }} ""
// {{ 646 1 0 "94d71c93_b7bb_4225_af2e97ca00f45225" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
Trace("");
Trace(strFunctionName_Cut," - FINISH");
Trace("===========================================================================");
// {{ 648 1 0 "94d71c93_b7bb_4225_af2e97ca00f45225" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 5 "ADJUST_RotateLabware" "End"
}
// }} ""
// {{{ 5 "ADJUST_SetAbsolutePosition" "Begin"
function ADJUST_SetAbsolutePosition( device & Instrument, sequence i_seq_LabwarePositionsToAdjust, variable i_fltPositionX, variable i_fltPositionY, variable i_fltPositionZ, variable i_fltPositionR ) void {
// }} ""
private variable strFunctionName;
private variable str_LabID;
private variable str_PosID;
private variable bool_SequenceValid;
// {{ 5 "ADJUST_SetAbsolutePosition" "InitLocals"
// }} ""
// {{ 650 1 0 "3cae0917_f954_41fc_b5d56c4c51afbda5" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 651 1 0 "84c60f13_26d4_4130_88cdcd019914bddb" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 653 1 0 "88df4dc8_ae87_439d_bc250ceaee4a1a43" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_LabwarePositionsToAdjust, str_LabID, str_PosID);
// }} ""
// {{ 654 1 0 "4514b44b_10d9_4b26_94e90c58b5cfcae9" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 655 1 0 "2169da70_8ec1_4335_86edd48d7ee24de2" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 656 1 0 "4514b44b_10d9_4b26_94e90c58b5cfcae9" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 657 1 0 "3cae0917_f954_41fc_b5d56c4c51afbda5" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 658 1 0 "f59b678e_4c08_48f9_979071d508145648" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
ADJUST_SetAbsolutePositionForLabwareID(Instrument, str_LabID, i_fltPositionX, i_fltPositionY, i_fltPositionZ, i_fltPositionR);
// }} ""
// {{{ 5 "ADJUST_SetAbsolutePosition" "End"
}
// }} ""
// {{{ 5 "ADJUST_SetAbsolutePositionForLabwareID" "Begin"
function ADJUST_SetAbsolutePositionForLabwareID( device & Instrument, variable i_strLabwareID, variable i_fltPositionX, variable i_fltPositionY, variable i_fltPositionZ, variable i_fltPositionR ) void {
// }} ""
// {{ 5 "ADJUST_SetAbsolutePositionForLabwareID" "InitLocals"
// }} ""
// Set Absolute Position
{
    static string P_XCOORD("Labwr_XCoord");
    static string P_YCOORD("Labwr_YCoord");
    static string P_ZCOORD("Labwr_ZCoord");
    static string P_RZCOORD("Labwr_Rotation");
    static string P_LABWARE_ID("Labwr_Id");

      variable PosVals[];
      object   objDecklayout;
      variable strFunctionName("");

      //strFunctionName = ExtractFunctionName(GetFunctionName());

      // check input variables
      //if (!CheckString(i_strLabwareID, "i_strLabwareID", strFunctionName)) return(hslFalse);

      //StatusTrace(CMD_START, TRACE_LEVEL_DEBUG, "i_strLabwareID = " + i_strLabwareID + ", i_fltPositionX = " + FStr(i_fltPositionX) + ", i_fltPositionY = " + FStr(i_fltPositionY) + ", i_fltPositionZ = " + FStr(i_fltPositionZ) + ", i_fltPositionR = " + FStr(i_fltPositionR), strFunctionName);

      //EnterSemaphore();
      objDecklayout = Instrument.GetDeckLayoutObject();
      //LeaveSemaphore();

      if (!objDecklayout.IsNull())
      {
        object objLabware;
        onerror goto HandleLabwareError;
        objLabware = objDecklayout.Labware(i_strLabwareID);
        onerror goto 0;
        err.Clear();

        if (!objLabware.IsNull())
        {
          object Decklayout5;
          object MoveParameters;

          objDecklayout.GetObject("IDeckLayout5", Decklayout5);

          //EnterSemaphore();             
          //io_devDevice.GetLabwarePosition(i_strLabwareID, PosVals);
          //LeaveSemaphore();

          //StatusTrace(CMD_PROGRESS, TRACE_LEVEL_DEBUG, "Current position: (" + FStr(PosVals[0]) + "/" + FStr(PosVals[1]) + "/" + FStr(PosVals[2]) + "/" + FStr(PosVals[3]) + ")", strFunctionName);

          MoveParameters.CreateObject("HXPARAMSLib.HxPars");
          MoveParameters.Add(i_strLabwareID, P_LABWARE_ID);
          MoveParameters.Add(i_fltPositionX, P_XCOORD);
          MoveParameters.Add(i_fltPositionY, P_YCOORD);
          MoveParameters.Add(i_fltPositionZ, P_ZCOORD);
          MoveParameters.Add(i_fltPositionR, P_RZCOORD);

          Decklayout5.MoveLabware(objLabware, MoveParameters);

          // Trace new position
          //EnterSemaphore();
          //io_devDevice.GetLabwarePosition(i_strLabwareID, PosVals);
          //LeaveSemaphore();

          objLabware.ReleaseObject();
          objDecklayout.ReleaseObject();
          Decklayout5.ReleaseObject();
          MoveParameters.ReleaseObject();
          //StatusTrace(CMD_COMPLETE, TRACE_LEVEL_DEBUG, "New position:     (" + FStr(PosVals[0]) + "/" + FStr(PosVals[1]) + "/" + FStr(PosVals[2]) + "/" + FStr(PosVals[3]) + ")", strFunctionName);
          //return(hslTrue);
        }
        //else
        //{
          //StatusTrace(CMD_ERRCOMPLETE, TRACE_LEVEL_RELEASE, "Could not find labware.", strFunctionName);
          //objDecklayout.ReleaseObject();
          //return(hslFalse);
        //}
     // }
      //else
      //{
        //StatusTrace(CMD_ERRCOMPLETE, TRACE_LEVEL_RELEASE, "Could not find decklayout.", strFunctionName);
        //return(hslFalse);
      }
      // runtime error handling
      HandleLabwareError :
      {
        variable errorID;
        errorID=err.GetId();
        err.Clear();
//Trace(errorID);
        if (errorID==-1574764487)
        {
          Trace("LabwareID is  unknown.");
          //return(hslFalse);
        }
        else
        {
          //Trace("Unknown error occured.");
          //return(hslFalse);
        }
      }
}
// {{{ 5 "ADJUST_SetAbsolutePositionForLabwareID" "End"
}
// }} ""
// {{{ 5 "ADJUST_SetProperties" "Begin"
function ADJUST_SetProperties( device & Instrument, sequence i_seq_LabwarePositionsToAdjust, variable i_strPropertyKey, variable i_strProperyValue ) void {
// }} ""
private variable strFunctionName;
private variable str_LabID;
private variable str_PosID;
private variable bool_SequenceValid;
// {{ 5 "ADJUST_SetProperties" "InitLocals"
// }} ""
// {{ 662 1 0 "b5d1796e_1d51_4956_986647e77b656088" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 663 1 0 "bd434c8d_726b_49c7_8a15f395072e3972" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 665 1 0 "091b1fcf_f84f_4629_a1285e3f175dc63f" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_LabwarePositionsToAdjust, str_LabID, str_PosID);
// }} ""
// {{ 666 1 0 "ad2e5dc9_5d99_4504_9c109daae0533ff9" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 667 1 0 "afa3da4a_306f_445e_8f4c7961b4780ccf" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 668 1 0 "ad2e5dc9_5d99_4504_9c109daae0533ff9" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 669 1 0 "b5d1796e_1d51_4956_986647e77b656088" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 670 1 0 "44df2e12_8806_4497_940cbb2622bd1dd6" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
ADJUST_SetPropertiesForLabwareID(Instrument, str_LabID, i_strPropertyKey, i_strProperyValue);
// }} ""
// {{{ 5 "ADJUST_SetProperties" "End"
}
// }} ""
// {{{ 5 "ADJUST_SetPropertiesForLabwareID" "Begin"
function ADJUST_SetPropertiesForLabwareID( device & Instrument, variable i_strLabwareID, variable i_strPropertyKey, variable i_strProperyValue ) void {
// }} ""
private variable strLabwareID;
private variable strProperyValue;
private variable strPropertyKey;
// {{ 5 "ADJUST_SetPropertiesForLabwareID" "InitLocals"
// }} ""
// {{{ 672 1 0 "8460f919_dd60_43a9_a5d7f3576546ecc5" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
strPropertyKey = StrConcat2(i_strPropertyKey, Translate(""));
// }} ""
// {{{ 673 1 0 "01cf411f_649a_4b41_8c35b49127a451b4" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
strProperyValue = StrConcat2(i_strProperyValue, Translate(""));
// }} ""
// {{{ 674 1 0 "cf2a01de_c66a_48c3_931d1836b0a35491" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
strLabwareID = StrConcat2(i_strLabwareID, Translate(""));
// }} ""
Trace("Lab ID:  ",i_strLabwareID," Property Key:  ",strPropertyKey,"  Property Value:  ",strProperyValue);
// {{ 676 1 0 "4298d6fb_bf75_4a8e_88e6e63b6782acd3" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
    {
      object   objDecklayout;
      variable str_PropertyValue;

      str_PropertyValue = strProperyValue;

      //variable strFunctionName("");

      //strFunctionName = ExtractFunctionName(GetFunctionName());

      // check input variables
      //if (!CheckString(i_strPropertyValue, "i_strPropertyValue", strFunctionName)) return(hslFalse);
      //if (!CheckString(i_strPropertyKey, "i_strPropertyKey", strFunctionName)) return(hslFalse);
      //if (!CheckString(i_strLabwareID, "i_strLabwareID", strFunctionName)) return(hslFalse);

      //StatusTrace(CMD_START, TRACE_LEVEL_DEBUG, "i_strLabwareID = " + i_strLabwareID + ", i_strPropertyKey = " + i_strPropertyKey + ", i_strPropertyValue = " + i_strPropertyValue, strFunctionName);

      //EnterSemaphore();
      objDecklayout = Instrument.GetDeckLayoutObject();
      //LeaveSemaphore();

      if (!objDecklayout.IsNull())
      {
        object objLabware;

        onerror goto HandleLabwareError;
        objLabware = objDecklayout.Labware(i_strLabwareID);
        onerror goto 0;
        err.Clear();

        if (!objLabware.IsNull())
        {
          object   objEditLabware5;
          object   objPropertyParameters;

          objLabware.GetObject("IEditLabware5", objEditLabware5);

          // prepare a new Pars object for the labware properties
          objPropertyParameters.CreateObject("HXPARAMSLib.HxPars");
          objPropertyParameters.Add(str_PropertyValue, strPropertyKey);

          // check data from the decklayout
          objEditLabware5.SetLabwrProperties(objPropertyParameters);

          str_PropertyValue = objPropertyParameters.Item1(strPropertyKey);

          objPropertyParameters.ReleaseObject();
          objEditLabware5.ReleaseObject();
          objDecklayout.ReleaseObject();
          objLabware.ReleaseObject();

          //StatusTrace(CMD_COMPLETE, TRACE_LEVEL_DEBUG, "", strFunctionName);

          //return(hslTrue);
        }
        else
        {
          //StatusTrace(CMD_ERRCOMPLETE, TRACE_LEVEL_RELEASE, "Could not find labware.", strFunctionName);
          objDecklayout.ReleaseObject();
          //return(hslFalse);
        }
      }
      else
      {
        //StatusTrace(CMD_ERRCOMPLETE, TRACE_LEVEL_RELEASE, "Could not find decklayout.", strFunctionName);
        //return(hslFalse);
      }

      // runtime error handling
      HandleLabwareError :
      {
        variable errorID;
        errorID=err.GetId();
        err.Clear();

        if (errorID==-1574764487)
        {
          //StatusTrace(CMD_ERRCOMPLETE, TRACE_LEVEL_RELEASE, "LabwareID is  unknown.", strFunctionName);
          //return(hslFalse);
        }
        else
        {
          //StatusTrace(CMD_ERRCOMPLETE, TRACE_LEVEL_RELEASE, "Unknown error occured.", strFunctionName);
          //return(hslFalse);
        }
      }
    }
// {{{ 5 "ADJUST_SetPropertiesForLabwareID" "End"
}
// }} ""
// {{{ 5 "ADJUST_SetRelativePosition" "Begin"
function ADJUST_SetRelativePosition( device & Instrument, sequence i_seq_LabwarePositionsToAdjust, variable i_fltPositionX, variable i_fltPositionY, variable i_fltPositionZ, variable i_fltPositionR ) void {
// }} ""
private variable strFunctionName;
private variable str_LabID;
private variable str_PosID;
private variable bool_SequenceValid;
// {{ 5 "ADJUST_SetRelativePosition" "InitLocals"
// }} ""
// {{ 679 1 0 "8e117e2c_46a7_4fc7_a8fa861e877c29b7" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 680 1 0 "037129c2_62db_45b4_b01d6bca055842df" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 682 1 0 "59135090_7df4_4eb0_b792a75263b61663" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_LabwarePositionsToAdjust, str_LabID, str_PosID);
// }} ""
// {{ 683 1 0 "133fe4a9_367b_41b6_aeb5cc8285cbb444" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 684 1 0 "ce502b72_38a9_430c_ad97516be3963bb8" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 685 1 0 "133fe4a9_367b_41b6_aeb5cc8285cbb444" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 686 1 0 "8e117e2c_46a7_4fc7_a8fa861e877c29b7" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 687 1 0 "0f6323af_7803_42e7_a92efc300dcb1a98" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
ADJUST_SetRelativePositionForLabwareID(Instrument, str_LabID, i_fltPositionX, i_fltPositionY, i_fltPositionZ, i_fltPositionR);
// }} ""
// {{{ 5 "ADJUST_SetRelativePosition" "End"
}
// }} ""
// {{{ 5 "ADJUST_SetRelativePositionForLabwareID" "Begin"
function ADJUST_SetRelativePositionForLabwareID( device & Instrument, variable & i_strLabwareID, variable i_fltPositionX, variable i_fltPositionY, variable i_fltPositionZ, variable i_fltPositionR ) void {
// }} ""
// {{ 5 "ADJUST_SetRelativePositionForLabwareID" "InitLocals"
// }} ""
{
    // HxPars keys
    static string P_XCOORD("Labwr_XCoord");
    static string P_YCOORD("Labwr_YCoord");
    static string P_ZCOORD("Labwr_ZCoord");
    static string P_RZCOORD("Labwr_Rotation");
    static string P_LABWARE_ID("Labwr_Id");

    // Helper functions
    //private function ConvertToFloat(variable iVariable, variable& oVariable) variable;
    //private function CheckBool(variable iVariable, variable iTraceEntry, variable iFunctionName) variable;
    //private function CheckInteger(variable iVariable, variable iTraceEntry, variable iFunctionName) variable;
    //private function CheckIntegerRange(variable iVariable, variable iTraceEntry, variable iMin, variable iMax, variable iFunctionName) variable;
    //private function CheckString(variable iVariable, variable iTraceEntry, variable iFunctionName) variable;
    //private function CheckFloat(variable iVariable, variable iTraceEntry, variable iFunctionName) variable;
    //private function StatusTrace(variable i_intState, variable i_intTraceLevel, variable i_strTraceString, variable i_strFunctionName) void;
    //private function EnterSemaphore();
    //private function LeaveSemaphore();
    //private function ExtractFunctionName(variable i_strFunctionName) variable;
    //private function ReverseFind(string i_strString, string i_strSubString) variable;

    ////////////////////////////////////////////////////////////////////////////
    // RelativePositionValuesSetForLabwareID
    ////////////////////////////////////////////////////////////////////////////
    //function RelativePositionValuesSetForLabwareID(device& io_devDevice,
                                                  // variable i_strLabwareID,
                                                  // variable i_fltPositionX,
                                                  // variable i_fltPositionY,
                                                  // variable i_fltPositionZ,
                                                  // variable i_fltPositionR) variable
    {
      variable PosVals[];
      variable myValue;
      object   objDecklayout;
      variable strFunctionName("");

     // strFunctionName = ExtractFunctionName(GetFunctionName());

      // check input variables
     // if(!CheckString(i_strLabwareID, "i_strLabwareID", strFunctionName)) return(hslFalse);

      //StatusTrace(CMD_START, TRACE_LEVEL_DEBUG, "i_strLabwareID = " + i_strLabwareID, strFunctionName);

      //EnterSemaphore();
      objDecklayout = Instrument.GetDeckLayoutObject();
      //LeaveSemaphore();
   
      if(!objDecklayout.IsNull())
      {
        object objLabware;
        variable strPos("");

        onerror goto HandleLabwareError;
        objLabware = objDecklayout.Labware(i_strLabwareID);
        onerror goto 0;
        err.Clear();

        if(!objLabware.IsNull())
        {
          object Decklayout5;
          object MoveParameters;
          variable fltPos, fltPosShift;

          objDecklayout.GetObject("IDeckLayout5", Decklayout5);

          MoveParameters.CreateObject("HXPARAMSLib.HxPars");
          MoveParameters.Add(i_strLabwareID, P_LABWARE_ID);

          //EnterSemaphore();
          Instrument.GetLabwarePosition(i_strLabwareID, PosVals);
          //LeaveSemaphore();

          //StatusTrace(CMD_PROGRESS, TRACE_LEVEL_DEBUG, "Current position: (" + FStr(PosVals[0]) + "/" + FStr(PosVals[1]) + "/" + FStr(PosVals[2]) + "/" + FStr(PosVals[3]) + ")", strFunctionName);

          _ConvertToFloat(PosVals[0],fltPos);
          _ConvertToFloat(i_fltPositionX,fltPosShift);
          MoveParameters.Add(fltPos+fltPosShift, P_XCOORD);

          _ConvertToFloat(PosVals[1],fltPos);
          _ConvertToFloat(i_fltPositionY,fltPosShift);
          MoveParameters.Add(fltPos+fltPosShift, P_YCOORD);

          _ConvertToFloat(PosVals[2],fltPos);
          _ConvertToFloat(i_fltPositionZ,fltPosShift);
          MoveParameters.Add(fltPos+fltPosShift, P_ZCOORD);

          _ConvertToFloat(PosVals[3],fltPos);
          _ConvertToFloat(i_fltPositionR,fltPosShift);
          MoveParameters.Add(fltPos+fltPosShift, P_RZCOORD);

          Decklayout5.MoveLabware(objLabware, MoveParameters);

          //EnterSemaphore();
          Instrument.GetLabwarePosition(i_strLabwareID, PosVals);
          //LeaveSemaphore();

          objLabware.ReleaseObject();
          objDecklayout.ReleaseObject();
          Decklayout5.ReleaseObject();
          MoveParameters.ReleaseObject();
          //StatusTrace(CMD_COMPLETE, TRACE_LEVEL_DEBUG, "New position:     (" + FStr(PosVals[0]) + "/" + FStr(PosVals[1]) + "/" + FStr(PosVals[2]) + "/" + FStr(PosVals[3]) + ")", strFunctionName);
          //return(hslTrue);
        }
        else
        {
          //StatusTrace(CMD_ERRCOMPLETE, TRACE_LEVEL_RELEASE, "Could not find labware.", strFunctionName);

          objDecklayout.ReleaseObject();
          //return(hslFalse);
        }
      }
      else
      {
        //StatusTrace(CMD_ERRCOMPLETE, TRACE_LEVEL_RELEASE, "Could not find decklayout.", strFunctionName);
        //return(hslFalse);
      }
      // runtime error handling
      HandleLabwareError :
      {
        variable errorID;
        errorID=err.GetId();
        err.Clear();

        if (errorID==-1574764487)
        {
          Trace("LabwareID is  unknown.");
          //return(hslFalse);
        }
        else
        {
          //Trace("Unknown error occured.");
          //return(hslFalse);
        }
      }
    }
    //////////////////////////////////////////////////////////////////////////
    // private function ConvertToFloat
    //////////////////////////////////////////////////////////////////////////
}
// {{{ 5 "ADJUST_SetRelativePositionForLabwareID" "End"
}
// }} ""
// {{{ 5 "ADJUST_TiltLabware" "Begin"
function ADJUST_TiltLabware( device & Instrument, sequence i_seq_LabwarePositionsToOffset, variable i_bool_ShiftToDeepestPoint, variable i_flt_TiltAngle, variable i_flt_XOffset, variable i_flt_ZOffset ) void {
// }} ""
private variable flt_TiltAngleInRadian;
private variable flt_X_Coord;
private variable int_CutNum;
private variable flt_X_Origin;
private variable str_ContainerFilePath;
private variable flt_NotUsed;
private variable flt_Z_Coord;
private variable flt_Y_Coord;
private variable int_Length;
private variable int_RowCount;
private variable flt_ConversionFactor;
private variable str_ConfigFilePath;
private variable i;
private variable flt_Sin;
private variable flt_Cos;
private variable flt_NewXOffset;
private variable strFunctionName;
private variable flt_ContainerWidth;
private variable flt_NewZOffset;
private variable bool_IncrementContainerDirection;
private variable strFunctionName_Cut;
private variable flt_ContainerBaseOffset;
private variable str_LabID;
private variable flt_Y_Origin;
private variable flt_LabwareLength;
private variable flt_CurrentXOffset;
private variable flt_CurrentZOffset;
private variable flt_Z_Radius;
private variable int_ColumnCount;
private variable flt_X_Shift;
private variable bool_AlphaNumeric;
private variable int_Count;
private variable flt_Z_Origin;
private variable bool_SequenceValid;
private variable flt_NewZCoord;
private variable str_PosID;
private variable flt_X_Radius;
private variable flt_NewXCoord;
private variable flt_LabwareWidth;
private variable int_TotalPositions;
private variable int_Index;
private sequence seq_Temp;
private variable arr_UsedPosition[];
private variable arr_XOffsetUsed[];
private variable arr_ZOffsetUsed[];
private variable int_UsedIndex;
// {{ 5 "ADJUST_TiltLabware" "InitLocals"
// }} ""
// {{ 759 1 0 "a8579087_5321_474c_bbbff10b3daceaca" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 760 1 0 "8c646812_f791_4252_ab5404b4aec2719a" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 762 1 0 "89dc920e_5b33_459a_a16a8e4d8ae7f674" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Count = StrReverseFind(strFunctionName, Translate(":"));
// }} ""
// {{ 763 1 0 "1b464460_31d5_4fbe_aacd345a9bb6d9e8" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_Count = int_Count + 1;
// }} ""
// {{{ 764 1 0 "44c7a993_7075_404a_98b7339d99f2dda5" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Length = StrGetLength(strFunctionName);
// }} ""
// {{ 765 1 0 "faa6dcd3_639e_46e0_bd44347d6a6bba06" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_CutNum = int_Length - int_Count;
// }} ""
// {{{ 766 1 0 "84634f92_3662_41a6_83760f547fe74fef" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
strFunctionName_Cut = StrMid(strFunctionName, int_Count, int_CutNum);
// }} ""
Trace("===========================================================================");
Trace(strFunctionName_Cut," - START");
Trace("");
// {{ 768 1 0 "a8579087_5321_474c_bbbff10b3daceaca" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 769 1 0 "3d930f15_e692_4f31_a9506e3e18618b6b" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 770 1 0 "bb13932f_6e22_48b7_98f9621d60b933e8" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 772 1 0 "a4740c0b_7050_4719_b51f204807a4c80e" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_LabwarePositionsToOffset, str_LabID, str_PosID);
// }} ""
// {{ 773 1 0 "8ec7866a_c616_46f9_a591c3e136a8228e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 774 1 0 "db24974d_3a63_468a_a4ef32b52ba29ac2" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 775 1 0 "8ec7866a_c616_46f9_a591c3e136a8228e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 776 1 0 "3d930f15_e692_4f31_a9506e3e18618b6b" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 777 1 0 "6b8051c8_d723_4a7d_9dc40b62ff6715b0" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_RemoveTruncatedSequencePositions(Instrument, i_seq_LabwarePositionsToOffset);
// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
// {{{ 778 1 0 "a28e94c0_7597_4095_a9e85bf888ed56a3" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_TotalPositions = SeqGetTotal(i_seq_LabwarePositionsToOffset);
// }} ""
/* {{ 1 "" "1" */ } /* }} "" */
// {{{ 779 1 0 "1e89a34e_4d7a_4098_b8409eff58140e88" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_TotalPositions = SeqGetPositionCountForCurrLabware(i_seq_LabwarePositionsToOffset);
// }} ""
// {{ 780 1 0 "bda376ad_9fba_40fc_9bed93f1b5f889bb" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (LPQ::LABWARE_TILT::BOOL_LIBRARY_INITIALIZED == 0)
{
// }} ""
// {{{ 781 1 0 "3471b3c8_8874_44fa_a1a3d21ec13eba90" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
LPQ::InitializeVariables();
// }} ""
// {{ 782 1 0 "ec9ccf5d_4e81_4d3d_b800e46241cd42a4" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
LPQ::LABWARE_TILT::ARR_BASE_OFFSET.SetSize(0);
// }} ""
// {{ 783 1 0 "48fb3eda_5320_4675_940f2054a85afee0" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
LPQ::LABWARE_TILT::ARR_LABWARE_CONFIG_FILE.SetSize(0);
// }} ""
// {{ 784 1 0 "c9ca3e2b_44b6_48cd_aa8e0d35b28f9873" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
LPQ::LABWARE_TILT::BOOL_LIBRARY_INITIALIZED = 1;
// }} ""
// {{ 785 1 0 "bda376ad_9fba_40fc_9bed93f1b5f889bb" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 786 1 0 "a58e3659_616e_4916_8ce243e3f1801ec9" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 787 1 0 "e60769e3_f747_4d3e_9aa6ce73330ad6db" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_ConversionFactor = 1.74532925199433E-02;
// }} ""
// {{ 788 1 0 "109badcc_e7e6_447a_a030724cdce8af88" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_TiltAngleInRadian = i_flt_TiltAngle * flt_ConversionFactor;
// }} ""
// {{{ 789 1 0 "852f1493_62e0_436d_ae68447e568a50b1" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_Cos = MthCos(flt_TiltAngleInRadian);
// }} ""
// {{{ 790 1 0 "d5fa64b4_502c_48b9_8c0ce62b42a07b91" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_Sin = MthSin(flt_TiltAngleInRadian);
// }} ""
// {{{ 791 1 0 "9f5832dd_daaa_45cb_8434b049b87a4fc4" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetRowColumnNumber(Instrument, i_seq_LabwarePositionsToOffset, int_RowCount, int_ColumnCount, bool_AlphaNumeric, bool_IncrementContainerDirection);
// }} ""
// {{{ 792 1 0 "d8ba3ef4_a39b_4609_be861ad1b3c925de" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetLabwareOrigin(Instrument, i_seq_LabwarePositionsToOffset, flt_X_Origin, flt_Y_Origin, flt_Z_Origin);
// }} ""
// {{{ 793 1 0 "ef365259_16ac_4eb2_9a60868a361472ed" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetLabwareLW(Instrument, i_seq_LabwarePositionsToOffset, flt_LabwareLength, flt_LabwareWidth);
// }} ""
// {{ 794 1 0 "395120d9_c739_4992_b68e905bdf426114" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (i_bool_ShiftToDeepestPoint == 1)
{
// }} ""
// {{{ 795 1 0 "cb4a59c7_d234_4154_8fc1a7f81fff344a" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
CONT_GetContainerWidth(Instrument, i_seq_LabwarePositionsToOffset, flt_ContainerWidth);
// }} ""
// {{ 796 1 0 "4aad83d4_a0b2_4dea_864b68940f96a41c" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_X_Shift = flt_ContainerWidth / (2 * 1.0);
// }} ""
Trace("X Shift:  ",flt_X_Shift,"  Container Width:  ",flt_ContainerWidth);
// {{ 798 1 0 "395120d9_c739_4992_b68e905bdf426114" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 799 1 0 "0fae86ed_f8d3_411b_a2a77abfd005abd1" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_X_Shift = 0.0;
// }} ""
// {{ 800 1 0 "395120d9_c739_4992_b68e905bdf426114" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 801 1 0 "a58e3659_616e_4916_8ce243e3f1801ec9" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 802 1 0 "aee93798_d587_4796_a4eb300c27b6ea17" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 803 1 0 "2e5f46ea_58e1_4e27_b5b460a9152ec250" "{B31F353A-5D80-11d4-A5EB-0050DA737D89}"
i_seq_LabwarePositionsToOffset.SetCurrentPosition(1);
// }} ""
// {{{ 804 1 0 "af38e33c_c055_4de7_b9045a0990e341a7" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_LabID = SeqGetLabwareId(i_seq_LabwarePositionsToOffset);
// }} ""
// {{{ 805 1 0 "61184e22_73b6_4bc6_8826720e3b370d7b" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_PosID = SeqGetPositionId(i_seq_LabwarePositionsToOffset);
// }} ""
// {{{ 806 1 0 "6ddf4634_15bc_4380_b8a52fbb462596bf" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
SEQ_GetDefaultSequence(Instrument, str_LabID, 1, seq_Temp);
// }} ""
// {{{ 807 1 0 "566950c6_b2ad_4309_b96df4bc1de2c0b0" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetContainerBaseOffset(Instrument, seq_Temp, flt_ContainerBaseOffset);
// }} ""
// {{{ 808 1 0 "5ccc2c97_cb88_41d5_a129b8bbe2a3b4ec" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetConfigFile(Instrument, seq_Temp, str_ConfigFilePath);
// }} ""
// {{{ 809 1 0 "d573fa0f_5c20_4023_ac6bda1ceadbe6e6" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
int_Index = _Lookup(LPQ::LABWARE_TILT::ARR_LABWARE_CONFIG_FILE, str_ConfigFilePath);
// }} ""
// {{ 810 1 0 "74597dbd_3655_489c_a20cc9febc3f6d48" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_Index == 0)
{
// }} ""
// {{ 811 1 0 "fb7cc41d_36a9_4282_b1468188691c3a45" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 812 1 0 "014a9c62_8271_4652_bfdc30cbb32af730" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
LPQ::LABWARE_TILT::ARR_BASE_OFFSET.AddAsLast(flt_ContainerBaseOffset);
// }} ""
// {{ 813 1 0 "c3903280_395e_4a13_963e4bf41dfb46ad" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
LPQ::LABWARE_TILT::ARR_LABWARE_CONFIG_FILE.AddAsLast(str_ConfigFilePath);
// }} ""
// {{ 814 1 0 "74597dbd_3655_489c_a20cc9febc3f6d48" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 815 1 0 "ed79589a_a97a_4858_b99431baf2dc3fa2" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
flt_ContainerBaseOffset=LPQ::LABWARE_TILT::ARR_BASE_OFFSET.GetAt(int_Index-1);
// }} ""
// {{ 816 1 0 "74597dbd_3655_489c_a20cc9febc3f6d48" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 817 1 0 "64e4088d_0f89_4dc1_8583d25ea11123ab" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
CONT_GetConfigFile(Instrument, i_seq_LabwarePositionsToOffset, str_ContainerFilePath);
// }} ""
// {{ 818 1 0 "bc9e4d8c_bfc9_40f4_bc1e8e74fd1c21cd" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(i = 0; i < int_TotalPositions;)
{
i = i + 1;
// }} ""
// {{ 819 1 0 "a59bc78e_d148_4d63_82fcfb286b7a1d09" "{B31F353A-5D80-11d4-A5EB-0050DA737D89}"
i_seq_LabwarePositionsToOffset.SetCurrentPosition(i);
// }} ""
// {{{ 820 1 0 "8224cc4f_394e_4aed_99896878953e7164" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_LabID = SeqGetLabwareId(i_seq_LabwarePositionsToOffset);
// }} ""
// {{{ 821 1 0 "037a0829_676e_4262_a45d9cf755ff015b" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_PosID = SeqGetPositionId(i_seq_LabwarePositionsToOffset);
// }} ""
// {{{ 822 1 0 "bdd258a3_5bcd_4aa6_95f4c301a9594a95" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DevAddContainerToRack(Instrument, str_LabID, str_PosID, str_ContainerFilePath, 0.0, 0.0, flt_ContainerBaseOffset);
// }} ""
// {{ 823 1 0 "bc9e4d8c_bfc9_40f4_bc1e8e74fd1c21cd" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 824 1 0 "697796b3_d26c_4cd0_957b536a73e83a17" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_UsedPosition.SetSize(0);
// }} ""
// {{ 825 1 0 "062c362c_3f7d_4e0c_98907faecfd3880c" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_XOffsetUsed.SetSize(0);
// }} ""
// {{ 826 1 0 "89753418_8ed6_4f29_bd49c8ca21bb07f2" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_ZOffsetUsed.SetSize(0);
// }} ""
// {{ 827 1 0 "4e9a99e4_ec30_4433_a02180a0778ebcf8" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(i = 0; i < int_TotalPositions;)
{
i = i + 1;
// }} ""
// {{ 828 1 0 "d81e9250_a777_4796_848c239208c117d9" "{B31F353A-5D80-11d4-A5EB-0050DA737D89}"
i_seq_LabwarePositionsToOffset.SetCurrentPosition(i);
// }} ""
// {{{ 829 1 0 "cec5581f_957e_42fe_9dcccf5bfe42c2cb" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_LabID = SeqGetLabwareId(i_seq_LabwarePositionsToOffset);
// }} ""
// {{{ 830 1 0 "a36ccb82_c68e_4030_9875b3e4c5c2b988" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_PosID = SeqGetPositionId(i_seq_LabwarePositionsToOffset);
// }} ""
// {{{ 831 1 0 "1f2cc4b0_74ad_45c8_9120860c095d0a16" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DevGetLabwarePositionEx(Instrument, str_LabID, str_PosID, flt_X_Coord, flt_Y_Coord, flt_Z_Coord, flt_NotUsed);
// }} ""
// {{ 832 1 0 "059424e9_66f3_4c6c_a3cf1141a8de0f70" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_CurrentXOffset = 0.0;
// }} ""
// {{ 833 1 0 "ac56e199_dc8c_4e1a_ab1b19d35f0a84c4" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_CurrentZOffset = 0.0;
// }} ""
// {{ 834 1 0 "e4025160_4a3a_46ef_96969d30b1a4146e" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_NewXOffset = 0.0;
// }} ""
// {{ 835 1 0 "aafe769e_b6af_4f16_8ce67bff61370912" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_NewZOffset = 0.0;
// }} ""
// {{ 836 1 0 "17d09a35_f409_4fe6_86001694a1bf58ad" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_NewXCoord = 0.0;
// }} ""
// {{ 837 1 0 "136532e9_a2dc_4e89_bd2e14a729f5d51d" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_NewZCoord = 0.0;
// }} ""
// {{ 838 1 0 "c8653b31_8728_40e2_862b882c981fcc69" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_X_Radius = 0.0;
// }} ""
// {{ 839 1 0 "a63d1123_23fd_450a_8ecdd525e2110844" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_Z_Radius = 0.0;
// }} ""
// {{ 840 1 0 "f7e150a9_83a9_45c0_9ec73643ad30e45b" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 841 1 0 "2e4c967c_fdf0_491c_aaf60942febe1a85" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (i_flt_TiltAngle > 0)
{
// }} ""
flt_X_Radius = flt_X_Coord - flt_X_Origin + i_flt_XOffset - flt_X_Shift;
flt_Z_Radius = flt_ContainerBaseOffset + i_flt_ZOffset;

//Trace("X Radius:  ",flt_X_Radius);
//Trace("X Shift:  ",flt_X_Shift);

flt_NewXCoord = flt_X_Origin + (flt_X_Radius) * flt_Cos;
flt_NewZCoord = flt_Z_Origin + flt_X_Radius * flt_Sin;

//Trace("X Coord:  ",flt_X_Coord," New X:  ",flt_NewXCoord);
//Trace("Z Coord:  ",flt_Z_Coord," New Z:  ",flt_NewZCoord);

flt_NewXOffset = flt_NewXCoord - flt_X_Coord + i_flt_XOffset;
flt_NewZOffset = flt_NewZCoord - flt_Z_Coord + flt_ContainerBaseOffset + i_flt_ZOffset + (flt_Z_Coord - flt_Z_Origin);
// {{ 843 1 0 "2e4c967c_fdf0_491c_aaf60942febe1a85" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 844 1 0 "a87da929_33e7_4e1f_b1bf2134b6c2fcaf" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_NewXOffset = 0.0;
// }} ""
// {{ 845 1 0 "e49ef6da_d90e_494a_963fe157bc134b3d" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_NewZOffset = flt_ContainerBaseOffset + i_flt_ZOffset;
// }} ""
// {{ 846 1 0 "2e4c967c_fdf0_491c_aaf60942febe1a85" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 847 1 0 "8b4f44ff_8520_47d3_8138e6471a24609a" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
CONT_GetConfigFile(Instrument, i_seq_LabwarePositionsToOffset, str_ContainerFilePath);
// }} ""
// {{{ 848 1 0 "f8ff7885_4c19_40fb_94b31aed9127dc98" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
int_UsedIndex = _Lookup(arr_UsedPosition, str_PosID);
// }} ""
// {{{ 849 1 0 "a159c173_2b25_489c_add436dccc9bdc4f" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_NewXOffset = MthRound(flt_NewXOffset, 1);
// }} ""
// {{{ 850 1 0 "8c66caad_fa39_44b7_a1899df53afb8191" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_NewZOffset = MthRound(flt_NewZOffset, 1);
// }} ""
// {{ 851 1 0 "1c87d93a_69f9_410c_9a4959882ad312d9" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_UsedIndex == 0)
{
// }} ""
// {{ 852 1 0 "c07a6343_b745_4bf0_84957d85edb5a668" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_UsedPosition.AddAsLast(str_PosID);
// }} ""
// {{ 853 1 0 "54304699_db1e_498d_b919c9b2a2f88ff9" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_XOffsetUsed.AddAsLast(flt_NewXOffset);
// }} ""
// {{ 854 1 0 "84985d6f_8861_487b_ad986b6ec92d12ea" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_ZOffsetUsed.AddAsLast(flt_NewZOffset);
// }} ""
// {{ 855 1 0 "1c87d93a_69f9_410c_9a4959882ad312d9" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 856 1 0 "9297c8c3_cc14_40ad_8dac7fc17a0256e8" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
flt_NewXOffset=arr_XOffsetUsed.GetAt(int_UsedIndex-1);
// }} ""
// {{ 857 1 0 "b09797cc_d5bf_404c_b4c8a67c3b901353" "{67A8F1C9-6546-41e9-AD2F-3C54F7818853}"
flt_NewZOffset=arr_ZOffsetUsed.GetAt(int_UsedIndex-1);
// }} ""
// {{ 858 1 0 "1c87d93a_69f9_410c_9a4959882ad312d9" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
Trace("Lab ID:  ",str_LabID," Pos ID:  ",str_PosID," X Offset:  ",flt_NewXOffset,"  Z Offset:  ",flt_NewZOffset);
// {{{ 860 1 0 "452f65ef_edd7_4207_b9ca3fbab71e9ba0" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DevAddContainerToRack(Instrument, str_LabID, str_PosID, str_ContainerFilePath, flt_NewXOffset, 0.0, flt_NewZOffset);
// }} ""
// {{ 861 1 0 "4e9a99e4_ec30_4433_a02180a0778ebcf8" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 862 1 0 "cf50a12c_e23b_466a_8d1145a75a371d5f" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
Trace("");
Trace(strFunctionName_Cut," - FINISH");
Trace("===========================================================================");
// {{ 864 1 0 "cf50a12c_e23b_466a_8d1145a75a371d5f" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 5 "ADJUST_TiltLabware" "End"
}
// }} ""
// {{{ 5 "CONT_GetBaseMeasurement" "Begin"
function CONT_GetBaseMeasurement( device & Instrument, sequence & i_seq_Labware, variable & o_flt_ContainerBaseThickness, variable & o_flt_ContainerBaseOffset ) void {
// }} ""
private variable strFunctionName;
private variable str_LabID;
private variable bool_SequenceValid;
private variable str_PosID;
// {{ 5 "CONT_GetBaseMeasurement" "InitLocals"
o_flt_ContainerBaseThickness = 0;
o_flt_ContainerBaseOffset = 0;
// }} ""
// {{ 866 1 0 "c0bef732_e3c3_48d9_a2a94bcfafa7c2e1" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 867 1 0 "c6089ed8_31d2_47cc_8111e00eda129c95" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 869 1 0 "8e457ffc_1d3d_4ab4_862f289555e4bff8" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 870 1 0 "005051c7_e231_41be_bf46f23ca15660f6" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 871 1 0 "b3d7ffd9_b243_4b92_8af4490229dcc169" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 872 1 0 "005051c7_e231_41be_bf46f23ca15660f6" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 873 1 0 "c0bef732_e3c3_48d9_a2a94bcfafa7c2e1" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 874 1 0 "04f0ff9f_ac86_4a58_b2a8e48dbfded441" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_ContainerBaseThickness = 0.0;
// }} ""
// {{ 875 1 0 "16629d18_3c3b_43df_88368cb154cd0eff" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_ContainerBaseOffset = 0.0;
// }} ""
{
object rack;
object rack2;
object ctr;
object labware;
object m_decklayout;		
variable labwareId;

m_decklayout = Instrument.GetDeckLayoutObject();
//labwareId = SeqGetLabwareId(i_sequenceLabware);
labware = m_decklayout.Labware(str_LabID);
labware.GetObject2("{3E5213CF-57C9-4911-B33E-05E77130E4DB}", rack); //  IEditLabware6
labware.GetObject("IRectRack2", rack2); //  IEditLabware6


rack.CntrAtPosition(ctr,str_PosID);
o_flt_ContainerBaseThickness = ctr.ContainerBaseDepth;
o_flt_ContainerBaseOffset = rack2.ContainerBaseOffset(str_PosID);

rack.ReleaseObject(); 
rack2.ReleaseObject();
ctr.ReleaseObject(); 
labware.ReleaseObject(); 
m_decklayout.ReleaseObject(); 
}

// {{{ 877 1 0 "3ccc8dfd_a072_4204_9048ce218777ee51" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
o_flt_ContainerBaseThickness = MthRound(o_flt_ContainerBaseThickness, 1);
// }} ""
// {{{ 878 1 0 "1daae3a7_0790_4f0f_898209c74c66e652" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
o_flt_ContainerBaseOffset = MthRound(o_flt_ContainerBaseOffset, 1);
// }} ""
// {{{ 5 "CONT_GetBaseMeasurement" "End"
}
// }} ""
// {{{ 5 "CONT_GetConfigFile" "Begin"
function CONT_GetConfigFile( device & Instrument, sequence i_seq_Labware, variable & o_str_ContainerFileName ) void {
// }} ""
private variable strFunctionName;
private variable str_LabID;
private variable str_PosID;
private variable bool_SequenceValid;
// {{ 5 "CONT_GetConfigFile" "InitLocals"
o_str_ContainerFileName = 0;
// }} ""
// {{ 880 1 0 "4d5b84d8_1009_4ee7_96c4799b230d85ff" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 881 1 0 "b640a6f4_bf2d_42fd_8985ee6d09cdd8bf" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 883 1 0 "99c693f1_f2d1_4162_b57391c7c5039968" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 884 1 0 "e0353b6d_d887_404b_90ee0fb1b6afcb4d" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 885 1 0 "6a1638c3_1c0f_43b8_af97da04684478ef" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 886 1 0 "e0353b6d_d887_404b_90ee0fb1b6afcb4d" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 887 1 0 "4d5b84d8_1009_4ee7_96c4799b230d85ff" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 888 1 0 "30c5d5f1_8be8_4442_a811322d240e1494" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_str_ContainerFileName = Translate("");
// }} ""
{
object rack;
object ctr;
object labware;
object m_decklayout;		
variable labwareId;

m_decklayout = Instrument.GetDeckLayoutObject();
labware = m_decklayout.Labware(str_LabID);
labware.GetObject2("{3E5213CF-57C9-4911-B33E-05E77130E4DB}", rack); //  IEditLabware6

rack.CntrAtPosition(ctr,str_PosID);
o_str_ContainerFileName = ctr.FileName;

rack.ReleaseObject(); 
ctr.ReleaseObject(); 
labware.ReleaseObject(); 
m_decklayout.ReleaseObject(); 
}

// {{{ 5 "CONT_GetConfigFile" "End"
}
// }} ""
// {{{ 5 "CONT_GetContainerBaseThickness" "Begin"
function CONT_GetContainerBaseThickness( device & Instrument, sequence i_seq_Labware, variable & o_containerBaseThickness ) void {
// }} ""
private variable strFunctionName;
private variable str_LabID;
private variable bool_SequenceValid;
private variable str_PosID;
// {{ 5 "CONT_GetContainerBaseThickness" "InitLocals"
o_containerBaseThickness = 0;
// }} ""
// {{ 891 1 0 "a0994aea_4d57_4177_851b7e330ed56b1c" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 892 1 0 "0491c203_25d6_4061_bf4df5bb509184d5" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 894 1 0 "1174a49e_af6e_4aab_ba9f0496c2a20684" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 895 1 0 "c6c6644e_8b83_4b5e_b6a26b71714782d7" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 896 1 0 "feac1bae_1273_469b_a7279a3ba11b9213" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 897 1 0 "c6c6644e_8b83_4b5e_b6a26b71714782d7" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 898 1 0 "a0994aea_4d57_4177_851b7e330ed56b1c" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 899 1 0 "504acde1_392e_4b4f_97509fae461f78f5" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_containerBaseThickness = 0;
// }} ""
{
object rack;
object ctr;
object labware;
object m_decklayout;		
variable labwareId;

m_decklayout = Instrument.GetDeckLayoutObject();
//labwareId = SeqGetLabwareId(i_sequenceLabware);
labware = m_decklayout.Labware(str_LabID);
labware.GetObject2("{3E5213CF-57C9-4911-B33E-05E77130E4DB}", rack); //  IEditLabware6

rack.CntrAtPosition(ctr,str_PosID);
o_containerBaseThickness = ctr.ContainerBaseDepth;

rack.ReleaseObject(); 
ctr.ReleaseObject(); 
labware.ReleaseObject(); 
m_decklayout.ReleaseObject(); 
}

// {{{ 901 1 0 "a4be7d8b_2a73_4f35_84e17bc4fb14c563" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
o_containerBaseThickness = MthRound(o_containerBaseThickness, 1);
// }} ""
// {{{ 5 "CONT_GetContainerBaseThickness" "End"
}
// }} ""
// {{{ 5 "CONT_GetContainerDepth" "Begin"
function CONT_GetContainerDepth( device & Instrument, sequence i_seq_Labware, variable i_bool_UseDeckCoordinates, variable & o_ContainerDepth, variable & o_ContainerClearanceHeight ) void {
// }} ""
private variable flt_Z_Bottom;
private variable flt_NotUsed;
private variable strFunctionName;
private variable str_LabID;
private variable bool_SequenceValid;
private variable str_PosID;
// {{ 5 "CONT_GetContainerDepth" "InitLocals"
o_ContainerDepth = 0;
o_ContainerClearanceHeight = 0;
// }} ""
// {{ 903 1 0 "aab6cb73_3629_4cd3_8728d8fd02cd25bf" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 904 1 0 "fdc55e27_35a7_4630_b89c3dd0c627151f" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 906 1 0 "5ddd606c_307b_431d_82e8a8e21664123f" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 907 1 0 "326a9909_595f_4e6f_9e58919ab6a79de5" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 908 1 0 "3b5618c9_bc6f_4afc_b96137d95e241eeb" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 909 1 0 "326a9909_595f_4e6f_9e58919ab6a79de5" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 910 1 0 "aab6cb73_3629_4cd3_8728d8fd02cd25bf" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 911 1 0 "d2407df2_a26b_47d7_97f01e76dc13260d" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_ContainerDepth = 0;
// }} ""
// {{ 912 1 0 "5e9b3a86_4725_4172_a4f295d86a87db4d" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_ContainerClearanceHeight = 0.0;
// }} ""
// {{{ 913 1 0 "dcf2c19a_457a_41fc_90caf863c1855d5a" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DevGetLabwarePositionEx(Instrument, str_LabID, str_PosID, flt_NotUsed, flt_NotUsed, flt_Z_Bottom, flt_NotUsed);
// }} ""
{
object rack;
object ctr;
object labware;
object m_decklayout;		
variable labwareId;

m_decklayout = Instrument.GetDeckLayoutObject();
//labwareId = SeqGetLabwareId(i_sequenceLabware);
labware = m_decklayout.Labware(str_LabID);
labware.GetObject2("{3E5213CF-57C9-4911-B33E-05E77130E4DB}", rack); //  IEditLabware6

rack.CntrAtPosition(ctr,str_PosID);
o_ContainerDepth = ctr.Depth;
o_ContainerClearanceHeight = ctr.Clearance;

rack.ReleaseObject(); 
ctr.ReleaseObject(); 
labware.ReleaseObject(); 
m_decklayout.ReleaseObject(); 
}

// {{{ 915 1 0 "aae73eae_d33c_42c8_a99ed56430e23562" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
o_ContainerClearanceHeight = MthRound(o_ContainerClearanceHeight, 1);
// }} ""
// {{{ 916 1 0 "198fa18c_a592_427a_a1654ef56e08348b" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
o_ContainerDepth = MthRound(o_ContainerDepth, 1);
// }} ""
// {{ 917 1 0 "e3fc0a2f_83dd_4c8f_bee2891d11ed7162" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (i_bool_UseDeckCoordinates == 1)
{
// }} ""
// {{ 918 1 0 "0d0fc613_92b3_4280_b7b53df8176d00e9" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
o_ContainerClearanceHeight = o_ContainerClearanceHeight + flt_Z_Bottom;
// }} ""
// {{ 919 1 0 "11ac18dd_a61f_4af0_9d46ade97177b01b" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
o_ContainerDepth = o_ContainerDepth + flt_Z_Bottom;
// }} ""
// {{ 920 1 0 "e3fc0a2f_83dd_4c8f_bee2891d11ed7162" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 5 "CONT_GetContainerDepth" "End"
}
// }} ""
// {{{ 5 "CONT_GetContainerWidth" "Begin"
function CONT_GetContainerWidth( device & Instrument, sequence i_seq_Labware, variable & o_flt_ContainerWidth ) void {
// }} ""
private variable strFunctionName;
private variable str_LabID;
private variable flt_ContainerDiameter;
private variable str_PosID;
private variable bool_SequenceValid;
// {{ 5 "CONT_GetContainerWidth" "InitLocals"
o_flt_ContainerWidth = 0;
// }} ""
// {{ 922 1 0 "5dfee177_d5d0_4fd2_960ade0093fa165f" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 923 1 0 "1ba8d44f_3113_4cc0_bb69c8d63cb6eade" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 925 1 0 "9e286b05_2671_4a70_b39a694c69fd204f" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 926 1 0 "9ab2e23b_58d2_438a_bb4aa8cef316fac8" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 927 1 0 "c22b3970_3452_4e3b_ba502625ac4840f4" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 928 1 0 "9ab2e23b_58d2_438a_bb4aa8cef316fac8" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 929 1 0 "5dfee177_d5d0_4fd2_960ade0093fa165f" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 930 1 0 "b79d82a1_d7d6_40d0_b9240194cc6efc87" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_ContainerDiameter = 0.0;
// }} ""
{
object objRackDataParams;
object objDecklayout;
object objLabware;
object objTemplate;
object objRack;
object objRack4;
object objEditLabware5;

objRackDataParams.CreateObject("HXPARAMSLib.HxPars");
objDecklayout = Instrument.GetDeckLayoutObject();
objLabware = objDecklayout.Labware(str_LabID);

objLabware.GetObject("ITemplateDeckData", objTemplate);
objLabware.GetObject("IRectRack4", objRack4);
objLabware.GetObject("IRectRack", objRack);
objLabware.GetObject("IEditLabware5", objEditLabware5);

objRack4.GetRackData(objRackDataParams);

flt_ContainerDiameter = objEditLabware5.CntrDiameter(str_PosID);

objRackDataParams.ReleaseObject();
objDecklayout.ReleaseObject();
objLabware.ReleaseObject();
objTemplate.ReleaseObject();
objRack.ReleaseObject();
objRack4.ReleaseObject();
objEditLabware5.ReleaseObject();
}
// {{ 932 1 0 "94095135_3a8f_42b4_be89897ce814b77b" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_ContainerWidth = flt_ContainerDiameter;
// }} ""
// {{{ 5 "CONT_GetContainerWidth" "End"
}
// }} ""
// {{{ 5 "FILE_GetDefinitionFileValue" "Begin"
function FILE_GetDefinitionFileValue( variable & i_str_ConfigFilePath, variable i_str_ValueToSearch, variable & o_str_Value ) variable {
// }} ""
private variable str_DataDefinition;
private variable strFunctionName;
private variable bool_FileExists;
private variable str_Instance;
private variable bool_ReturnValue;
private variable str_Extension;
// {{ 5 "FILE_GetDefinitionFileValue" "InitLocals"
o_str_Value = 0;
// }} ""
// {{ 934 1 0 "9e82e857_1690_439f_b573875ddb7df4d4" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_str_Value = Translate("");
// }} ""
// {{ 935 1 0 "fb78f7b6_bd6e_4761_b197bfa8d896a985" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_ReturnValue = 0;
// }} ""
// {{ 936 1 0 "b4447c56_f0d8_4b4b_97b49e64c4e698a8" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 937 1 0 "8c157dc3_226f_4200_a2f206d34d821d01" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 939 1 0 "99f15f86_c9cb_4765_a207921bc882a97f" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
bool_FileExists = HSLExtensions::File::Exists(i_str_ConfigFilePath);
// }} ""
// {{ 940 1 0 "465021b0_7e93_4e6f_8a7bedbfe13d0dff" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_FileExists == 0)
{
// }} ""
Trace(i_str_ConfigFilePath," - File doesn't exist!");
// {{{ 942 1 0 "8e6a8f05_84f3_4070_963216805657b2a3" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return (bool_ReturnValue);
// }} ""
// {{ 943 1 0 "465021b0_7e93_4e6f_8a7bedbfe13d0dff" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 944 1 0 "a7140242_7836_4080_9702f3de258e2c4f" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
i_str_ValueToSearch = StrConcat2(i_str_ValueToSearch, Translate(""));
// }} ""
// {{ 945 1 0 "b4447c56_f0d8_4b4b_97b49e64c4e698a8" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 946 1 0 "d390ca00_e445_4204_92566ba9aa4c761e" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_Extension = HSLExtensions::File::GetFileExtension(i_str_ConfigFilePath);
// }} ""
// {{ 947 1 0 "3fabca3b_d108_4b05_87fcb4a6b90c8324" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_DataDefinition = Translate("");
// }} ""
// {{ 948 1 0 "8fadc8e7_822f_4d71_9184bd3af7314ce1" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_Instance = Translate("");
// }} ""
// {{ 949 1 0 "9baaac3d_bcb8_4704_af2f6768ceee1e2e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_Extension == "rck")
{
// }} ""
// {{ 950 1 0 "fd0de778_19a4_40ff_b36c1e0180c2895d" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_DataDefinition = Translate("RECTRACK");
// }} ""
// {{ 951 1 0 "7a2b0430_0aca_4e66_9b337afec93d104a" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_Instance = Translate("default");
// }} ""
// {{ 952 1 0 "9baaac3d_bcb8_4704_af2f6768ceee1e2e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 953 1 0 "62c6e661_18cf_43ff_9cbac019ebf7499e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_Extension == "ctr")
{
// }} ""
// {{ 954 1 0 "4584cab7_8015_4458_9875a6605620a8f8" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_DataDefinition = Translate("CONTAINER");
// }} ""
// {{ 955 1 0 "1955a138_f2fa_4e54_93a8a89d025d6c1b" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_Instance = Translate("default");
// }} ""
// {{ 956 1 0 "62c6e661_18cf_43ff_9cbac019ebf7499e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 957 1 0 "ea8466fe_d742_49b5_a2e01533fde32084" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_Extension == "tml")
{
// }} ""
// {{ 958 1 0 "7c3e1bdd_4e42_4e71_a89395dba63bb77d" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_DataDefinition = Translate("TEMPLATE");
// }} ""
// {{ 959 1 0 "3e1065b7_9c53_459e_bfc7da2c0edd3012" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_Instance = Translate("default");
// }} ""
// {{ 960 1 0 "ea8466fe_d742_49b5_a2e01533fde32084" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 961 1 0 "8cdf045a_db8f_4562_95627742c8f65b1f" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_Extension == "lid")
{
// }} ""
// {{ 962 1 0 "e59eaec4_c72f_4410_9a5ca88f6261ff4f" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_DataDefinition = Translate("COVER");
// }} ""
// {{ 963 1 0 "6f81ecef_5766_4446_af96268babf1283f" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_Instance = Translate("default");
// }} ""
// {{ 964 1 0 "8cdf045a_db8f_4562_95627742c8f65b1f" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 965 1 0 "6821905a_dec6_4165_9bc0725aca69f149" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_Extension == "lay")
{
// }} ""
// {{ 966 1 0 "91a8725b_00e1_4528_b6240c323794a220" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_DataDefinition = Translate("DECKLAY");
// }} ""
// {{ 967 1 0 "6d2b89bd_a4b2_4da5_800f38e4ea88ff94" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_Instance = Translate("ML_STAR");
// }} ""
// {{ 968 1 0 "6821905a_dec6_4165_9bc0725aca69f149" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 969 1 0 "641ca262_e38f_439a_aa1d9a7624219e9d" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_Extension == "dck")
{
// }} ""
// {{ 970 1 0 "3b742828_84dc_4717_a55774ac12fd071b" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_DataDefinition = Translate("DECK");
// }} ""
// {{ 971 1 0 "fb93b1ac_b8cd_4deb_b40440196223a109" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_Instance = Translate("0");
// }} ""
// {{ 972 1 0 "641ca262_e38f_439a_aa1d9a7624219e9d" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 973 1 0 "a6e6c29b_faf5_435e_aa59a872a0de3f43" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_Extension == "tpl")
{
// }} ""
// {{ 974 1 0 "faa29b91_6250_492a_bbbbfb8e372b86e9" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_DataDefinition = Translate("DECKLAY");
// }} ""
// {{ 975 1 0 "c788be7a_481f_4545_8025c31500d1ee79" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_Instance = Translate("default");
// }} ""
// {{ 976 1 0 "a6e6c29b_faf5_435e_aa59a872a0de3f43" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
Trace("Data definition:  ",str_DataDefinition);
/* {{ 1 "" "1" */ } /* }} "" */
// {{ 978 1 0 "872f5940_5471_4ab7_9f7fb6579ff60710" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 979 1 0 "a5cb5265_2e1d_4ad2_9fc51d21ce73ed81" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_DataDefinition != "")
{
// }} ""
{
   object objCfgFile;

   objCfgFile.CreateObject("HXCFGFILLIB.HxCfgFile");
   objCfgFile.LoadFile(i_str_ConfigFilePath);

   onerror goto HandleError;

   if(objCfgFile.ExistDataDef(str_DataDefinition,str_Instance) == 1)
   {
      //o_str_Value = objCfgFile.GetDataDefValueAsString(str_DataDefinition,"default",i_str_ValueToSearch);
      objCfgFile.LookupDataDefValueAsString(str_DataDefinition,str_Instance,i_str_ValueToSearch,o_str_Value);
   }
   onerror goto 0;
   err.Clear();

   objCfgFile.ReleaseObject();

   HandleError:
   {
   objCfgFile.ReleaseObject();
   }
}
// {{ 981 1 0 "497cb8d4_39f1_4abf_af145e11edfc7d0a" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (o_str_Value != "")
{
// }} ""
// {{ 982 1 0 "7990e648_3b02_44aa_99ab1c3840b1492e" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_ReturnValue = 1;
// }} ""
// {{ 983 1 0 "497cb8d4_39f1_4abf_af145e11edfc7d0a" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 984 1 0 "55a04581_3863_481c_a9f73120b498fc83" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_ReturnValue = 0;
// }} ""
// {{ 985 1 0 "497cb8d4_39f1_4abf_af145e11edfc7d0a" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 986 1 0 "a5cb5265_2e1d_4ad2_9fc51d21ce73ed81" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
Trace("File type:  ",str_Extension," unknown!");
// {{ 988 1 0 "1a511feb_5209_45dc_ac4483985905aea4" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_ReturnValue = 0;
// }} ""
// {{ 989 1 0 "a5cb5265_2e1d_4ad2_9fc51d21ce73ed81" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
// {{ 990 1 0 "9ec6ed28_8d6d_445a_b4438a7181abfacc" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_ReturnValue == 0)
{
// }} ""
// {{ 991 1 0 "edcf2ff7_5c54_427a_bf6161cb63b4e0f3" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_Extension == "lay")
{
// }} ""
// {{ 992 1 0 "7bf0d6fe_aeb2_4562_8cd7fe6853d961fd" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_Instance = Translate("default");
// }} ""
{
   object objCfgFile;

   objCfgFile.CreateObject("HXCFGFILLIB.HxCfgFile");
   objCfgFile.LoadFile(i_str_ConfigFilePath);

   onerror goto HandleError2;

   if(objCfgFile.ExistDataDef(str_DataDefinition,str_Instance) == 1)
   {
      //o_str_Value = objCfgFile.GetDataDefValueAsString(str_DataDefinition,"default",i_str_ValueToSearch);
      objCfgFile.LookupDataDefValueAsString(str_DataDefinition,str_Instance,i_str_ValueToSearch,o_str_Value);
   }
   onerror goto 0;
   err.Clear();

   objCfgFile.ReleaseObject();

   HandleError2:
   {
   objCfgFile.ReleaseObject();
   }
}
// {{ 994 1 0 "6ae094f1_a7e6_4cf0_bc249caa5cb70d81" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (o_str_Value != "")
{
// }} ""
// {{ 995 1 0 "c8a23ed5_c604_4ae0_8f99938881e4ed19" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_ReturnValue = 1;
// }} ""
// {{ 996 1 0 "6ae094f1_a7e6_4cf0_bc249caa5cb70d81" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 997 1 0 "7a089ecc_3a5c_4ce2_9df0d7c4eecc517a" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_ReturnValue = 0;
// }} ""
// {{ 998 1 0 "6ae094f1_a7e6_4cf0_bc249caa5cb70d81" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 999 1 0 "edcf2ff7_5c54_427a_bf6161cb63b4e0f3" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1000 1 0 "9ec6ed28_8d6d_445a_b4438a7181abfacc" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
/* {{ 1 "" "1" */ } /* }} "" */
// {{{ 1001 1 0 "01992fcc_7b30_4591_a2c85b2e2bfdd5b8" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return (bool_ReturnValue);
// }} ""
// {{{ 5 "FILE_GetDefinitionFileValue" "End"
}
// }} ""
// {{{ 5 "LABWARE_GetCarrierAndSiteID" "Begin"
function LABWARE_GetCarrierAndSiteID( device & Instrument, sequence i_seq_Labware, variable & o_str_TemplateID, variable & o_str_TemplateSiteID ) void {
// }} ""
private variable strFunctionName;
private variable str_LabID;
private variable str_PosID;
private variable bool_SequenceValid;
// {{ 5 "LABWARE_GetCarrierAndSiteID" "InitLocals"
o_str_TemplateID = 0;
o_str_TemplateSiteID = 0;
// }} ""
// {{ 1003 1 0 "d10f9b96_23d4_493b_bee1096f5adad7c1" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1004 1 0 "9a29a614_946a_4eb7_92229c3508dc477c" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 1006 1 0 "6de18761_0890_466a_8d5adf43e0718fd2" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 1007 1 0 "2d11f75d_c675_425b_a922599137fa8a71" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 1008 1 0 "43e11d0f_eae3_4bbf_933b729ba4cfa3e6" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 1009 1 0 "2d11f75d_c675_425b_a922599137fa8a71" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1010 1 0 "d10f9b96_23d4_493b_bee1096f5adad7c1" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1011 1 0 "00e57ceb_daaf_4333_8ad6c3d6c041ce2b" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_str_TemplateID = Translate("");
// }} ""
// {{ 1012 1 0 "c1ae71fc_649c_46b9_a360f49f5ee09000" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_str_TemplateSiteID = Translate("");
// }} ""
{
  object obj_Decklayout;
  obj_Decklayout = Instrument.GetDeckLayoutObject();
  if (!obj_Decklayout.IsNull())
      {
          object EditDecklayout5;
          object Parameter;
          object LabwareObjects;
          object LabwareNames;
          variable Array_Keys[];
          variable intCounter;
          obj_Decklayout.GetObject("IEditDeckLayout5", EditDecklayout5);
          LabwareObjects.CreateObject("HXPARAMSLib.HxPars");
          LabwareNames.CreateObject("HXPARAMSLib.HxPars");
          obj_Decklayout.TemplateLabwareNames(LabwareObjects);
          Array_Keys = LabwareObjects.GetKeys();
          for(intCounter=1; intCounter<=Array_Keys.GetSize(); intCounter++)
          {
            LabwareNames = LabwareObjects.Item1(intCounter);
            if(LabwareNames.Item1("Labwr_Id") == str_LabID)
            { 
              o_str_TemplateSiteID = LabwareNames.Item1("Labwr_DkSiteId");
              o_str_TemplateID = LabwareNames.Item1("Labwr_TemplateId");            
            } 
          }
          obj_Decklayout.ReleaseObject();
          EditDecklayout5.ReleaseObject();
          Parameter.ReleaseObject();
          LabwareObjects.ReleaseObject();
          LabwareNames.ReleaseObject();
     }
}



// {{{ 5 "LABWARE_GetCarrierAndSiteID" "End"
}
// }} ""
// {{{ 5 "LABWARE_GetCarrierTracks" "Begin"
function LABWARE_GetCarrierTracks( device & Instrument, sequence i_seq_Labware, variable & o_int_TotalTracks, variable & o_int_LeftMostTrack, variable & o_int_RightMostTrack ) void {
// }} ""
private variable flt_X_Coord;
private variable flt_Z_Coord;
private variable flt_Y_Coord;
private variable strFunctionName;
private variable str_TemplateID;
private variable str_LabID;
private variable flt_LabwareLength;
private variable str_ConfigFile;
private variable int_NumberOfTracks;
private variable str_Extension;
private variable str_TemplateSiteID;
private variable str_PosID;
private variable bool_SequenceValid;
private variable flt_LabwareWidth;
// {{ 5 "LABWARE_GetCarrierTracks" "InitLocals"
o_int_TotalTracks = 0;
o_int_LeftMostTrack = 0;
o_int_RightMostTrack = 0;
// }} ""
// {{ 1015 1 0 "715376ce_9788_42bc_aab2ee0086ac8173" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1016 1 0 "e2eef577_d80f_4489_a1a90d0606696cef" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 1018 1 0 "c66d67ef_8adb_42e7_b5183a878062948c" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 1019 1 0 "95b6d945_4485_4fb2_b2e891b06c19a6a4" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 1020 1 0 "bf179bb8_4dfd_4185_b0dc21a449c40de4" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 1021 1 0 "95b6d945_4485_4fb2_b2e891b06c19a6a4" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1022 1 0 "715376ce_9788_42bc_aab2ee0086ac8173" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1023 1 0 "8a4a2fb6_3692_493d_8908ee21a06aaab0" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_int_LeftMostTrack = 0;
// }} ""
// {{ 1024 1 0 "d1c781f1_5f9c_4f81_82f8b0ca0c4b7fb3" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_int_RightMostTrack = 0;
// }} ""
// {{ 1025 1 0 "c4a3c25d_3878_4751_b52efff8449b8706" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_int_TotalTracks = 0;
// }} ""
// {{{ 1026 1 0 "ee46c2ab_4784_404b_8361e51c5d852317" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetCarrierAndSiteID(Instrument, i_seq_Labware, str_TemplateID, str_TemplateSiteID);
// }} ""
// {{{ 1027 1 0 "6d948843_a0ce_4727_ace1b898f1684bfa" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetConfigFile(Instrument, i_seq_Labware, str_ConfigFile);
// }} ""
// {{{ 1028 1 0 "7a5f7bc8_8724_42c5_bcb37405df947653" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_Extension = HSLExtensions::File::GetFileExtension(str_ConfigFile);
// }} ""
// {{ 1029 1 0 "e92d8d5e_c710_4996_905ff28f6d279678" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_Extension == "rck")
{
// }} ""
// {{ 1030 1 0 "521e28fa_492f_43a5_8e2b5d744382cde4" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_TemplateID == "default")
{
// }} ""
// {{{ 1031 1 0 "1a798f1e_6b19_450a_9c612eb55779740a" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetLabwareLW(Instrument, i_seq_Labware, flt_LabwareLength, flt_LabwareWidth);
// }} ""
// {{ 1032 1 0 "b71dd6f9_4ad1_4295_a15481ccf308d266" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
o_int_TotalTracks = flt_LabwareWidth / 22.5;
// }} ""
// {{{ 1033 1 0 "c2c55795_7345_4ed1_97d7c4e6c86e322b" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToInteger(o_int_TotalTracks, o_int_TotalTracks);
// }} ""
// {{{ 1034 1 0 "babae479_dac4_4064_949049c3b7c44f48" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetLabwareOrigin(Instrument, i_seq_Labware, flt_X_Coord, flt_Y_Coord, flt_Z_Coord);
// }} ""
// {{ 1035 1 0 "4b2a6915_d9b9_49d5_88b682c749393f94" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_X_Coord = flt_X_Coord - 77.5;
// }} ""
// {{ 1036 1 0 "874b065b_ce5d_42f7_be9161fa923c66a5" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
o_int_LeftMostTrack = flt_X_Coord / (22.5 * 1.0);
// }} ""
// {{{ 1037 1 0 "2cf01e1b_735f_4bf1_be21f4297b3828f1" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToInteger(o_int_LeftMostTrack, o_int_LeftMostTrack);
// }} ""
// {{ 1038 1 0 "6930914e_feae_412d_ad5626bea6e806cb" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
o_int_RightMostTrack = o_int_LeftMostTrack + o_int_TotalTracks;
// }} ""
// {{{ 1039 1 0 "a91cb971_fbc4_40d3_be0c41c742043a46" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToInteger(o_int_RightMostTrack, o_int_RightMostTrack);
// }} ""
// {{ 1040 1 0 "f85a3c48_9b83_40b3_af0d5dcc137f4596" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
o_int_RightMostTrack = o_int_RightMostTrack - 1;
// }} ""
// {{ 1041 1 0 "521e28fa_492f_43a5_8e2b5d744382cde4" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{{ 1042 1 0 "cfd4a406_0234_40ee_a6c03ccf68b80451" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_NumberOfTracks = DevGetLabwareData(Instrument, str_TemplateID, Translate("MlStarCarWidthAsT"));
// }} ""
// {{ 1043 1 0 "6f68d166_c84b_4c51_8fc93bf4559501e8" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_NumberOfTracks != "")
{
// }} ""
// {{{ 1044 1 0 "5c0eb263_9cc6_451f_954e80611292a6f5" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToInteger(int_NumberOfTracks, o_int_TotalTracks);
// }} ""
// {{{ 1045 1 0 "7f50c5c1_9562_4e44_a1ebbdf198ac2db2" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
TEMPLATE_GetTemplateOrigin(Instrument, i_seq_Labware, flt_X_Coord, flt_Y_Coord, flt_Z_Coord);
// }} ""
// {{ 1046 1 0 "5afb39e4_35eb_4fdc_8e8e224947d0db96" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_X_Coord = flt_X_Coord - 77.5;
// }} ""
// {{ 1047 1 0 "424bfde4_b27f_4810_8ff221ca1d84ff58" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
o_int_LeftMostTrack = flt_X_Coord / (22.5 * 1.0);
// }} ""
// {{{ 1048 1 0 "e8d8c670_9372_472e_b48d10ff905d1ca4" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToInteger(o_int_LeftMostTrack, o_int_LeftMostTrack);
// }} ""
// {{ 1049 1 0 "6d765a67_a05c_4ba0_a268ab30eeaf6e8c" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
o_int_RightMostTrack = o_int_LeftMostTrack + o_int_TotalTracks;
// }} ""
// {{{ 1050 1 0 "6edbac25_efb8_4b87_9bdad3a481e80197" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToInteger(o_int_RightMostTrack, o_int_RightMostTrack);
// }} ""
// {{ 1051 1 0 "11b163ac_210f_4e19_b37aeab767d4164f" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
o_int_RightMostTrack = o_int_RightMostTrack - 1;
// }} ""
// {{ 1052 1 0 "6f68d166_c84b_4c51_8fc93bf4559501e8" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1053 1 0 "521e28fa_492f_43a5_8e2b5d744382cde4" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1054 1 0 "e92d8d5e_c710_4996_905ff28f6d279678" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{{ 1055 1 0 "534eef62_f3d8_443f_9bb12f36de1efb7b" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_NumberOfTracks = DevGetLabwareData(Instrument, str_TemplateID, Translate("MlStarCarWidthAsT"));
// }} ""
// {{ 1056 1 0 "235cd30f_ee53_43a5_b370e496883d3879" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_NumberOfTracks != "")
{
// }} ""
// {{{ 1057 1 0 "e8de95d1_1d75_40e1_a83264a17180f4c0" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToInteger(int_NumberOfTracks, o_int_TotalTracks);
// }} ""
// {{{ 1058 1 0 "7f0a29dc_c50a_41e8_b8c5b3340ecf4db0" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
TEMPLATE_GetTemplateOrigin(Instrument, i_seq_Labware, flt_X_Coord, flt_Y_Coord, flt_Z_Coord);
// }} ""
// {{ 1059 1 0 "16dce282_2471_4516_95d63d33f6c179de" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_X_Coord = flt_X_Coord - 77.5;
// }} ""
// {{ 1060 1 0 "04474d00_17d7_43d3_89e24edad45430e9" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
o_int_LeftMostTrack = flt_X_Coord / (22.5 * 1.0);
// }} ""
// {{{ 1061 1 0 "05702d03_a691_4c02_be1d8a4a2b08ea46" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToInteger(o_int_LeftMostTrack, o_int_LeftMostTrack);
// }} ""
// {{ 1062 1 0 "ca8335f6_5d67_482e_9b0674df3e9f2818" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
o_int_RightMostTrack = o_int_LeftMostTrack + o_int_TotalTracks;
// }} ""
// {{{ 1063 1 0 "d32dbdc0_ab03_4614_a81308de3cf8e8a5" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToInteger(o_int_RightMostTrack, o_int_RightMostTrack);
// }} ""
// {{ 1064 1 0 "9b2b4e6b_4ad6_41b5_a7428c63fb16cdaf" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
o_int_RightMostTrack = o_int_RightMostTrack - 1;
// }} ""
// {{ 1065 1 0 "235cd30f_ee53_43a5_b370e496883d3879" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1066 1 0 "e92d8d5e_c710_4996_905ff28f6d279678" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 5 "LABWARE_GetCarrierTracks" "End"
}
// }} ""
// {{{ 5 "LABWARE_GetConfigFile" "Begin"
function LABWARE_GetConfigFile( device & Instrument, sequence i_seq_Labware, variable & o_str_ConfigFilePath ) void {
// }} ""
private variable strFunctionName;
private variable str_LabID;
private variable bool_SequenceValid;
private variable str_PosID;
// {{ 5 "LABWARE_GetConfigFile" "InitLocals"
o_str_ConfigFilePath = 0;
// }} ""
// {{ 1068 1 0 "f05e2eee_e817_4786_a09de4c59104dfd5" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1069 1 0 "cb488c61_7fee_4533_918d2e87fe665a5b" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 1071 1 0 "bbefc889_a576_4126_8083c32b8f062d16" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 1072 1 0 "63febfe7_4e1d_4124_9f04405c43e0a517" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 1073 1 0 "43d4b84a_d566_4f07_b8b4f38050ac5aed" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 1074 1 0 "63febfe7_4e1d_4124_9f04405c43e0a517" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1075 1 0 "f05e2eee_e817_4786_a09de4c59104dfd5" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1076 1 0 "3a953b09_2256_4e75_bea954951808ead5" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_str_ConfigFilePath = Translate("");
// }} ""
//Get Config File

{
   object objDeckLayout;

   objDeckLayout = Instrument.GetDeckLayoutObject();

   if(!objDeckLayout.IsNull())
   {
      object objLabware;

      onerror goto HandleLabwareError;
      objLabware = objDeckLayout.Labware(str_LabID);
      onerror goto 0;
      err.Clear();

      if(!objLabware.IsNull())
      {
         object objEditLabware5;

         objLabware.GetObject("IEditLabware5", objEditLabware5);

        o_str_ConfigFilePath = objEditLabware5.Filename;

         objEditLabware5.ReleaseObject();
         objDeckLayout.ReleaseObject();
         objLabware.ReleaseObject();
      }
   }

         // runtime error handling
      HandleLabwareError :
      {
        variable errorID;
        errorID=err.GetId();
        err.Clear();
         if(errorID != 0)
         {
            if (errorID==-1574764487)
            {
                Trace("LabwareID is  unknown.");
            }
            else
            {
                Trace("Unknown error occured.");
            }
         }
      }
}
// {{{ 5 "LABWARE_GetConfigFile" "End"
}
// }} ""
// {{{ 5 "LABWARE_GetContainerBaseOffset" "Begin"
function LABWARE_GetContainerBaseOffset( device & Instrument, sequence i_seq_Labware, variable & o_flt_ContainerBaseOffset ) void {
// }} ""
private variable strFunctionName;
private variable str_LabID;
private variable str_PosID;
private variable bool_SequenceValid;
private variable str_ConfigFilePath;
private variable str_Return;
// {{ 5 "LABWARE_GetContainerBaseOffset" "InitLocals"
o_flt_ContainerBaseOffset = 0;
// }} ""
// {{ 1079 1 0 "db7be763_ed55_4723_a7789c6d10c5e2b5" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1080 1 0 "ffa6965e_799f_430e_a91a20d0c17b31d6" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 1082 1 0 "1134655d_5117_4466_98b163ff2c783506" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 1083 1 0 "a1b3a29d_b9c4_43b1_ae45d6aa8825d37f" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 1084 1 0 "10219a67_b082_411b_a77544ae25cfa804" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 1085 1 0 "a1b3a29d_b9c4_43b1_ae45d6aa8825d37f" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1086 1 0 "db7be763_ed55_4723_a7789c6d10c5e2b5" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1087 1 0 "432f8f0e_246b_4971_b41262270ca8e36b" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_ContainerBaseOffset = 0;
// }} ""
// {{{ 1088 1 0 "adf77e13_c511_475c_99eb7818b4a6b8a5" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetConfigFile(Instrument, i_seq_Labware, str_ConfigFilePath);
// }} ""
// {{{ 1089 1 0 "bd890004_dc5a_4b94_bcbce1e672c6f739" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ConfigFilePath, Translate("Cntr.1.base"), str_Return);
// }} ""
// {{{ 1090 1 0 "6e44f0d9_590a_4d06_b9f78aada9058fcb" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, o_flt_ContainerBaseOffset);
// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
{
object rack;
object labware;
object m_decklayout;		
variable labwareId;

m_decklayout = Instrument.GetDeckLayoutObject();
//labwareId = SeqGetLabwareId(i_sequenceLabware);
labware = m_decklayout.Labware(str_LabID);
labware.GetObject("IRectRack2", rack); //  IEditLabware6

o_flt_ContainerBaseOffset = rack.ContainerBaseOffset(str_PosID);

rack.ReleaseObject(); 
labware.ReleaseObject(); 
m_decklayout.ReleaseObject(); 
}

/* {{ 1 "" "1" */ } /* }} "" */
// {{{ 1092 1 0 "e55579cc_f6d5_409d_aa0d045cb40dfae2" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
o_flt_ContainerBaseOffset = MthRound(o_flt_ContainerBaseOffset, 1);
// }} ""
// {{{ 5 "LABWARE_GetContainerBaseOffset" "End"
}
// }} ""
// {{{ 5 "LABWARE_GetCurrentPosition" "Begin"
function LABWARE_GetCurrentPosition( device & Instrument, sequence i_seq_Labware, variable & o_flt_X_Coord, variable & o_flt_Y_Coord, variable & o_flt_Z_Coord ) void {
// }} ""
private variable flt_NotUsed;
private variable strFunctionName;
private variable str_LabID;
private variable bool_SequenceValid;
private variable str_PosID;
// {{ 5 "LABWARE_GetCurrentPosition" "InitLocals"
o_flt_X_Coord = 0;
o_flt_Y_Coord = 0;
o_flt_Z_Coord = 0;
// }} ""
// {{ 1094 1 0 "00b39eea_b24a_44c9_92e8787549b53862" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1095 1 0 "3a2c3bd3_f571_421b_a6969fa7bb0bbff9" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 1097 1 0 "7e739f4a_776c_46c3_a78f666084d206ed" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 1098 1 0 "ba1ea033_0c48_42da_9d5a253232c1177b" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 1099 1 0 "2f1f0d2a_b62c_4db1_bde655aecf5b3efc" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 1100 1 0 "ba1ea033_0c48_42da_9d5a253232c1177b" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1101 1 0 "00b39eea_b24a_44c9_92e8787549b53862" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1102 1 0 "c2453cbf_1a61_4ac7_b345ac39ae73098f" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_X_Coord = 0.0;
// }} ""
// {{ 1103 1 0 "0ee08731_b774_4d79_b7b03b0f5b41fa9d" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_Y_Coord = 0.0;
// }} ""
// {{ 1104 1 0 "4c429fa2_fea1_4727_bfab4ad4c39e43a9" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_Z_Coord = 0.0;
// }} ""
// {{{ 1105 1 0 "fff6233f_4c41_4786_8d3b620720fd8f53" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DevGetLabwarePositionEx(Instrument, str_LabID, str_PosID, o_flt_X_Coord, o_flt_Y_Coord, o_flt_Z_Coord, flt_NotUsed);
// }} ""
// {{{ 5 "LABWARE_GetCurrentPosition" "End"
}
// }} ""
// {{{ 5 "LABWARE_GetDescription" "Begin"
function LABWARE_GetDescription( device & Instrument, sequence i_seq_Labware, variable & o_str_LabwareDescription ) void {
// }} ""
private variable str_ReturnValue;
private variable strFunctionName;
private variable str_LabID;
private variable str_ConfigFile;
private variable bool_SequenceValid;
private variable str_PosID;
// {{ 5 "LABWARE_GetDescription" "InitLocals"
o_str_LabwareDescription = 0;
// }} ""
// {{ 1107 1 0 "df76fa03_0e8b_4d49_bba42218c50d3d17" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1108 1 0 "268ef770_782c_4a5a_95900fe6eb9fe9ef" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 1110 1 0 "80b056ad_748b_40da_917859aaff400276" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 1111 1 0 "e974e721_07fd_4209_9322a91500e7472b" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 1112 1 0 "a1c1716a_4c81_438f_a092ce517566e560" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 1113 1 0 "e974e721_07fd_4209_9322a91500e7472b" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1114 1 0 "df76fa03_0e8b_4d49_bba42218c50d3d17" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 1115 1 0 "a30d6cb9_69aa_41a9_bd93f15667f71e15" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetConfigFile(Instrument, i_seq_Labware, str_ConfigFile);
// }} ""
// {{ 1116 1 0 "9390d6b9_951e_4a22_9fa3aed97f059b9a" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_str_LabwareDescription = Translate("");
// }} ""
// {{{ 1117 1 0 "3e0d1415_221e_470d_83754a178f92a66f" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ConfigFile, Translate("Description"), str_ReturnValue);
// }} ""
// {{{ 1118 1 0 "d0240c6a_08ed_4286_a82d62cb346572db" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
o_str_LabwareDescription = StrConcat2(str_ReturnValue, Translate(""));
// }} ""
// {{{ 5 "LABWARE_GetDescription" "End"
}
// }} ""
// {{{ 5 "LABWARE_GetFirstPosition" "Begin"
function LABWARE_GetFirstPosition( device & Instrument, variable i_str_LabID, variable & o_str_PosID ) void {
// }} ""
private variable int_Increment;
private variable str_ErrorDescription;
private variable strFunctionName;
private variable bool_LabwareNotValid;
private variable int_TotalColumns;
private variable int_Index;
private variable int_TotalRows;
// {{ 5 "LABWARE_GetFirstPosition" "InitLocals"
o_str_PosID = 0;
// }} ""
// {{ 1120 1 0 "6a9d1840_3325_4c1a_8f92adc4d3732c41" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{ 1122 1 0 "96102bbd_4387_49e9_a27ae791c5f87618" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
int_TotalRows = 0;
// }} ""
// {{ 1123 1 0 "fd3a733b_aaac_4d91_ad1f84573592f91d" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
int_TotalColumns = 0;
// }} ""
// {{ 1124 1 0 "aca22a44_34c9_4b58_80b195d65f0b34a4" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
int_Index = 0;
// }} ""
// {{ 1125 1 0 "50931d40_e68a_4380_8e72ebb731858302" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
int_Increment = 0;
// }} ""
// {{{ 1126 1 0 "02361439_ccd6_4d77_9c7e498e9d723c2b" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
bool_LabwareNotValid = DevIsValidLabwareForCurrentDeckLayout(Instrument, i_str_LabID);
// }} ""
// {{ 1127 1 0 "c25f7096_ed04_470a_90613dce2217667e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_LabwareNotValid == 0)
{
// }} ""
// {{{ 1128 1 0 "2cadd740_77c4_4074_ada05080d6f4076c" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_ErrorDescription = StrConcat8(Translate(""), Translate(""), Translate("Labware ID: '"), i_str_LabID, Translate("' is not known on the deck layout"), Translate(""), Translate(""), Translate(""));
// }} ""
// {{{ 1129 1 0 "6c2c9e1d_f694_440a_b57225bea9f7839f" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, str_ErrorDescription);
// }} ""
// {{ 1130 1 0 "c25f7096_ed04_470a_90613dce2217667e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
{
object objRackDataParams;
object objDecklayout;
object objLabware;
object objTemplate;
object objRack;
object objRack4;
object objEditLabware5;

objRackDataParams.CreateObject("HXPARAMSLib.HxPars");
objDecklayout = Instrument.GetDeckLayoutObject();
objLabware = objDecklayout.Labware(i_str_LabID);

objLabware.GetObject("ITemplateDeckData", objTemplate);
objLabware.GetObject("IRectRack4", objRack4);
objLabware.GetObject("IRectRack", objRack);
objLabware.GetObject("IEditLabware5", objEditLabware5);

objRack4.GetRackData(objRackDataParams);
int_TotalRows = objRack4.Rows();
int_TotalColumns = objRack4.Columns();
int_Index = objRack4.Index();
int_Increment = objRack4.Increment();

objRackDataParams.ReleaseObject();
objDecklayout.ReleaseObject();
objLabware.ReleaseObject();
objTemplate.ReleaseObject();
objRack.ReleaseObject();
objRack4.ReleaseObject();
objEditLabware5.ReleaseObject();
}
// {{ 1132 1 0 "513e9581_e89a_42e3_86974747ea3098ff" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_Index == 1)
{
// }} ""
// {{{ 1133 1 0 "a62bd2d5_b099_4e2b_bfa3a429c858dc36" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
ANC::Convert_Numbers_to_Alpha_Numeric(int_Increment, 1, int_TotalRows, int_TotalColumns, o_str_PosID);
// }} ""
// {{ 1134 1 0 "513e9581_e89a_42e3_86974747ea3098ff" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{{ 1135 1 0 "db5e9292_bdc5_4901_a720d200db9e9718" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
o_str_PosID = StrConcat2(1, Translate(""));
// }} ""
// {{ 1136 1 0 "513e9581_e89a_42e3_86974747ea3098ff" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 5 "LABWARE_GetFirstPosition" "End"
}
// }} ""
// {{{ 5 "LABWARE_GetLabwareLW" "Begin"
function LABWARE_GetLabwareLW( device & Instrument, sequence i_seq_Labware, variable & o_flt_Labware_L, variable & o_flt_Labware_W ) void {
// }} ""
private variable strFunctionName;
private variable str_LabID;
private variable bool_SequenceValid;
private variable str_PosID;
// {{ 5 "LABWARE_GetLabwareLW" "InitLocals"
o_flt_Labware_L = 0;
o_flt_Labware_W = 0;
// }} ""
// {{ 1187 1 0 "d9eb59c6_7612_4c5e_ba785001f5d79a9a" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1188 1 0 "6faa4e98_07ee_4991_ae70eee4aa76834b" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 1190 1 0 "04aa8516_d700_4f7e_930be28cd2b5d6d7" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 1191 1 0 "aa46bc7d_0797_43d7_b53efd1f89c8d6e5" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 1192 1 0 "90c8093f_d40e_490d_9f505c983158876f" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 1193 1 0 "aa46bc7d_0797_43d7_b53efd1f89c8d6e5" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1194 1 0 "d9eb59c6_7612_4c5e_ba785001f5d79a9a" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1195 1 0 "c08c84bf_0922_46f1_8b9c518de9c3c65e" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_Labware_W = 0.0;
// }} ""
// {{ 1196 1 0 "53c47686_e27c_454b_a41e82f5bee24d6a" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_Labware_L = 0.0;
// }} ""
{
object objRackDataParams;
object objDecklayout;
object objLabware;
object objTemplate;
object objRack;
object objRack4;
object objEditLabware5;

objRackDataParams.CreateObject("HXPARAMSLib.HxPars");
objDecklayout = Instrument.GetDeckLayoutObject();
objLabware = objDecklayout.Labware(str_LabID);

objLabware.GetObject("ITemplateDeckData", objTemplate);
objLabware.GetObject("IRectRack4", objRack4);
objLabware.GetObject("IRectRack", objRack);
objLabware.GetObject("IEditLabware5", objEditLabware5);

objRack4.GetRackData(objRackDataParams);
o_flt_Labware_W = objRackDataParams.Item1("Labwr_XDim");
o_flt_Labware_L = objRackDataParams.Item1("Labwr_YDim");


objRackDataParams.ReleaseObject();
objDecklayout.ReleaseObject();
objLabware.ReleaseObject();
objTemplate.ReleaseObject();
objRack.ReleaseObject();
objRack4.ReleaseObject();
objEditLabware5.ReleaseObject();
}
// {{{ 5 "LABWARE_GetLabwareLW" "End"
}
// }} ""
// {{{ 5 "LABWARE_GetLabwareOrigin" "Begin"
function LABWARE_GetLabwareOrigin( device & Instrument, sequence i_seq_Labware, variable & o_flt_X_Coord, variable & o_flt_Y_Coord, variable & o_flt_Z_Coord ) void {
// }} ""
private variable strFunctionName;
private variable flt_RackBase;
private variable str_LabID;
private variable flt_BoundaryX;
private variable flt_BoundaryY;
private variable bool_SequenceValid;
private variable str_PosID;
private variable flt_RackWidthX;
private variable flt_RackWidthY;
// {{ 5 "LABWARE_GetLabwareOrigin" "InitLocals"
o_flt_X_Coord = 0;
o_flt_Y_Coord = 0;
o_flt_Z_Coord = 0;
// }} ""
// {{ 1199 1 0 "e3f64ff1_9cb8_4c4b_b5d91998380179f4" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1200 1 0 "5f313af5_15d4_46fc_865919b515846e43" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 1202 1 0 "30defa28_8566_4613_98953084ee1767a4" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 1203 1 0 "8004f92c_d2cd_440e_9458ec6a85082686" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 1204 1 0 "712c7d19_eb72_4b60_b6976924540b2b0f" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 1205 1 0 "8004f92c_d2cd_440e_9458ec6a85082686" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1206 1 0 "e3f64ff1_9cb8_4c4b_b5d91998380179f4" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1207 1 0 "896b1f8f_b558_4802_9d59dfdb44898376" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_X_Coord = 0.0;
// }} ""
// {{ 1208 1 0 "ddf005df_2d07_48d6_af68b0a48730ea23" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_Y_Coord = 0.0;
// }} ""
// {{ 1209 1 0 "ee109760_53a4_4680_adcbb9919a09c878" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_Z_Coord = 0.0;
// }} ""
// {{ 1210 1 0 "8f67085d_139e_4d97_a1ae05f61baafa99" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_BoundaryX = 0.0;
// }} ""
// {{ 1211 1 0 "241dfd33_0172_4447_a09fc53ead23d33d" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_BoundaryY = 0.0;
// }} ""
// {{ 1212 1 0 "07a08a1e_2b3a_486f_80dcdcaf974f0104" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_RackWidthX = 0.0;
// }} ""
// {{ 1213 1 0 "9e314d73_f3e2_4345_89f5b19e5e7a0c7f" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_RackWidthY = 0.0;
// }} ""
// {{ 1214 1 0 "9d93fca7_7b32_43c5_97034b9e0db171e0" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_RackBase = 0.0;
// }} ""
{
object objRackDataParams;
object objDecklayout;
object objLabware;
object objTemplate;
object objRack;
object objRack4;
object objEditLabware5;

objRackDataParams.CreateObject("HXPARAMSLib.HxPars");
objDecklayout = Instrument.GetDeckLayoutObject();
objLabware = objDecklayout.Labware(str_LabID);

objLabware.GetObject("ITemplateDeckData", objTemplate);
objLabware.GetObject("IRectRack4", objRack4);
objLabware.GetObject("IRectRack", objRack);
objLabware.GetObject("IEditLabware5", objEditLabware5);

objRack4.GetRackData(objRackDataParams);
flt_BoundaryX = objRackDataParams.Item1("Labwr_Bndry1X");
flt_BoundaryY = objRackDataParams.Item1("Labwr_Bndry1Y");
flt_RackWidthX = objRackDataParams.Item1("Labwr_XDim");
flt_RackWidthY = objRackDataParams.Item1("Labwr_YDim");
flt_RackBase = objRack4.RackBase();


objRackDataParams.ReleaseObject();
objDecklayout.ReleaseObject();
objLabware.ReleaseObject();
objTemplate.ReleaseObject();
objRack.ReleaseObject();
objRack4.ReleaseObject();
objEditLabware5.ReleaseObject();
}
// {{ 1216 1 0 "19be50a9_df27_49fe_918d1122a7f33c4c" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_X_Coord = flt_BoundaryX;
// }} ""
// {{ 1217 1 0 "530f5e9c_4b10_45b9_8730ab8c5a3236bb" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_Y_Coord = flt_BoundaryY;
// }} ""
// {{ 1218 1 0 "4b3fb755_2f93_4354_b9ca42bc62568573" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_Z_Coord = flt_RackBase;
// }} ""
// {{{ 1219 1 0 "c561f3c6_2917_4450_9bd72bc31043d1fd" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
o_flt_Z_Coord = MthRound(o_flt_Z_Coord, 1);
// }} ""
// {{{ 5 "LABWARE_GetLabwareOrigin" "End"
}
// }} ""
// {{{ 5 "LABWARE_GetLabwareStackHeight" "Begin"
function LABWARE_GetLabwareStackHeight( device & Instrument, sequence i_seq_Labware, variable & o_flt_LabwareStackHeight ) void {
// }} ""
private variable str_ReturnValue;
private variable strFunctionName;
private variable str_LabID;
private variable str_ConfigFile;
private variable bool_SequenceValid;
private variable str_PosID;
// {{ 5 "LABWARE_GetLabwareStackHeight" "InitLocals"
o_flt_LabwareStackHeight = 0;
// }} ""
// {{ 1221 1 0 "9cfbe748_5dcb_4dd5_b96182902b909bf9" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1222 1 0 "0ef78d8b_aeb4_4816_901025f5fd7d4871" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 1224 1 0 "7628bcf8_1d87_4149_b1afac7008a79234" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 1225 1 0 "b64ed138_a1f8_4cd2_ad8dac5d4902daa4" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 1226 1 0 "f0d608aa_8a5c_44df_82641d2d88a3f7ee" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 1227 1 0 "b64ed138_a1f8_4cd2_ad8dac5d4902daa4" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1228 1 0 "9cfbe748_5dcb_4dd5_b96182902b909bf9" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1229 1 0 "b20f8fbe_47d0_426e_8d11d3db92b07969" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_LabwareStackHeight = 0.0;
// }} ""
// {{{ 1230 1 0 "e1e4b038_20af_4fd1_89dad151c83c3d1e" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetConfigFile(Instrument, i_seq_Labware, str_ConfigFile);
// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
Trace("Config File:  ",str_ConfigFile);
/* {{ 1 "" "1" */ } /* }} "" */
// {{ 1232 1 0 "4a2e189c_ae80_4251_8edc392c5840e75b" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
{
   object objCfgFile;

   objCfgFile.CreateObject("HXCFGFILLIB.HxCfgFile");
   objCfgFile.LoadFile(str_ConfigFile);

   onerror goto HandleError;
   o_flt_LabwareStackHeight = objCfgFile.GetDataDefValueAsString("RECTRACK","default","StackHt");
   onerror goto 0;
   err.Clear();

   objCfgFile.ReleaseObject();

   HandleError:
   {
   objCfgFile.ReleaseObject();
   }
}
/* {{ 1 "" "1" */ } /* }} "" */
// {{{ 1234 1 0 "ed55ecbe_1e34_4f62_9b6844d92487932a" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ConfigFile, Translate("StackHt"), str_ReturnValue);
// }} ""
// {{{ 1235 1 0 "a93d238a_98d1_46de_8e2a1053742b9415" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_ReturnValue, o_flt_LabwareStackHeight);
// }} ""
// {{{ 5 "LABWARE_GetLabwareStackHeight" "End"
}
// }} ""
// {{{ 5 "LABWARE_GetLabwareViewName" "Begin"
function LABWARE_GetLabwareViewName( device & Instrument, sequence i_seq_Labware, variable & o_str_LabwareViewName ) void {
// }} ""
private variable str_ReturnValue;
private variable strFunctionName;
private variable str_LabID;
private variable str_ConfigFile;
private variable str_PosID;
private variable bool_SequenceValid;
// {{ 5 "LABWARE_GetLabwareViewName" "InitLocals"
o_str_LabwareViewName = 0;
// }} ""
// {{ 1237 1 0 "1672d7ce_c926_4387_9d5b85b93bb40e47" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1238 1 0 "14de1014_b37b_4897_8b52b1329dd794de" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 1240 1 0 "d32cd643_2cb7_4189_a8bb86e459b79ce4" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 1241 1 0 "f2a46984_5014_4019_9966157bca29ddff" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 1242 1 0 "a94b263f_22d4_4740_92285abdc395dcbc" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 1243 1 0 "f2a46984_5014_4019_9966157bca29ddff" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1244 1 0 "1672d7ce_c926_4387_9d5b85b93bb40e47" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 1245 1 0 "c0f75acd_8c48_4e82_a8c507872da22f86" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetConfigFile(Instrument, i_seq_Labware, str_ConfigFile);
// }} ""
// {{ 1246 1 0 "7cc43b7d_c5d9_4096_86e982c5cf484516" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_str_LabwareViewName = Translate("");
// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
{
   object objEditLabware;
   object objDeckLayout;
   object objLabware;

   objDeckLayout = Instrument.GetDeckLayoutObject();

   if(!objDeckLayout.IsNull())
   {
      objLabware = objDeckLayout.Labware(str_LabID);
      if(!objLabware.IsNull())
      {
         objLabware.GetObject("IEditLabware6", objEditLabware);

         o_str_LabwareViewName = objEditLabware.DisplayName;
      }
   }

   objEditLabware.ReleaseObject();
   objDeckLayout.ReleaseObject();
   objLabware.ReleaseObject();
}
/* {{ 1 "" "1" */ } /* }} "" */
// {{{ 1248 1 0 "e182da7d_6fe0_48c9_96296acf28d083f4" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ConfigFile, Translate("ViewName"), str_ReturnValue);
// }} ""
// {{{ 1249 1 0 "cd8d24c4_bb4b_4c3b_b6afdc5a537b136e" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
o_str_LabwareViewName = StrConcat2(str_ReturnValue, Translate(""));
// }} ""
// {{{ 5 "LABWARE_GetLabwareViewName" "End"
}
// }} ""
// {{{ 5 "LABWARE_GetRackHeight" "Begin"
function LABWARE_GetRackHeight( device & Instrument, sequence i_seq_Labware, variable i_bool_UseDeckCoordinates, variable & o_flt_RackHeight, variable & o_flt_RackClearanceHeight ) void {
// }} ""
private variable flt_NotUsed;
private variable flt_RackHeight;
private variable flt_ZBottom;
private variable flt_RackBase;
private variable strFunctionName;
private variable str_LabID;
private variable bool_SequenceValid;
private variable str_PosID;
private variable str_ConfigFile;
private variable bln_ValueFound;
private variable str_Value;
// {{ 5 "LABWARE_GetRackHeight" "InitLocals"
o_flt_RackHeight = 0;
o_flt_RackClearanceHeight = 0;
// }} ""
// {{ 1251 1 0 "7001cb3c_fe7a_4d0e_b3f000e06886cebf" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1252 1 0 "42b87a82_6f38_4137_9f4223aa7918fec5" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 1254 1 0 "7e8e89b3_bd4e_492b_9ab5008e321d6b53" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 1255 1 0 "1286d3fb_a855_4d86_be12897053de8832" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 1256 1 0 "b71e8ebc_3d03_4056_816c4845ff0248c0" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 1257 1 0 "1286d3fb_a855_4d86_be12897053de8832" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1258 1 0 "7001cb3c_fe7a_4d0e_b3f000e06886cebf" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1259 1 0 "8907f5ba_a2a9_4de7_8927033540142431" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_RackClearanceHeight = 0.0;
// }} ""
// {{ 1260 1 0 "6ef63179_453a_4288_a94708f81ff318f6" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_RackHeight = 0.0;
// }} ""
// {{ 1261 1 0 "6393dcba_ddb9_40b9_bedcda7de9649b17" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_RackBase = 0.0;
// }} ""
// {{ 1262 1 0 "cf0f865b_ec52_482f_ae32a0b4adc1e1d3" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_RackHeight = 0.0;
// }} ""
{
object objRackDataParams;
object objDecklayout;
object objLabware;
object objTemplate;
object objRack;
object objRack4;
object objEditLabware5;

objRackDataParams.CreateObject("HXPARAMSLib.HxPars");
objDecklayout = Instrument.GetDeckLayoutObject();
objLabware = objDecklayout.Labware(str_LabID);

objLabware.GetObject("ITemplateDeckData", objTemplate);
objLabware.GetObject("IRectRack4", objRack4);
objLabware.GetObject("IRectRack", objRack);
objLabware.GetObject("IEditLabware5", objEditLabware5);

objRack4.GetRackData(objRackDataParams);
flt_RackHeight = objRackDataParams.Item1("Labwr_ZDim");
//o_flt_RackClearanceHeight = objEditLabware5.Clearance(str_PosID);
flt_RackBase = objRack4.RackBase();

objRackDataParams.ReleaseObject();
objDecklayout.ReleaseObject();
objLabware.ReleaseObject();
objTemplate.ReleaseObject();
objRack.ReleaseObject();
objRack4.ReleaseObject();
objEditLabware5.ReleaseObject();
}
// {{ 1264 1 0 "a02d65f3_e33c_4625_9fe6a2a1b86246f7" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
o_flt_RackHeight = flt_RackBase + flt_RackHeight;
// }} ""
// {{{ 1265 1 0 "29b7f726_76b0_45c3_962764bb22886bb2" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetConfigFile(Instrument, i_seq_Labware, str_ConfigFile);
// }} ""
// {{{ 1266 1 0 "6aef7e97_eab2_4568_b3b699ba34d4fc7c" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bln_ValueFound = FILE_GetDefinitionFileValue(str_ConfigFile, Translate("Clearance"), str_Value);
// }} ""
// {{ 1267 1 0 "f83e563e_beaf_49d0_9322da83018075c7" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bln_ValueFound == 0)
{
// }} ""
// {{ 1268 1 0 "00f8c874_f182_4d2f_81a4ece7b8879c76" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_RackClearanceHeight = o_flt_RackHeight;
// }} ""
// {{ 1269 1 0 "f83e563e_beaf_49d0_9322da83018075c7" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{{ 1270 1 0 "62b59ced_bff6_40c9_b0740c140c24d04b" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
o_flt_RackClearanceHeight = StrFVal(str_Value);
// }} ""
// {{ 1271 1 0 "f83e563e_beaf_49d0_9322da83018075c7" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
// {{{ 1272 1 0 "29c40ee0_613c_49ea_abf2b4764e0b5804" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DevGetLabwarePositionEx(Instrument, str_LabID, str_PosID, flt_NotUsed, flt_NotUsed, flt_ZBottom, flt_NotUsed);
// }} ""
/* {{ 1 "" "1" */ } /* }} "" */
// {{{ 1273 1 0 "22105929_d260_4db2_a546e61bd3d0be53" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetLabwareOrigin(Instrument, i_seq_Labware, flt_NotUsed, flt_NotUsed, flt_ZBottom);
// }} ""
// {{ 1274 1 0 "05a19ab6_7ede_4aaf_a6975ac977d4bf08" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (i_bool_UseDeckCoordinates == 0)
{
// }} ""
// {{ 1275 1 0 "65c9f61d_97b8_452e_abc6d6a19255196e" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
o_flt_RackHeight = o_flt_RackHeight - flt_ZBottom;
// }} ""
// {{ 1276 1 0 "05a19ab6_7ede_4aaf_a6975ac977d4bf08" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 1277 1 0 "0384a1d6_4a25_4599_aacfece3a51cbf57" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
o_flt_RackClearanceHeight = o_flt_RackClearanceHeight + flt_ZBottom;
// }} ""
// {{ 1278 1 0 "05a19ab6_7ede_4aaf_a6975ac977d4bf08" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 5 "LABWARE_GetRackHeight" "End"
}
// }} ""
// {{{ 5 "LABWARE_GetRowColumnNumber" "Begin"
function LABWARE_GetRowColumnNumber( device & Instrument, sequence i_seq_Labware, variable & o_int_RowCount, variable & o_int_ColumnCount, variable & o_bool_AlphaNumeric, variable & o_bool_IncrementContainer ) void {
// }} ""
private variable strFunctionName;
private variable str_LabID;
private variable bool_SequenceValid;
private variable str_PosID;
// {{ 5 "LABWARE_GetRowColumnNumber" "InitLocals"
o_int_RowCount = 0;
o_int_ColumnCount = 0;
o_bool_AlphaNumeric = 0;
o_bool_IncrementContainer = 0;
// }} ""
// {{ 1280 1 0 "67d417f4_e59c_427d_b1787a80624bb8fb" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1281 1 0 "76938996_ca10_4657_b36dbe3652ca6fcf" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 1283 1 0 "2ce6989b_cb58_465a_b734e3ce15b9503c" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 1284 1 0 "9264c2fc_fd8b_428c_b30bcb420d87dfb3" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 1285 1 0 "53ba0483_c80b_4a3d_aa62393cbe213b0b" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 1286 1 0 "9264c2fc_fd8b_428c_b30bcb420d87dfb3" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1287 1 0 "67d417f4_e59c_427d_b1787a80624bb8fb" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1288 1 0 "53df32d4_ce24_478b_872dfdcf5034f421" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_bool_AlphaNumeric = 0;
// }} ""
// {{ 1289 1 0 "c05b65c8_cc28_4733_9ff75b4bc07d2f80" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_int_ColumnCount = 0;
// }} ""
// {{ 1290 1 0 "ea44ddc8_bbe8_404f_8eec84127fd0cf40" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_int_RowCount = 0;
// }} ""
// {{ 1291 1 0 "7a662ea7_0776_4f8a_94076506ec93a547" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_bool_IncrementContainer = 0;
// }} ""
{
object objRackDataParams;
object objDecklayout;
object objLabware;
object objTemplate;
object objRack;
object objRack4;
object objEditLabware5;

objRackDataParams.CreateObject("HXPARAMSLib.HxPars");
objDecklayout = Instrument.GetDeckLayoutObject();
objLabware = objDecklayout.Labware(str_LabID);

objLabware.GetObject("ITemplateDeckData", objTemplate);
objLabware.GetObject("IRectRack4", objRack4);
objLabware.GetObject("IRectRack", objRack);
objLabware.GetObject("IEditLabware5", objEditLabware5);

objRack4.GetRackData(objRackDataParams);
o_int_RowCount = objRack4.Rows();
o_int_ColumnCount = objRack4.Columns();
o_bool_AlphaNumeric = objRack4.Index();
o_bool_IncrementContainer = objRack4.Increment();

objRackDataParams.ReleaseObject();
objDecklayout.ReleaseObject();
objLabware.ReleaseObject();
objTemplate.ReleaseObject();
objRack.ReleaseObject();
objRack4.ReleaseObject();
objEditLabware5.ReleaseObject();
}
// {{{ 5 "LABWARE_GetRowColumnNumber" "End"
}
// }} ""
// {{{ 5 "LABWARE_GetVisibility" "Begin"
function LABWARE_GetVisibility( device & Instrument, sequence i_seq_Labware, variable & o_bool_LabwareVisibility ) void {
// }} ""
private variable int_LabwareVisibility;
private variable strFunctionName;
private variable str_LabID;
private variable str_PosID;
private variable bool_SequenceValid;
// {{ 5 "LABWARE_GetVisibility" "InitLocals"
o_bool_LabwareVisibility = 0;
// }} ""
// {{ 1294 1 0 "334d42f4_87da_45f4_a1d656d3ed4bed05" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1295 1 0 "7896be9d_56f6_44d8_9caac791c67043fa" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 1297 1 0 "ce2b9f6e_5435_4dcb_b36b136daf7393a4" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 1298 1 0 "68172f44_9bc5_44e0_82ee13259711bf3e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 1299 1 0 "0f38818c_4030_4bc9_a646736305c7163d" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 1300 1 0 "68172f44_9bc5_44e0_82ee13259711bf3e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1301 1 0 "334d42f4_87da_45f4_a1d656d3ed4bed05" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1302 1 0 "84c1ee23_a5c4_4047_b8072f4816049161" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
int_LabwareVisibility = 0;
// }} ""
{
object objRackDataParams;
object objDecklayout;
object objLabware;
object objTemplate;
object objRack;
object objRack4;
object objEditLabware5;

objRackDataParams.CreateObject("HXPARAMSLib.HxPars");
objDecklayout = Instrument.GetDeckLayoutObject();
objLabware = objDecklayout.Labware(str_LabID);

objLabware.GetObject("ITemplateDeckData", objTemplate);
objLabware.GetObject("IRectRack4", objRack4);
objLabware.GetObject("IRectRack", objRack);
objLabware.GetObject("IEditLabware6", objEditLabware5);

int_LabwareVisibility = objEditLabware5.Visible();

objRackDataParams.ReleaseObject();
objDecklayout.ReleaseObject();
objLabware.ReleaseObject();
objTemplate.ReleaseObject();
objRack.ReleaseObject();
objRack4.ReleaseObject();
objEditLabware5.ReleaseObject();
}
// {{ 1304 1 0 "e5496e7a_4e16_463d_b527c1ca4571cfac" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_bool_LabwareVisibility = int_LabwareVisibility;
// }} ""
// {{ 1305 1 0 "b61bc61c_ffe2_41e4_b5c9e26898021975" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (o_bool_LabwareVisibility == 0)
{
// }} ""
o_bool_LabwareVisibility = hslFalse;
// {{ 1307 1 0 "b61bc61c_ffe2_41e4_b5c9e26898021975" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
o_bool_LabwareVisibility = hslTrue;
// {{ 1309 1 0 "b61bc61c_ffe2_41e4_b5c9e26898021975" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 5 "LABWARE_GetVisibility" "End"
}
// }} ""
// {{{ 5 "LABWARE_IsContainersConnected" "Begin"
function LABWARE_IsContainersConnected( device & Instrument, sequence i_seq_Labware, variable & o_bool_ConnectedContainer ) void {
// }} ""
private variable strFunctionName;
private variable str_LabID;
private variable bool_SequenceValid;
private variable str_PosID;
// {{ 5 "LABWARE_IsContainersConnected" "InitLocals"
o_bool_ConnectedContainer = 0;
// }} ""
// {{ 1311 1 0 "bc1ddf32_6b67_43cd_9974a389cffa8965" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1312 1 0 "3b76f03d_dc38_4e16_83acbbb5daa5e856" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 1314 1 0 "5606581a_53a2_4e76_97b153ae7f033f0b" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 1315 1 0 "6116021b_5f88_4346_8dfb44d5f04c22a7" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 1316 1 0 "bea6861b_a0d3_4a05_a0559136647c6156" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 1317 1 0 "6116021b_5f88_4346_8dfb44d5f04c22a7" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1318 1 0 "bc1ddf32_6b67_43cd_9974a389cffa8965" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1319 1 0 "ef939abd_213d_4591_bd5fbdf992b89c46" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_bool_ConnectedContainer = 0;
// }} ""
{
object objRackDataParams;
object objDecklayout;
object objLabware;
object objTemplate;
object objRack;
object objRack4;
object objEditLabware5;

objRackDataParams.CreateObject("HXPARAMSLib.HxPars");
objDecklayout = Instrument.GetDeckLayoutObject();
objLabware = objDecklayout.Labware(str_LabID);

objLabware.GetObject("ITemplateDeckData", objTemplate);
objLabware.GetObject("IRectRack4", objRack4);
objLabware.GetObject("IRectRack", objRack);
objLabware.GetObject("IEditLabware5", objEditLabware5);

//objRack4.GetRackData(objRackDataParams);
//bool_ConectedCarrier = objRackDataParams.Item1("ConnectedCtr");
o_bool_ConnectedContainer = objRack4.ConnectedCtr();

objRackDataParams.ReleaseObject();
objDecklayout.ReleaseObject();
objLabware.ReleaseObject();
objTemplate.ReleaseObject();
objRack.ReleaseObject();
objRack4.ReleaseObject();
objEditLabware5.ReleaseObject();
}
// {{ 1321 1 0 "bf7965c4_be6b_43a9_a35d76a121c7c524" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (o_bool_ConnectedContainer == 1)
{
// }} ""
o_bool_ConnectedContainer = hslTrue;
// {{ 1323 1 0 "bf7965c4_be6b_43a9_a35d76a121c7c524" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
o_bool_ConnectedContainer = hslFalse;
// {{ 1325 1 0 "bf7965c4_be6b_43a9_a35d76a121c7c524" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 5 "LABWARE_IsContainersConnected" "End"
}
// }} ""
// {{{ 5 "SEQ_GetDefaultSequence" "Begin"
function SEQ_GetDefaultSequence( device & Instrument, variable i_str_LabID, variable i_bool_SortByColumn, sequence & o_seq_DefaultSequence ) void {
// }} ""
private variable int_Increment;
private variable str_ErrorDescription;
private variable i;
private variable strFunctionName;
private variable bool_LabwareNotValid;
private variable int_TotalColumns;
private variable str_PosID;
private variable int_TotalRows;
private variable int_TotalPositions;
private variable int_Index;
private variable str_ConfigFilePath;
private variable str_HoleCount;
private variable str_DataType;
private variable bool_ValueFound;
private variable str_Value;
private variable int_StartingPosition;
private variable int_CurrentPosition;
// {{ 5 "SEQ_GetDefaultSequence" "InitLocals"
{ sequence __temp; o_seq_DefaultSequence = __temp; }
// }} ""
// {{{ 1327 1 0 "c77c20e7_c80d_4497_8adbc2cffd0d2bfd" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
SeqRemoveAll(o_seq_DefaultSequence);
// }} ""
// {{ 1328 1 0 "65afabf7_8f40_4154_9dce337ab501f85a" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
int_TotalRows = 0;
// }} ""
// {{ 1329 1 0 "2918244f_4f5a_4bd8_8a8d4fa02a41c52e" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
int_TotalColumns = 0;
// }} ""
// {{ 1330 1 0 "64679526_4185_4ffe_af162615d2d61cd7" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
int_Index = 0;
// }} ""
// {{ 1331 1 0 "18508f3a_1487_4d23_880a3aeec76ac764" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
int_Increment = 0;
// }} ""
// {{{ 1332 1 0 "3e0cfe22_b609_4550_8e4327e88d4229c1" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
bool_LabwareNotValid = DevIsValidLabwareForCurrentDeckLayout(Instrument, i_str_LabID);
// }} ""
// {{ 1333 1 0 "06885b8d_6d47_44f7_87c48afa10405e74" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_LabwareNotValid == 0)
{
// }} ""
// {{{ 1334 1 0 "48814189_dc22_41fb_9efacde8b07708a0" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_ErrorDescription = StrConcat8(Translate(""), Translate(""), Translate("Labware ID: '"), i_str_LabID, Translate("' is not known on the deck layout"), Translate(""), Translate(""), Translate(""));
// }} ""
// {{{ 1335 1 0 "21766ac0_19aa_4905_b549e6c1128e4eb3" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, str_ErrorDescription);
// }} ""
// {{ 1336 1 0 "06885b8d_6d47_44f7_87c48afa10405e74" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1337 1 0 "5412a107_452f_46d5_a201300a0bb46480" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_ConfigFilePath = Translate("");
// }} ""
//Get Config File

{
   object objDeckLayout;

   objDeckLayout = Instrument.GetDeckLayoutObject();

   if(!objDeckLayout.IsNull())
   {
      object objLabware;

      onerror goto HandleLabwareError;
      objLabware = objDeckLayout.Labware(i_str_LabID);
      onerror goto 0;
      err.Clear();

      if(!objLabware.IsNull())
      {
         object objEditLabware5;

         objLabware.GetObject("IEditLabware5", objEditLabware5);

        str_ConfigFilePath = objEditLabware5.Filename;

         objEditLabware5.ReleaseObject();
         objDeckLayout.ReleaseObject();
         objLabware.ReleaseObject();
      }
   }

         // runtime error handling
      HandleLabwareError :
      {
        variable errorID;
        errorID=err.GetId();
        err.Clear();
         if(errorID != 0)
         {
            if (errorID==-1574764487)
            {
                Trace("LabwareID is  unknown.");
            }
            else
            {
                Trace("Unknown error occured.");
            }
         }
      }
}
// {{ 1339 1 0 "8885d8f0_5386_4875_aca43987b6466142" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 1340 1 0 "a40f9069_64d8_422b_84a724ea64e262e8" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ConfigFilePath, Translate("DataType"), str_DataType);
// }} ""
// {{ 1341 1 0 "a634b09b_7dd2_47d2_89332d6012a79b48" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_DataType == "3")
{
// }} ""
// {{{ 1342 1 0 "ea0b15b2_6eab_494b_a2ef02f78d86ac5f" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ConfigFilePath, Translate("DataType"), str_DataType);
// }} ""
// {{{ 1343 1 0 "0d07ef84_a372_4a2a_968f9be0d224cbb7" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ConfigFilePath, Translate("HoleCnt"), str_HoleCount);
// }} ""
// {{{ 1344 1 0 "cca22f80_0ec4_49a2_bff6d8f1d875f0cf" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_TotalPositions = StrIVal(str_HoleCount);
// }} ""
// {{ 1345 1 0 "a634b09b_7dd2_47d2_89332d6012a79b48" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
{
object objRackDataParams;
object objDecklayout;
object objLabware;
object objTemplate;
object objRack;
object objRack4;
object objEditLabware5;

objRackDataParams.CreateObject("HXPARAMSLib.HxPars");
objDecklayout = Instrument.GetDeckLayoutObject();
objLabware = objDecklayout.Labware(i_str_LabID);

objLabware.GetObject("ITemplateDeckData", objTemplate);
objLabware.GetObject("IRectRack4", objRack4);
objLabware.GetObject("IRectRack", objRack);
objLabware.GetObject("IEditLabware5", objEditLabware5);

objRack4.GetRackData(objRackDataParams);
int_TotalRows = objRack4.Rows();
int_TotalColumns = objRack4.Columns();
int_Index = objRack4.Index();
int_Increment = objRack4.Increment();

objRackDataParams.ReleaseObject();
objDecklayout.ReleaseObject();
objLabware.ReleaseObject();
objTemplate.ReleaseObject();
objRack.ReleaseObject();
objRack4.ReleaseObject();
objEditLabware5.ReleaseObject();
}
// {{ 1347 1 0 "0672d657_e11c_467a_82ab04683421f1a4" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_TotalPositions = int_TotalColumns * int_TotalRows;
// }} ""
// {{ 1348 1 0 "a634b09b_7dd2_47d2_89332d6012a79b48" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 1349 1 0 "59939118_9930_41c0_884b7253788088f1" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_ValueFound = FILE_GetDefinitionFileValue(str_ConfigFilePath, Translate("IX.First"), str_Value);
// }} ""
// {{ 1350 1 0 "5d42de6f_46f6_4ddd_a4f090d2c4002ba9" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_ValueFound == 1)
{
// }} ""
// {{{ 1351 1 0 "a4576471_aa43_40b6_94c6b9863b157839" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_StartingPosition = StrIVal(str_Value);
// }} ""
// {{ 1352 1 0 "dabca5e6_f048_4b81_a2261c6dd29432c5" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_StartingPosition = int_StartingPosition - 1;
// }} ""
// {{ 1353 1 0 "5d42de6f_46f6_4ddd_a4f090d2c4002ba9" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 1354 1 0 "ea398f1c_79ba_494b_9a859a6a51db8b34" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
int_StartingPosition = 0;
// }} ""
// {{ 1355 1 0 "5d42de6f_46f6_4ddd_a4f090d2c4002ba9" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1356 1 0 "d8760cd5_afd4_4653_94767a371d25f889" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(i = 0; i < int_TotalPositions;)
{
i = i + 1;
// }} ""
// {{ 1357 1 0 "d3e6be97_1ecd_40ee_939be082a2015cbe" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_Index == 1)
{
// }} ""
// {{{ 1358 1 0 "44694204_ef16_4a39_b19464a9af17b423" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
ANC::Convert_Numbers_to_Alpha_Numeric(i_bool_SortByColumn, i, int_TotalRows, int_TotalColumns, str_PosID);
// }} ""
// {{ 1359 1 0 "d3e6be97_1ecd_40ee_939be082a2015cbe" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 1360 1 0 "c57a87ec_cd86_4d89_bcb39543e2fbe394" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_CurrentPosition = int_StartingPosition + i;
// }} ""
// {{{ 1361 1 0 "df3c30cc_45f1_40d0_a246f49875c4f2d4" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_PosID = StrConcat2(int_CurrentPosition, Translate(""));
// }} ""
// {{ 1362 1 0 "d3e6be97_1ecd_40ee_939be082a2015cbe" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 1363 1 0 "c38a3b15_5d4d_4f3a_b293fcf28817cfa6" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
SeqAdd(o_seq_DefaultSequence, i_str_LabID, str_PosID);
// }} ""
// {{ 1364 1 0 "d8760cd5_afd4_4653_94767a371d25f889" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 1365 1 0 "4764b491_476f_4044_bf7ee60cf14f12a1" "{B31F353A-5D80-11d4-A5EB-0050DA737D89}"
o_seq_DefaultSequence.SetCurrentPosition(1);
// }} ""
// {{{ 5 "SEQ_GetDefaultSequence" "End"
}
// }} ""
// {{{ 5 "SEQ_GetDefaultSequenceForLabware" "Begin"
private function SEQ_GetDefaultSequenceForLabware( device & Instrument, variable i_str_LabwareID, sequence & o_seq_DefaultSequence ) void {
// }} ""
private variable int_Return;
// {{ 5 "SEQ_GetDefaultSequenceForLabware" "InitLocals"
{ sequence __temp; o_seq_DefaultSequence = __temp; }
// }} ""
// {{{ 1367 1 0 "b1401035_d14e_47cf_956f672a1deb8546" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
SeqRemoveAll(o_seq_DefaultSequence);
// }} ""
// {{ 1368 1 0 "a497de4a_c219_46f6_a49b169806bd7e4d" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
int_Return = 0;
// }} ""
{
   object objDeckLayout;
   object objLabware;
   object objEditLabware6;
   object objSequence;

   objDeckLayout = Instrument.GetDeckLayoutObject();
   //objSequence = objDeckLayout.GetObject(o_seq_DefaultSequence);

   if(!objDeckLayout.IsNull())
   {
      objLabware = objDeckLayout.Labware(i_str_LabwareID);
      if(!objLabware.IsNull())
      {
         
         objLabware.GetObject("IEditLabware6", objEditLabware6);
         objEditLabware6.DefaultSequence(objSequence);
         //int_Return = objEditLabware6.DefaultSequenceEdited();
         //int_Return = objEditLabware6.DefaultSequenceValid();
      }
   }

   objDeckLayout.ReleaseObject();
   objEditLabware6.ReleaseObject();
   objLabware.ReleaseObject();
}
//Trace("Return:  ",int_Return);
// {{{ 5 "SEQ_GetDefaultSequenceForLabware" "End"
}
// }} ""
// {{{ 5 "SEQ_ReloadSequence" "Begin"
function SEQ_ReloadSequence( device & Instrument, sequence & io_seq_SequenceToReload ) void {
// }} ""
private variable str_SequenceName;
// {{ 5 "SEQ_ReloadSequence" "InitLocals"
// }} ""
// {{{ 1371 1 0 "265def99_cb86_4a81_abd1516a39a6056f" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_SequenceName = SeqGetName(io_seq_SequenceToReload);
// }} ""
{
   object objDeckLayout;
   object objEditDeckLayout8;

   objDeckLayout = Instrument.GetDeckLayoutObject();

   if(!objDeckLayout.IsNull())
   {
      objDeckLayout.GetObject("IEditDeckLayout8", objEditDeckLayout8);
      objEditDeckLayout8.ReloadSequence(str_SequenceName);
   }

   objDeckLayout.ReleaseObject();
   objEditDeckLayout8.ReleaseObject();
}
// {{{ 5 "SEQ_ReloadSequence" "End"
}
// }} ""
// {{{ 5 "TEMPLATE_GetConfigFile" "Begin"
function TEMPLATE_GetConfigFile( device & Instrument, sequence i_seq_Labware, variable & o_str_ConfigFilePath ) void {
// }} ""
private variable str_TemplateSite;
private variable strFunctionName;
private variable str_LabID;
private variable str_Template;
private variable str_PosID;
private variable bool_SequenceValid;
// {{ 5 "TEMPLATE_GetConfigFile" "InitLocals"
o_str_ConfigFilePath = 0;
// }} ""
// {{ 1374 1 0 "c211786e_47e3_4694_8b484d87fd5251e5" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1375 1 0 "6c490621_7789_4dc1_83dd855fcd9a4dba" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 1377 1 0 "a7ba3b4f_835a_4ca0_a3631d90c3c98601" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 1378 1 0 "be5f95eb_7dae_4b73_8a8ffc54e291e5c5" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 1379 1 0 "418cdb7a_c10d_4e55_9defbe18ae95ed2c" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 1380 1 0 "be5f95eb_7dae_4b73_8a8ffc54e291e5c5" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1381 1 0 "c211786e_47e3_4694_8b484d87fd5251e5" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1382 1 0 "7d7f0afa_3a10_4fb8_83eff03f1dcf184e" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_str_ConfigFilePath = Translate("");
// }} ""
// {{{ 1383 1 0 "a279b698_fc28_41a0_b85f418a62235d05" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetCarrierAndSiteID(Instrument, i_seq_Labware, str_Template, str_TemplateSite);
// }} ""
//Get Config File

{
   object objDeckLayout;

   objDeckLayout = Instrument.GetDeckLayoutObject();

   if(!objDeckLayout.IsNull())
   {
      object objLabware;

      onerror goto HandleLabwareError;
      objLabware = objDeckLayout.Labware(str_Template);
      onerror goto 0;
      err.Clear();

      if(!objLabware.IsNull())
      {
         object objEditLabware5;

         objLabware.GetObject("IEditLabware5", objEditLabware5);

        o_str_ConfigFilePath = objEditLabware5.Filename;

         objEditLabware5.ReleaseObject();
         objDeckLayout.ReleaseObject();
         objLabware.ReleaseObject();
      }
   }

         // runtime error handling
      HandleLabwareError :
      {
        variable errorID;
        errorID=err.GetId();
        err.Clear();
         if(errorID != 0)
         {
            if (errorID==-1574764487)
            {
                Trace("LabwareID is  unknown.");
            }
            else
            {
                Trace("Unknown error occured.");
            }
         }
      }
}
// {{{ 5 "TEMPLATE_GetConfigFile" "End"
}
// }} ""
// {{{ 5 "TEMPLATE_GetTemplateOrigin" "Begin"
function TEMPLATE_GetTemplateOrigin( device & Instrument, sequence i_seq_Labware, variable & o_flt_X_Coord, variable & o_flt_Y_Coord, variable & o_flt_Z_Coord ) void {
// }} ""
private variable str_TemplateSite;
private variable flt_NotUsed;
private variable strFunctionName;
private variable str_LabID;
private variable str_Template;
private variable str_PosID;
private variable bool_SequenceValid;
// {{ 5 "TEMPLATE_GetTemplateOrigin" "InitLocals"
o_flt_X_Coord = 0;
o_flt_Y_Coord = 0;
o_flt_Z_Coord = 0;
// }} ""
// {{ 1389 1 0 "7d2acab0_7ff8_4b3d_bec4dc3ec8cb0e41" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1390 1 0 "5493d386_ffd4_4450_aecbec35034e5611" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 1392 1 0 "3bd4c9b6_161f_4fa6_90f7448f362ee9a0" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 1393 1 0 "a2affdb7_1331_480e_8edaa3bb27a66ffb" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 1394 1 0 "eaab8ff1_6691_4c32_9df6a960b0155cb5" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 1395 1 0 "a2affdb7_1331_480e_8edaa3bb27a66ffb" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1396 1 0 "7d2acab0_7ff8_4b3d_bec4dc3ec8cb0e41" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 1397 1 0 "605f902f_3b9a_4632_b4a12dbc91280446" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetCarrierAndSiteID(Instrument, i_seq_Labware, str_Template, str_TemplateSite);
// }} ""
// {{ 1398 1 0 "4e82fc8c_92f3_492f_b02ecbaf8f9225f4" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_X_Coord = 0.0;
// }} ""
// {{ 1399 1 0 "c08d1847_88e4_4cb8_8860b24c2a717595" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_Y_Coord = 0.0;
// }} ""
// {{ 1400 1 0 "b1c40b88_f43a_4bea_bcfdf3816003806b" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_Z_Coord = 0.0;
// }} ""
// {{{ 1401 1 0 "00e89033_feaf_40f1_9c6ad4c5185c57ab" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DevGetLabwarePosition(Instrument, str_Template, o_flt_X_Coord, o_flt_Y_Coord, o_flt_Z_Coord, flt_NotUsed);
// }} ""
// {{{ 5 "TEMPLATE_GetTemplateOrigin" "End"
}
// }} ""
// {{{ 5 "_CalcualteOffsetHeight" "Begin"
private function _CalcualteOffsetHeight( variable i_flt_WellAngle, variable i_flt_YOffset, variable & o_flt_ZOffset ) void {
// }} ""
private variable flt_Calculation1;
private variable flt_Calculation2;
private variable flt_Radians;
private variable flt_Pi;
// {{ 5 "_CalcualteOffsetHeight" "InitLocals"
o_flt_ZOffset = 0;
// }} ""
// {{ 1408 1 0 "aa7da633_e7cd_4c76_8b6ea34ffe9c30f7" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_Pi = 3.14159265359;
// }} ""
// {{ 1409 1 0 "a91f4779_b64d_4a7e_bafd0d7a09abe9e0" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_Radians = 0.0;
// }} ""
flt_Radians = i_flt_WellAngle * (flt_Pi / 180);
// {{{ 1411 1 0 "5b23d1eb_b772_4f48_b83620fd2d730362" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_Calculation1 = MthTan(flt_Radians);
// }} ""
// {{ 1412 1 0 "ec6fc824_ae38_4258_91fac1fe480f4350" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Calculation2 = flt_Calculation1 * i_flt_YOffset;
// }} ""
// {{{ 1413 1 0 "ba018251_5a00_406d_bc7f76696831d888" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
o_flt_ZOffset = MthRound(flt_Calculation2, 1);
// }} ""
// {{{ 5 "_CalcualteOffsetHeight" "End"
}
// }} ""
// {{{ 5 "_CalculateWellAngle" "Begin"
private function _CalculateWellAngle( variable i_flt_BottomWellSegment_Height, variable i_flt_BottomWellSegment_TopWidth, variable i_flt_BottomWellSegment_BottomWidth, variable & o_flt_BottomWellSegment_Angle ) void {
// }} ""
private variable flt_Angle;
private variable flt_BottomRadius;
private variable flt_Calculation;
private variable flt_Pi;
private variable flt_WellRadius;
// {{ 5 "_CalculateWellAngle" "InitLocals"
o_flt_BottomWellSegment_Angle = 0;
// }} ""
// {{ 1415 1 0 "58174418_404d_4ab2_86aee90a09806818" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_Pi = 3.14159265359;
// }} ""
// {{ 1416 1 0 "10b7e402_70d0_4c48_8673e73dd6b5e9f7" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_BottomRadius = 0.0;
// }} ""
// {{ 1417 1 0 "db759ebd_8c1c_4617_9792a784b14035e4" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (i_flt_BottomWellSegment_BottomWidth > 0)
{
// }} ""
// {{ 1418 1 0 "abf150e2_9bcd_46ab_85b2e504e8448448" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_BottomRadius = i_flt_BottomWellSegment_BottomWidth / (2 * 1.0);
// }} ""
// {{ 1419 1 0 "db759ebd_8c1c_4617_9792a784b14035e4" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1420 1 0 "59d3c237_8a40_4734_89192cd26aee90c8" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_WellRadius = i_flt_BottomWellSegment_TopWidth / (2 * 1.0);
// }} ""
// {{ 1421 1 0 "713dbe3c_5286_4643_be81def895c0cd9f" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (flt_WellRadius > flt_BottomRadius)
{
// }} ""
// {{ 1422 1 0 "40ea317b_e824_4d34_9bc959fd4a9723a1" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_WellRadius = flt_WellRadius - flt_BottomRadius;
// }} ""
// {{ 1423 1 0 "713dbe3c_5286_4643_be81def895c0cd9f" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1424 1 0 "0e67227e_7cff_4e6c_9ea1fb251cc807ec" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Calculation = i_flt_BottomWellSegment_Height / (flt_WellRadius * 1.0);
// }} ""
// {{{ 1425 1 0 "b5c9715f_cbc5_4d1d_822d9fb9ec606e3f" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_Angle = MthATan(flt_Calculation);
// }} ""
flt_Angle = flt_Angle * (180.0 / flt_Pi);
// {{{ 1427 1 0 "fb13c1b9_0f79_4f12_8c6ea19a857efeb9" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
o_flt_BottomWellSegment_Angle = MthRound(flt_Angle, 1);
// }} ""
// {{{ 5 "_CalculateWellAngle" "End"
}
// }} ""
// {{{ 5 "_ConvertToFloat" "Begin"
private function _ConvertToFloat( variable iVariable, variable & oVariable ) void {
// }} ""
private variable str_Variable;
// {{ 5 "_ConvertToFloat" "InitLocals"
oVariable = 0;
// }} ""
// {{{ 1429 1 0 "622e7e0e_3376_4906_9bae1894586619a1" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_Variable = StrConcat2(iVariable, Translate(""));
// }} ""
// {{{ 1430 1 0 "83c6edca_242e_493b_a38089332ac21aa6" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
oVariable = StrFVal(str_Variable);
// }} ""
// {{{ 5 "_ConvertToFloat" "End"
}
// }} ""
// {{{ 5 "_ConvertToInteger" "Begin"
private function _ConvertToInteger( variable iVariable, variable & oVariable ) void {
// }} ""
private variable str_Variable;
// {{ 5 "_ConvertToInteger" "InitLocals"
oVariable = 0;
// }} ""
// {{{ 1432 1 0 "2aeb9ed9_2d6c_4210_968c8bd8ee1ab66c" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_Variable = StrConcat2(iVariable, Translate(""));
// }} ""
// {{{ 1433 1 0 "4bdbf79d_cd2c_4e19_8d55cf8190412563" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
oVariable = StrIVal(str_Variable);
// }} ""
// {{{ 5 "_ConvertToInteger" "End"
}
// }} ""
// {{{ 5 "_FunctionError" "Begin"
private function _FunctionError( variable i_str_FunctionName, variable i_str_ErrorDescription ) void {
// }} ""
private variable int_CutNum;
private variable str_ErrorDescription;
private variable int_Length;
private variable strFunctionName;
private variable int_Count;
// {{ 5 "_FunctionError" "InitLocals"
// }} ""
// {{{ 1435 1 0 "fba91acb_69ab_44d8_899097b3fe5b3b02" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Count = StrReverseFind(i_str_FunctionName, Translate(":"));
// }} ""
// {{ 1436 1 0 "21d30552_14ef_41b4_a78d1270ad63d2dc" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_Count = int_Count + 1;
// }} ""
// {{{ 1437 1 0 "ee7bcc49_3f9c_49b6_8b8b8381934cf0f2" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Length = StrGetLength(i_str_FunctionName);
// }} ""
// {{ 1438 1 0 "db4a32dd_f80b_4cef_b0c2fb69a52b2d95" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_CutNum = int_Length - int_Count;
// }} ""
// {{{ 1439 1 0 "044743f7_56ef_4a21_8068383f374bf059" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
strFunctionName = StrMid(i_str_FunctionName, int_Count, int_CutNum);
// }} ""
// {{{ 1440 1 0 "4875c113_bb1f_4ee0_9c927691d8068726" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_ErrorDescription = StrConcat8(strFunctionName, Translate("\n\n"), i_str_ErrorDescription, Translate(""), Translate(""), Translate(""), Translate(""), Translate(""));
// }} ""
// {{{ 1441 1 0 "6885aeb9_c005_4718_aae862b570de3f62" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
ErrRaise(101, str_ErrorDescription);
// }} ""
// {{{ 5 "_FunctionError" "End"
}
// }} ""
// {{{ 5 "_GetLabwareOrigin" "Begin"
private function _GetLabwareOrigin( device & Instrument, variable i_str_LabID, variable & o_flt_X_Coord, variable & o_flt_Y_Coord, variable & o_flt_Z_Coord ) void {
// }} ""
private variable flt_RackBase;
private variable flt_BoundaryX;
private variable flt_BoundaryY;
private variable flt_RackWidthX;
private variable flt_RackWidthY;
// {{ 5 "_GetLabwareOrigin" "InitLocals"
o_flt_X_Coord = 0;
o_flt_Y_Coord = 0;
o_flt_Z_Coord = 0;
// }} ""
// {{ 1443 1 0 "d1f0cff6_2ace_487a_a765ceb3309c6a37" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_X_Coord = 0.0;
// }} ""
// {{ 1444 1 0 "cd6f158e_6669_4275_98d3b05cc020ff93" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_Y_Coord = 0.0;
// }} ""
// {{ 1445 1 0 "39cf774f_8548_4272_88ee2dd37b6e9c08" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_Z_Coord = 0.0;
// }} ""
// {{ 1446 1 0 "dfcd0fa7_16ac_4014_a2e018abe8b1daa5" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_BoundaryX = 0.0;
// }} ""
// {{ 1447 1 0 "80266a1b_03ac_4d44_985bf666b1a19f2b" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_BoundaryY = 0.0;
// }} ""
// {{ 1448 1 0 "8b75a4f8_5d82_4a34_8036b2a958ca4b6a" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_RackWidthX = 0.0;
// }} ""
// {{ 1449 1 0 "13b4b8c3_9ce2_46f8_810ced8365b34c75" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_RackWidthY = 0.0;
// }} ""
// {{ 1450 1 0 "e67ab11f_b803_4ecd_b7f7166ed204c09f" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_RackBase = 0.0;
// }} ""
{
object objRackDataParams;
object objDecklayout;
object objLabware;
object objTemplate;
object objRack;
object objRack4;
object objEditLabware5;

objRackDataParams.CreateObject("HXPARAMSLib.HxPars");
objDecklayout = Instrument.GetDeckLayoutObject();
objLabware = objDecklayout.Labware(i_str_LabID);

objLabware.GetObject("ITemplateDeckData", objTemplate);
objLabware.GetObject("IRectRack4", objRack4);
objLabware.GetObject("IRectRack", objRack);
objLabware.GetObject("IEditLabware5", objEditLabware5);

objRack4.GetRackData(objRackDataParams);
flt_BoundaryX = objRackDataParams.Item1("Labwr_Bndry1X");
flt_BoundaryY = objRackDataParams.Item1("Labwr_Bndry1Y");
flt_RackWidthX = objRackDataParams.Item1("Labwr_XDim");
flt_RackWidthY = objRackDataParams.Item1("Labwr_YDim");
flt_RackBase = objRack4.RackBase();


objRackDataParams.ReleaseObject();
objDecklayout.ReleaseObject();
objLabware.ReleaseObject();
objTemplate.ReleaseObject();
objRack.ReleaseObject();
objRack4.ReleaseObject();
objEditLabware5.ReleaseObject();
}
// {{ 1452 1 0 "02cbe165_494d_4912_84acb66ac7bf8cc8" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_X_Coord = flt_BoundaryX;
// }} ""
// {{ 1453 1 0 "c2c9729f_ab6c_4d73_941291b7e6c58a6f" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_Y_Coord = flt_BoundaryY;
// }} ""
// {{ 1454 1 0 "797678e7_db67_4910_b5e7514a426e5152" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_Z_Coord = flt_RackBase;
// }} ""
// {{{ 1455 1 0 "a7e29799_e22c_4f68_9042dcd7b804551d" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
o_flt_Z_Coord = MthRound(o_flt_Z_Coord, 1);
// }} ""
// {{{ 5 "_GetLabwareOrigin" "End"
}
// }} ""
// {{{ 5 "_GetLabwareWL" "Begin"
private function _GetLabwareWL( device & Instrument, variable i_str_LabID, variable & o_flt_LabwareWidth, variable & o_flt_LabwareLength ) void {
// }} ""
private variable flt_RackWidthX;
private variable flt_RackWidthY;
// {{ 5 "_GetLabwareWL" "InitLocals"
o_flt_LabwareWidth = 0;
o_flt_LabwareLength = 0;
// }} ""
// {{ 1457 1 0 "e35e44ef_152f_4674_9aa8ed7800baea70" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_LabwareWidth = 0.0;
// }} ""
// {{ 1458 1 0 "375bcdd0_6e84_47aa_b74ee278a1e9db7e" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_LabwareLength = 0.0;
// }} ""
// {{ 1459 1 0 "16b1f675_3885_43f9_b7624a8ba94d3f71" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_RackWidthX = 0.0;
// }} ""
// {{ 1460 1 0 "782af942_6414_4d9a_bf17c70f9420283f" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_RackWidthY = 0.0;
// }} ""
{
object objRackDataParams;
object objDecklayout;
object objLabware;
object objTemplate;
object objRack;
object objRack4;
object objEditLabware5;

objRackDataParams.CreateObject("HXPARAMSLib.HxPars");
objDecklayout = Instrument.GetDeckLayoutObject();
objLabware = objDecklayout.Labware(i_str_LabID);

objLabware.GetObject("ITemplateDeckData", objTemplate);
objLabware.GetObject("IRectRack4", objRack4);
objLabware.GetObject("IRectRack", objRack);
objLabware.GetObject("IEditLabware5", objEditLabware5);

objRack4.GetRackData(objRackDataParams);
o_flt_LabwareLength = objRackDataParams.Item1("Labwr_XDim");
o_flt_LabwareWidth = objRackDataParams.Item1("Labwr_YDim");

objRackDataParams.ReleaseObject();
objDecklayout.ReleaseObject();
objLabware.ReleaseObject();
objTemplate.ReleaseObject();
objRack.ReleaseObject();
objRack4.ReleaseObject();
objEditLabware5.ReleaseObject();
}
// {{{ 5 "_GetLabwareWL" "End"
}
// }} ""
// {{{ 5 "_GetSequencePosition" "Begin"
private function _GetSequencePosition( device & Instrument, sequence i_seq_LabwareSequence, variable & o_str_LabID, variable & o_str_PosID ) variable {
// }} ""
private variable bool_SequenceValid;
// {{ 5 "_GetSequencePosition" "InitLocals"
o_str_LabID = 0;
o_str_PosID = 0;
// }} ""
// {{ 1463 1 0 "58653a24_e762_40f2_ae722acdc01c184e" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_SequenceValid = 1;
// }} ""
// {{ 1464 1 0 "0eded145_632a_45ac_82fd4a21893cd6a1" "{3293659E-F71E-472f-AFB4-6A674E32B114}"
onerror goto errLabel_7AF290DCA46C40d188FDA2A6B2903BB8 ;
err.Clear();
// }} ""
// {{{ 1465 1 0 "088dffda_21f9_43a3_99b2fe16da57bb10" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
o_str_LabID = SeqGetLabwareId(i_seq_LabwareSequence);
// }} ""
// {{{ 1466 1 0 "3412b37c_7f18_4ff7_90d1535d56fceca8" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
o_str_PosID = SeqGetPositionId(i_seq_LabwareSequence);
// }} ""
// {{ 1467 1 0 "c044347c_2101_4570_8debcd3a42fe36d5" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (o_str_LabID == "")
{
// }} ""
// {{ 1468 1 0 "f502fa44_ff34_4934_a903c6379502917e" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_SequenceValid = 0;
// }} ""
// {{ 1469 1 0 "c044347c_2101_4570_8debcd3a42fe36d5" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1470 1 0 "0eded145_632a_45ac_82fd4a21893cd6a1" "{3293659E-F71E-472f-AFB4-6A674E32B114}"
errLabel_7AF290DCA46C40d188FDA2A6B2903BB8 : {}
onerror goto 0;
if (err.GetId() != 0)   /* skip handler if no error */
{
// }} ""
// {{ 1471 1 0 "04462609_938a_4f6d_b52195c5fa7606a0" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bool_SequenceValid = 0;
// }} ""
// {{ 1472 1 0 "0eded145_632a_45ac_82fd4a21893cd6a1" "{3293659E-F71E-472f-AFB4-6A674E32B114}"
}   /* end if from skip handler if no error */
// }} ""
// {{{ 1473 1 0 "e93084ba_5505_4795_9c081cbec0fded18" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return (bool_SequenceValid);
// }} ""
// {{{ 5 "_GetSequencePosition" "End"
}
// }} ""
// {{{ 5 "_RemoveTruncatedSequencePositions" "Begin"
private function _RemoveTruncatedSequencePositions( device & Instrument, sequence & io_Sequence ) void {
// }} ""
private variable i;
private variable int_TotalSequencePositions;
private variable str_LabID;
private variable str_PosID;
private sequence seq_AdjustedSequence;
// {{ 5 "_RemoveTruncatedSequencePositions" "InitLocals"
// }} ""
// {{{ 1483 1 0 "ad0d4d78_7af8_4eb0_9230599d724f1ae1" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_TotalSequencePositions = SeqGetTotal(io_Sequence);
// }} ""
// {{{ 1484 1 0 "13498ee9_657e_4574_b113a26993c95a51" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
SeqRemoveAll(seq_AdjustedSequence);
// }} ""
// {{ 1485 1 0 "38d449a6_8d10_46c1_b2b655e719d6d810" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(i = 0; i < int_TotalSequencePositions;)
{
i = i + 1;
// }} ""
// {{{ 1486 1 0 "ad45454d_9185_43ee_b0a61d29837c553d" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_LabID = SeqGetLabwareId(io_Sequence);
// }} ""
// {{{ 1487 1 0 "312948f6_ada5_4060_9433e604ab4369d9" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_PosID = SeqGetPositionId(io_Sequence);
// }} ""
// {{{ 1488 1 0 "c9392821_7949_4bee_b72b43b8c472445a" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
SeqIncrement(io_Sequence, 1);
// }} ""
// {{ 1489 1 0 "41868a9d_5e62_4e8b_b01b6acd66f5e79e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_LabID != "")
{
// }} ""
// {{ 1490 1 0 "eda44de4_2325_4f91_8d0afd96b9f8578e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_PosID != "")
{
// }} ""
// {{{ 1491 1 0 "68f12f21_ebcb_4e19_ba19dca4e8241e20" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
SeqAdd(seq_AdjustedSequence, str_LabID, str_PosID);
// }} ""
// {{ 1492 1 0 "eda44de4_2325_4f91_8d0afd96b9f8578e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1493 1 0 "41868a9d_5e62_4e8b_b01b6acd66f5e79e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1494 1 0 "38d449a6_8d10_46c1_b2b655e719d6d810" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 1495 1 0 "d45beffe_9793_4282_ae20061d86a34139" "{B31F353A-5D80-11d4-A5EB-0050DA737D89}"
seq_AdjustedSequence.SetCurrentPosition(1);
// }} ""
// {{{ 1496 1 0 "c04b3564_d8fb_49af_80ac6d547d68da27" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
SeqCopySequence(io_Sequence, seq_AdjustedSequence);
// }} ""
// {{{ 5 "_RemoveTruncatedSequencePositions" "End"
}
// }} ""
// {{{ 5 "ADJUST_AddContainerToPosition" "Begin"
function ADJUST_AddContainerToPosition( device & Instrument, sequence i_seq_LabwareToChange, variable i_str_NewContainerFile, variable i_flt_OffsetX, variable i_flt_OffsetY, variable i_flt_OffsetZ ) void {
// }} ""
private variable int_CutNum;
private variable int_Length;
private variable strFunctionName;
private variable str_LabID;
private variable strFunctionName_Cut;
private variable int_Count;
private variable str_PosID;
private variable bool_SequenceValid;
private variable bln_FileExists;
private variable str_Extension;
private variable str_FileName;
private variable flt_ContainerXOffset;
private variable flt_ContainerYOffset;
private variable flt_ContainerBaseOffset;
private variable str_Return;
private variable str_LabwareConfigFilePath;
private variable int_SingleContainer;
private sequence seq_Temp;
private variable int_ContainerIndex;
private variable str_OffsetX;
private variable str_OffsetY;
private variable str_OffsetZ;
private variable flt_Y_Offset;
private variable flt_Z_Offset;
private variable flt_X_Offset;
// {{ 5 "ADJUST_AddContainerToPosition" "InitLocals"
// }} ""
// {{ 51 1 0 "f94a43cc_1136_4eee_b7e673bd9be74c76" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 52 1 0 "2e46d9ed_f8d9_4c94_abb445816e9b62e0" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 54 1 0 "0bd2d112_574c_4f63_83877d1e5cd8ef22" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Count = StrReverseFind(strFunctionName, Translate(":"));
// }} ""
// {{ 55 1 0 "85bf953c_9a26_4d6f_abcda2c94819ae7b" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_Count = int_Count + 1;
// }} ""
// {{{ 56 1 0 "0a9fdf19_4eca_4a6f_aafca265f13eca4f" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Length = StrGetLength(strFunctionName);
// }} ""
// {{ 57 1 0 "05b485d7_3e00_44e2_a2a32408cb9a9e42" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_CutNum = int_Length - int_Count;
// }} ""
// {{{ 58 1 0 "807484fd_0425_4bbd_a565e8ef83aa5e44" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
strFunctionName_Cut = StrMid(strFunctionName, int_Count, int_CutNum);
// }} ""
Trace("===========================================================================");
Trace(strFunctionName_Cut," - START");
Trace("");
// {{ 60 1 0 "f94a43cc_1136_4eee_b7e673bd9be74c76" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 61 1 0 "6152ce29_38ac_4e02_9facc44839d24037" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 62 1 0 "b4bc651c_5d88_4b78_ab5d14d6b9bc6806" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 64 1 0 "b1012efa_7b78_4597_b1acdd451f8890e7" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_LabwareToChange, str_LabID, str_PosID);
// }} ""
// {{ 65 1 0 "01ad280f_68d7_4882_9ed288c11d75c42e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 66 1 0 "e52eb9f5_e8fe_452f_b5932117f9f7540e" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 67 1 0 "01ad280f_68d7_4882_9ed288c11d75c42e" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 68 1 0 "6152ce29_38ac_4e02_9facc44839d24037" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 69 1 0 "16e97883_5eb5_4028_beac49e6ab55e7f9" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 70 1 0 "8646e154_881f_4a8c_bbb775419eada571" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
bln_FileExists = HSLExtensions::File::Exists(i_str_NewContainerFile);
// }} ""
// {{ 71 1 0 "7298d11a_5c38_4dad_ba9e95d93466cb93" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bln_FileExists == 0)
{
// }} ""
Trace(i_str_NewContainerFile,":  FILE DOESN'T EXIST!");
// {{ 73 1 0 "d7f26674_30bf_4ae9_a5fc53d8c8f719e8" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
Trace("");
Trace(strFunctionName_Cut," - FINISH");
Trace("===========================================================================");
// {{ 75 1 0 "d7f26674_30bf_4ae9_a5fc53d8c8f719e8" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 76 1 0 "cb10d51c_226a_42ff_a599b27ea6332d2f" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return;
// }} ""
// {{ 77 1 0 "7298d11a_5c38_4dad_ba9e95d93466cb93" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 78 1 0 "002fa24d_e465_4cd6_9fc3a1ec8db93b48" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_Extension = HSLExtensions::File::GetFileExtension(i_str_NewContainerFile);
// }} ""
// {{ 79 1 0 "8244c082_0bc2_4e9e_8f8524303e4782b9" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_Extension != "ctr")
{
// }} ""
Trace(i_str_NewContainerFile,":  FILE NOT A CONTAINER FILE!");
// {{ 81 1 0 "aa7484d8_b94a_43a4_b1434ba61719ed75" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
Trace("");
Trace(strFunctionName_Cut," - FINISH");
Trace("===========================================================================");
// {{ 83 1 0 "aa7484d8_b94a_43a4_b1434ba61719ed75" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 84 1 0 "fec1b600_e4b1_4dd3_986f33682a75c7fb" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return;
// }} ""
// {{ 85 1 0 "8244c082_0bc2_4e9e_8f8524303e4782b9" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 86 1 0 "16e97883_5eb5_4028_beac49e6ab55e7f9" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 87 1 0 "3d4d89f0_7852_4ed3_86a8d3ff37337108" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetConfigFile(Instrument, i_seq_LabwareToChange, str_LabwareConfigFilePath);
// }} ""
// {{{ 88 1 0 "59655a6d_6a86_4051_a2988076c51f6799" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_LabwareConfigFilePath, Translate("SingleCntr"), str_Return);
// }} ""
// {{{ 89 1 0 "1fe582e1_9438_4e3e_9347b341b7598b87" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToInteger(str_Return, int_SingleContainer);
// }} ""
// {{ 90 1 0 "574cdc2b_dda2_41ac_ae616274e01d6f8a" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_SingleContainer == 0)
{
// }} ""
// {{{ 91 1 0 "ceb60b71_a951_484a_a8469e29d2cc7bab" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
SEQ_GetDefaultSequenceForLabware(Instrument, str_LabID, seq_Temp);
// }} ""
// {{{ 92 1 0 "a712ffcd_c264_4b97_9464aaa9a77fc0f6" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_ContainerIndex = SeqLookupPosition(seq_Temp, str_LabID, str_PosID, 1, 1);
// }} ""
// {{ 93 1 0 "574cdc2b_dda2_41ac_ae616274e01d6f8a" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 94 1 0 "e892f998_f9d2_4dd7_9853b07f12cc9989" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
int_ContainerIndex = 1;
// }} ""
// {{ 95 1 0 "574cdc2b_dda2_41ac_ae616274e01d6f8a" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 96 1 0 "dc3b93b4_1fc5_4a9a_9db1b1a20f283649" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 97 1 0 "1f9e7333_66b4_499a_9dda3d8030b428f2" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_OffsetX = StrConcat4(Translate("Cntr."), int_ContainerIndex, Translate(".offsetx"), Translate(""));
// }} ""
// {{{ 98 1 0 "34481405_8e6b_4277_a7441edca7d333cf" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_LabwareConfigFilePath, str_OffsetX, str_Return);
// }} ""
// {{{ 99 1 0 "9a24fcd7_6cee_4aee_b7caca4b2518bdfe" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerXOffset);
// }} ""
// {{ 100 1 0 "ed41c289_91cd_4271_99876a79a5f05c7b" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 101 1 0 "1ab72718_ab58_4f95_97b50b01dc7ecdea" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_OffsetY = StrConcat4(Translate("Cntr."), int_ContainerIndex, Translate(".offsety"), Translate(""));
// }} ""
// {{{ 102 1 0 "b401a5e7_f954_4c40_94b3ecd81b848a40" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_LabwareConfigFilePath, str_OffsetY, str_Return);
// }} ""
// {{{ 103 1 0 "dc122a3b_514c_42c6_af74915c87cf3ac8" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerYOffset);
// }} ""
// {{ 104 1 0 "43071576_cf25_4e33_a9edce327c74934e" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 105 1 0 "26ab6765_04a6_41e1_82fd6515d43da1b8" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_OffsetZ = StrConcat4(Translate("Cntr."), int_ContainerIndex, Translate(".base"), Translate(""));
// }} ""
// {{{ 106 1 0 "7fc299d7_6ad6_400e_bcc6fdf4fa36b4ac" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_LabwareConfigFilePath, str_OffsetZ, str_Return);
// }} ""
// {{{ 107 1 0 "3080b949_08a2_45e9_aafabfccf082f2d8" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBaseOffset);
// }} ""
// {{{ 108 1 0 "d59dbf85_c865_41e9_951f3f83a8d18b5f" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_FileName = HSLExtensions::File::GetFileNameWithoutExtension(i_str_NewContainerFile);
// }} ""
// {{ 109 1 0 "92cd770b_d5e3_4097_bd84c91d7fa4d818" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_X_Offset = i_flt_OffsetX + flt_ContainerXOffset;
// }} ""
// {{ 110 1 0 "59be89ba_550b_48ba_99c71cf05d535d5d" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Y_Offset = i_flt_OffsetY + flt_ContainerYOffset;
// }} ""
// {{ 111 1 0 "f31f5c70_27b7_4299_80a43099b26d2094" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Z_Offset = i_flt_OffsetZ + flt_ContainerBaseOffset;
// }} ""
Trace("Add ",str_FileName," to ",str_LabID," at ",str_PosID," with offsets ","X: ",flt_X_Offset," Y: ",flt_Y_Offset," Z: ",flt_Z_Offset);
// {{{ 113 1 0 "0ed40865_1e6d_4fc9_a3a2b91c92a46946" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DevAddContainerToRack(Instrument, str_LabID, str_PosID, i_str_NewContainerFile, flt_X_Offset, flt_Y_Offset, flt_Z_Offset);
// }} ""
// {{ 114 1 0 "4743d476_0e71_401a_8f65ecbd044a82d0" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
Trace("");
Trace(strFunctionName_Cut," - FINISH");
Trace("===========================================================================");
// {{ 116 1 0 "4743d476_0e71_401a_8f65ecbd044a82d0" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 5 "ADJUST_AddContainerToPosition" "End"
}
// }} ""
// {{{ 5 "LABWARE_GetLabwareCenter" "Begin"
function LABWARE_GetLabwareCenter( device & Instrument, sequence i_seq_Labware, variable & o_flt_X_Center, variable & o_flt_Y_Center ) void {
// }} ""
private variable str_ConfigFilePath;
private variable strFunctionName;
private variable str_LabID;
private variable str_PosID;
private variable bool_SequenceValid;
private variable flt_Pi;
private variable flt_Width;
private variable str_X;
private variable str_Y;
private variable flt_Length;
private variable flt_Origin_X;
private variable flt_Origin_Y;
private variable flt_Origin_Z;
private variable flt_NotUsed;
private variable flt_Offset_X;
private variable flt_Offset_Y;
private variable flt_Center_X;
private variable flt_HalfLength;
private variable flt_HalfHyp;
private variable flt_Radians;
private variable flt_Center_Y;
private variable flt_Calculation;
private variable flt_HalfWidth;
private variable flt_Hypotenuse;
private variable flt_PlateAngle;
private variable flt_AdjustedPlateAngle;
private variable flt_LabwareAngle;
private variable flt_CosineCalculation;
private variable flt_SineCalculation;
// {{ 5 "LABWARE_GetLabwareCenter" "InitLocals"
o_flt_X_Center = 0;
o_flt_Y_Center = 0;
// }} ""
// {{ 1138 1 0 "e9143fde_d2e3_4c9c_85c7d1c19aedd56e" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_X_Center = 0.0;
// }} ""
// {{ 1139 1 0 "8d6bd767_2afc_4144_a8615e2d2defe0ec" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_Y_Center = 0.0;
// }} ""
// {{ 1140 1 0 "5652c4b5_a36c_4918_9dbc2c92670e98e4" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_Pi = 3.14159265359;
// }} ""
// {{ 1141 1 0 "81bc9a8d_ea36_479b_a62d8757133055d9" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1142 1 0 "5be11d8b_24c5_486e_abbafbdf4e9d90c6" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 1144 1 0 "f760c5bd_4e8f_4e85_91ef5585de4136d4" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_Labware, str_LabID, str_PosID);
// }} ""
// {{ 1145 1 0 "983f34e2_bc42_4d72_84215babe91babd6" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 1146 1 0 "1c5a2021_66a3_4e96_9af3a13d33ca5c8e" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 1147 1 0 "983f34e2_bc42_4d72_84215babe91babd6" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 1148 1 0 "81bc9a8d_ea36_479b_a62d8757133055d9" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 1149 1 0 "a0ed4bd3_762f_4edf_8a8d982a5691e2c8" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_ConfigFilePath = Translate("");
// }} ""
//Get Config File

{
   object objDeckLayout;

   objDeckLayout = Instrument.GetDeckLayoutObject();

   if(!objDeckLayout.IsNull())
   {
      object objLabware;

      onerror goto HandleLabwareError;
      objLabware = objDeckLayout.Labware(str_LabID);
      onerror goto 0;
      err.Clear();

      if(!objLabware.IsNull())
      {
         object objEditLabware5;

         objLabware.GetObject("IEditLabware5", objEditLabware5);

        str_ConfigFilePath = objEditLabware5.Filename;

         objEditLabware5.ReleaseObject();
         objDeckLayout.ReleaseObject();
         objLabware.ReleaseObject();
      }
   }

         // runtime error handling
      HandleLabwareError :
      {
        variable errorID;
        errorID=err.GetId();
        err.Clear();
         if(errorID != 0)
         {
            if (errorID==-1574764487)
            {
                Trace("LabwareID is  unknown.");
            }
            else
            {
                Trace("Unknown error occured.");
            }
         }
      }
}
// {{{ 1151 1 0 "b8bad97c_d3a7_4952_a936e048b01b4c1f" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ConfigFilePath, Translate("Dim.Dx"), str_X);
// }} ""
// {{{ 1152 1 0 "ec6f461b_83b1_4a7c_818b467eb8c0daf6" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_ConfigFilePath, Translate("Dim.Dy"), str_Y);
// }} ""
// {{{ 1153 1 0 "ade6e452_bee1_4a0a_a8e78c68e84495a8" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_Width = StrFVal(str_X);
// }} ""
// {{{ 1154 1 0 "096d9050_936a_4f08_9fac1648610561cf" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_Length = StrFVal(str_Y);
// }} ""
// {{{ 1155 1 0 "72d194f6_17de_47cf_a070906dfdcdb5d1" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetLabwareOrigin(Instrument, i_seq_Labware, flt_Origin_X, flt_Origin_Y, flt_Origin_Z);
// }} ""
// {{ 1156 1 0 "4d2324e7_ef9d_407e_8e1bf14e98f05b3e" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 1157 1 0 "f1b42e46_ea93_4762_825adcb6cf8eea2e" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_Hypotenuse = 0.0;
// }} ""
flt_Hypotenuse = flt_Length^2 + flt_Width^2;
// {{{ 1159 1 0 "7bb0782e_85b8_4d54_9353a241fb5d5667" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_Hypotenuse = MthPow(flt_Hypotenuse, 0.5);
// }} ""
// {{{ 1160 1 0 "5eb5d93a_e97e_43e9_80225615f0a5dd47" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_Hypotenuse = MthRound(flt_Hypotenuse, 1);
// }} ""
// {{ 1161 1 0 "2c6f101d_8f1c_4726_b68abd776e258ca9" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 1162 1 0 "db0fde4f_1ea4_477d_8747cf9c66e73afa" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_HalfHyp = flt_Hypotenuse / (2 * 1.0);
// }} ""
// {{ 1163 1 0 "1b9f4a0f_ba8b_4dd3_bcb024db9656649f" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_HalfLength = flt_Length / (2 * 1.0);
// }} ""
// {{ 1164 1 0 "bcfbab87_2d35_47ff_876758a4da988c3e" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_HalfWidth = flt_Width / (2 * 1.0);
// }} ""
// {{{ 1165 1 0 "b5bfaad0_f325_4813_893b7086ede948a3" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DevGetLabwarePosition(Instrument, str_LabID, flt_NotUsed, flt_NotUsed, flt_NotUsed, flt_LabwareAngle);
// }} ""
// {{ 1166 1 0 "863b59b5_9bca_4b87_8e51e7e8496937c5" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 1167 1 0 "92a12331_a1d5_4e8c_8497e3ca415b539e" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Calculation = flt_HalfLength / (flt_HalfWidth * 1.0);
// }} ""
// {{{ 1168 1 0 "60a19b83_2401_442e_bf2db38eef64a244" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_PlateAngle = MthATan(flt_Calculation);
// }} ""
flt_PlateAngle = flt_PlateAngle * (180.0 / flt_Pi);
// {{{ 1170 1 0 "fc7c6f15_3339_4d39_99381a97d265f0a2" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_PlateAngle = MthRound(flt_PlateAngle, 1);
// }} ""
// {{ 1171 1 0 "ae08802d_6e12_420e_854c8ccb76495307" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_LabwareAngle = flt_LabwareAngle * -1;
// }} ""
// {{ 1172 1 0 "a639a0f3_3b07_4f3f_8a9eb9880e414a4b" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_AdjustedPlateAngle = flt_LabwareAngle + flt_PlateAngle;
// }} ""
// {{ 1173 1 0 "0241937d_fde9_40a5_882fdd9e971d7633" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
flt_Radians = flt_AdjustedPlateAngle * (flt_Pi / 180);
// {{{ 1175 1 0 "6eb781a0_e97f_4966_8fb917ccf9d68905" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_CosineCalculation = MthCos(flt_Radians);
// }} ""
// {{{ 1176 1 0 "9f315069_10d6_4168_8b70019c324fae11" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_SineCalculation = MthSin(flt_Radians);
// }} ""
// {{ 1177 1 0 "996af30f_219a_4625_a514c5bae77e3622" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Offset_X = flt_CosineCalculation * flt_HalfHyp;
// }} ""
// {{{ 1178 1 0 "182828c7_d0bf_4738_a0c906025201ecdb" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_Offset_X = MthRound(flt_Offset_X, 1);
// }} ""
// {{ 1179 1 0 "16595834_6ba6_4a9d_a9708d58abb6ae0f" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Offset_Y = flt_SineCalculation * flt_HalfHyp;
// }} ""
// {{{ 1180 1 0 "47f11ffe_cd9e_4c40_9436a569eb443995" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_Offset_Y = MthRound(flt_Offset_Y, 1);
// }} ""
// {{ 1181 1 0 "3de5f669_7851_4d74_aca5b1106138907e" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{ 1182 1 0 "472c7dc3_c0e4_483e_8d0fae91945bdad0" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Center_X = flt_Origin_X + flt_Offset_X;
// }} ""
// {{ 1183 1 0 "50d23333_c00e_41a1_9ff73a86cd2d80b7" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Center_Y = flt_Origin_Y + flt_Offset_Y;
// }} ""
// {{{ 1184 1 0 "f280bbfa_a6e6_4641_a63a3d97e3978d88" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
o_flt_X_Center = MthRound(flt_Center_X, 1);
// }} ""
// {{{ 1185 1 0 "1cb3cd80_a57e_4042_afa99755db21a86a" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
o_flt_Y_Center = MthRound(flt_Center_Y, 1);
// }} ""
// {{{ 5 "LABWARE_GetLabwareCenter" "End"
}
// }} ""
// {{{ 5 "ADJUST_AddCarrierToDeckSite" "Begin"
function ADJUST_AddCarrierToDeckSite( device & Instrument, variable i_str_ConfigFile, variable i_str_NewLabwareID, variable i_int_DeckPosition ) void {
// }} ""
private variable int_CutNum;
private variable int_Length;
private variable strFunctionName;
private variable strFunctionName_Cut;
private variable int_Count;
private variable bln_LabwareExists;
private variable bln_FileExists;
private variable str_DimensionXKey;
private variable flt_TrackWidth;
private variable str_InstrumentKey;
private variable str_InstrumentValue;
private variable str_DeckLayoutFile;
private variable bln_InstrumentSTAR;
private variable str_XValue;
private variable flt_XValue;
private variable int_TrackCount;
private variable str_TrackNumber;
private variable arr_Labware[];
private variable arr_VisState[];
private variable str_TrackCount;
// {{ 5 "ADJUST_AddCarrierToDeckSite" "InitLocals"
// }} ""
// {{ 1 1 0 "693416aa_664d_44a3_b7f6369ef6933e58" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 2 1 0 "64d8b890_2d61_4f27_a8ad7537d86b7a2e" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 4 1 0 "2333a0ef_bbf3_4a31_8e60ba5bf7a7963a" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Count = StrReverseFind(strFunctionName, Translate(":"));
// }} ""
// {{ 5 1 0 "dae3ccdc_f0ec_49c7_8b5181dcb68b2051" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_Count = int_Count + 1;
// }} ""
// {{{ 6 1 0 "65f30075_cc00_4489_82b2d3f06d8bd899" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Length = StrGetLength(strFunctionName);
// }} ""
// {{ 7 1 0 "81095cb6_39a4_424f_8b8e5dbeb1139913" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_CutNum = int_Length - int_Count;
// }} ""
// {{{ 8 1 0 "b200f0ec_c3bb_4a2b_81176016bf17fca0" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
strFunctionName_Cut = StrMid(strFunctionName, int_Count, int_CutNum);
// }} ""
Trace("===========================================================================");
Trace(strFunctionName_Cut," - START");
Trace("");
// {{ 10 1 0 "693416aa_664d_44a3_b7f6369ef6933e58" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 11 1 0 "d34bb994_a96c_474b_b13cb17c8d7ccb68" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_DimensionXKey = Translate("Dim.Dx");
// }} ""
// {{ 12 1 0 "ce2a8a99_9c52_4454_a824b822548bbd01" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_InstrumentKey = Translate("Instrument");
// }} ""
Trace("Config file:  ",i_str_ConfigFile);
// {{ 14 1 0 "ef8f0ba9_1c24_4c97_8898f97de86917cb" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 15 1 0 "be530eaa_9506_4181_a446a0f8706cac00" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
bln_FileExists = HSLExtensions::File::Exists(i_str_ConfigFile);
// }} ""
// {{ 16 1 0 "88ccc2c2_f9c6_45fc_9694d5d489707642" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bln_FileExists == 0)
{
// }} ""
// {{{ 17 1 0 "ab44a35a_edbf_407a_abebfb1a7ac799f5" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("Config file doesn't exist!"));
// }} ""
// {{ 18 1 0 "88ccc2c2_f9c6_45fc_9694d5d489707642" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 19 1 0 "46d52baa_7411_40c9_92fcc2728569d5ad" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 20 1 0 "d744ddb2_d7e7_4f78_86c51a679d5dbfc5" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_DeckLayoutFile = DevGetDeckLayoutFileName(Instrument);
// }} ""
// {{{ 21 1 0 "90e0a0e5_dc34_47fd_8745d47920795c0b" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_DeckLayoutFile, str_InstrumentKey, str_InstrumentValue);
// }} ""
// {{{ 22 1 0 "a00e3e30_35f9_4893_ae21bef5fe20bbca" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
bln_InstrumentSTAR = StrReplace(str_InstrumentValue, Translate("STAR"), Translate("STAR"));
// }} ""
// {{ 23 1 0 "164c69c6_f78f_402d_a96e94f725cd7304" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bln_InstrumentSTAR > 0)
{
// }} ""
// {{ 24 1 0 "0d92fd34_d8bb_4312_a9f5db6b2e7a6fcd" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_TrackWidth = 22.5;
// }} ""
// {{ 25 1 0 "164c69c6_f78f_402d_a96e94f725cd7304" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 26 1 0 "ef97d2dd_b0ef_4c01_8660e777ecd14e5b" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
flt_TrackWidth = 21.83;
// }} ""
// {{ 27 1 0 "164c69c6_f78f_402d_a96e94f725cd7304" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 28 1 0 "85de6289_9e5a_458e_adc78292b67727cd" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 29 1 0 "17d81383_0caa_4d74_80f093b05dd0c022" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(i_str_ConfigFile, str_DimensionXKey, str_XValue);
// }} ""
// {{{ 30 1 0 "689191b7_f4c9_45b5_ba294eb7e5b6639c" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
flt_XValue = StrFVal(str_XValue);
// }} ""
// {{ 31 1 0 "b4b4d5db_c75c_476b_b8f12b378cd72c7e" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_TrackCount = flt_XValue / flt_TrackWidth;
// }} ""
// {{{ 32 1 0 "3360b7ae_b659_42ba_97f486184651f4e9" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_TrackCount = StrConcat2(int_TrackCount, Translate(""));
// }} ""
// {{{ 33 1 0 "68afd845_0053_427b_af083005a0da7950" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_TrackCount = StrIVal(str_TrackCount);
// }} ""
// {{{ 34 1 0 "7d1dd5ab_513d_45da_b6cd4336dd6cabf7" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_TrackNumber = StrConcat4(int_TrackCount, Translate("T"), Translate("-"), i_int_DeckPosition);
// }} ""
// {{ 35 1 0 "bab34354_a1e6_4ff9_897a976135973a48" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 36 1 0 "c25f7290_d766_41bd_8906d66fe53c1f75" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
bln_LabwareExists = DevIsValidLabwareForCurrentDeckLayout(Instrument, i_str_NewLabwareID);
// }} ""
// {{ 37 1 0 "9777a7af_0833_43f2_aae01c884639475c" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bln_LabwareExists == 1)
{
// }} ""
// {{{ 38 1 0 "92c1db8f_d8c4_4de3_a77dfaf1ae9687eb" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("Labware not unique!"));
// }} ""
// {{ 39 1 0 "9777a7af_0833_43f2_aae01c884639475c" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
Trace("Now adding ",i_str_NewLabwareID," at deck site ",str_TrackNumber);
// {{{ 41 1 0 "253c0de8_0a72_456b_8124ca39309b1a3e" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DevAddLabwareToTemplate(Instrument, i_str_NewLabwareID, i_str_ConfigFile, Translate("default"), str_TrackNumber);
// }} ""
// {{ 42 1 0 "64ee102d_c786_48c9_9cb78d49580845d4" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_Labware.SetSize(0);
// }} ""
// {{ 43 1 0 "37dcde57_b0f3_4c1a_90488e0dbd6ea920" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_VisState.SetSize(0);
// }} ""
// {{ 44 1 0 "75aaf96f_ac34_4652_8f8e39bdee6bf5da" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_Labware.AddAsLast(i_str_NewLabwareID);
// }} ""
// {{ 45 1 0 "adb55248_d6a0_4386_88094e591e3d9253" "{F17B7626-27CB-47f1-8477-8C4158339A6D}"
arr_VisState.AddAsLast(1);
// }} ""
// {{{ 46 1 0 "3d9e9485_e3b6_44ac_afc5259651ec8c40" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DeckVisualize::UpdateLoadedLabware(Instrument, arr_Labware, arr_VisState, Translate("Make new labware visible"));
// }} ""
// {{ 47 1 0 "51f9dbf6_78ba_4692_abbef8441e471311" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
Trace("");
Trace(strFunctionName_Cut," - FINISH");
Trace("===========================================================================");
// {{ 49 1 0 "51f9dbf6_78ba_4692_abbef8441e471311" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 5 "ADJUST_AddCarrierToDeckSite" "End"
}
// }} ""
// {{{ 5 "TEMPLATE_GetConfigFile2" "Begin"
function TEMPLATE_GetConfigFile2( device & Instrument, variable i_str_Labware, variable & o_str_ConfigFilePath ) void {
// }} ""
// {{ 5 "TEMPLATE_GetConfigFile2" "InitLocals"
o_str_ConfigFilePath = 0;
// }} ""
// {{ 1386 1 0 "3d6e22dd_5ca8_4a19_976a2761df055627" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_str_ConfigFilePath = Translate("");
// }} ""
//Get Config File

{
   object objDeckLayout;

   objDeckLayout = Instrument.GetDeckLayoutObject();

   if(!objDeckLayout.IsNull())
   {
      object objLabware;

      onerror goto HandleLabwareError;
      objLabware = objDeckLayout.Labware(i_str_Labware);
      onerror goto 0;
      err.Clear();

      if(!objLabware.IsNull())
      {
         object objEditLabware5;

         objLabware.GetObject("IEditLabware5", objEditLabware5);

        o_str_ConfigFilePath = objEditLabware5.Filename;

         objEditLabware5.ReleaseObject();
         objDeckLayout.ReleaseObject();
         objLabware.ReleaseObject();
      }
   }

         // runtime error handling
      HandleLabwareError :
      {
        variable errorID;
        errorID=err.GetId();
        err.Clear();
         if(errorID != 0)
         {
            if (errorID==-1574764487)
            {
                Trace("LabwareID is  unknown.");
            }
            else
            {
                Trace("Unknown error occured.");
            }
         }
      }
}
// {{{ 5 "TEMPLATE_GetConfigFile2" "End"
}
// }} ""
// {{{ 5 "TEMPLATE_GetTemplateOrigin2" "Begin"
function TEMPLATE_GetTemplateOrigin2( device & Instrument, variable i_str_TemplateLabID, variable & o_flt_X_Coord, variable & o_flt_Y_Coord, variable & o_flt_Z_Coord ) void {
// }} ""
private variable flt_NotUsed;
// {{ 5 "TEMPLATE_GetTemplateOrigin2" "InitLocals"
o_flt_X_Coord = 0;
o_flt_Y_Coord = 0;
o_flt_Z_Coord = 0;
// }} ""
// {{ 1403 1 0 "729a8eb4_2c33_4281_a420e051f7c21a0a" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_X_Coord = 0.0;
// }} ""
// {{ 1404 1 0 "ee90e920_1d62_4d2b_8a7128745294e1e8" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_Y_Coord = 0.0;
// }} ""
// {{ 1405 1 0 "5f31b172_c16b_4b3a_9ff9a51ee9afb4ea" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_flt_Z_Coord = 0.0;
// }} ""
// {{{ 1406 1 0 "17f5840f_4843_4143_a2d9fe143148fec8" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DevGetLabwarePosition(Instrument, i_str_TemplateLabID, o_flt_X_Coord, o_flt_Y_Coord, o_flt_Z_Coord, flt_NotUsed);
// }} ""
// {{{ 5 "TEMPLATE_GetTemplateOrigin2" "End"
}
// }} ""
// {{{ 5 "ADJUST_AddContainerToPositions" "Begin"
function ADJUST_AddContainerToPositions( device & Instrument, sequence i_seq_LabwareToChange, variable i_str_NewContainerFile, variable i_flt_OffsetX, variable i_flt_OffsetY, variable i_flt_OffsetZ ) void {
// }} ""
private variable flt_ContainerXOffset;
private variable flt_ContainerYOffset;
private variable int_CutNum;
private variable int_Length;
private variable flt_Y_Offset;
private variable str_OffsetX;
private variable int_SingleContainer;
private variable strFunctionName;
private variable bln_FileExists;
private variable str_OffsetY;
private variable str_OffsetZ;
private variable strFunctionName_Cut;
private variable flt_ContainerBaseOffset;
private variable str_LabID;
private variable str_FileName;
private variable flt_Z_Offset;
private variable str_Extension;
private variable str_Return;
private variable int_Count;
private variable bool_SequenceValid;
private variable flt_X_Offset;
private variable str_PosID;
private variable int_ContainerIndex;
private variable str_LabwareConfigFilePath;
private sequence seq_Temp;
private sequence i_seq_LabwarePositionsToOffset;
private variable int_TotalPositions;
private variable i;
// {{ 5 "ADJUST_AddContainerToPositions" "InitLocals"
// }} ""
// {{ 118 1 0 "9ee1a050_2c8f_4e0b_a4ce1074deacec49" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 119 1 0 "d96b65b1_b2cb_4bb3_9a67a4f639bf8ef6" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 121 1 0 "f3a9ee5f_48e1_4553_a85e586dc882bdb3" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Count = StrReverseFind(strFunctionName, Translate(":"));
// }} ""
// {{ 122 1 0 "1ba89b15_fa7f_4c7f_a67fff0a91fb08f3" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_Count = int_Count + 1;
// }} ""
// {{{ 123 1 0 "697cfcf4_639d_4d5f_9b1417df331660bb" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Length = StrGetLength(strFunctionName);
// }} ""
// {{ 124 1 0 "9a8d2eea_7d48_4caf_977dd43a31a55145" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_CutNum = int_Length - int_Count;
// }} ""
// {{{ 125 1 0 "9fd26af6_f13e_4a7c_8cde7d44bcd78ffd" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
strFunctionName_Cut = StrMid(strFunctionName, int_Count, int_CutNum);
// }} ""
Trace("===========================================================================");
Trace(strFunctionName_Cut," - START");
Trace("");
// {{ 127 1 0 "9ee1a050_2c8f_4e0b_a4ce1074deacec49" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 128 1 0 "c62674d3_c4be_45b8_859e2fea264e06c8" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 129 1 0 "f98eb359_d875_467b_ad684171bc4d4588" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 131 1 0 "671acfe7_2d9e_41df_9682e489941a5ab2" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
bool_SequenceValid = _GetSequencePosition(Instrument, i_seq_LabwareToChange, str_LabID, str_PosID);
// }} ""
// {{ 132 1 0 "917dd803_3788_4ac8_ba26458b5f9116e8" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bool_SequenceValid == 0)
{
// }} ""
// {{{ 133 1 0 "3b2078e5_07e0_4671_ae9d471c77f09380" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_FunctionError(strFunctionName, Translate("No more sequence positions!"));
// }} ""
// {{ 134 1 0 "917dd803_3788_4ac8_ba26458b5f9116e8" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 135 1 0 "c62674d3_c4be_45b8_859e2fea264e06c8" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 136 1 0 "4dd76f4b_0a78_44d8_a71c94d0d32381e5" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 137 1 0 "1609eb3a_1b4b_49a1_9700c75e07f5265c" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
bln_FileExists = HSLExtensions::File::Exists(i_str_NewContainerFile);
// }} ""
// {{ 138 1 0 "67ff45cb_4ad7_4745_8e8e76f394d8f2a2" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (bln_FileExists == 0)
{
// }} ""
Trace(i_str_NewContainerFile,":  FILE DOESN'T EXIST!");
// {{ 140 1 0 "713a7a1f_dfa0_4b98_afb5ac7cda49a916" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
Trace("");
Trace(strFunctionName_Cut," - FINISH");
Trace("===========================================================================");
// {{ 142 1 0 "713a7a1f_dfa0_4b98_afb5ac7cda49a916" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 143 1 0 "48e30f1c_31b2_4c8f_a3da632491b7238b" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return;
// }} ""
// {{ 144 1 0 "67ff45cb_4ad7_4745_8e8e76f394d8f2a2" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{{ 145 1 0 "50b575bb_dce9_4303_acc627d8e2621d16" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_Extension = HSLExtensions::File::GetFileExtension(i_str_NewContainerFile);
// }} ""
// {{ 146 1 0 "547f0a7c_8c62_47ef_9605a4229e31fb64" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (str_Extension != "ctr")
{
// }} ""
Trace(i_str_NewContainerFile,":  FILE NOT A CONTAINER FILE!");
// {{ 148 1 0 "26e3d50e_1e14_418e_83460e2d5003c850" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
Trace("");
Trace(strFunctionName_Cut," - FINISH");
Trace("===========================================================================");
// {{ 150 1 0 "26e3d50e_1e14_418e_83460e2d5003c850" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 151 1 0 "0d044891_4a2c_4985_86075f49699b5168" "{9EC997CD-FD3B-4280-811B-49E99DCF062C}"
return;
// }} ""
// {{ 152 1 0 "547f0a7c_8c62_47ef_9605a4229e31fb64" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 153 1 0 "4dd76f4b_0a78_44d8_a71c94d0d32381e5" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 154 1 0 "b9c2a044_d4a2_45a3_805357757eab4d13" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_RemoveTruncatedSequencePositions(Instrument, i_seq_LabwarePositionsToOffset);
// }} ""
// {{{ 155 1 0 "793da75a_4ac5_435e_8ebfdb7ef8b01d03" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
LABWARE_GetConfigFile(Instrument, i_seq_LabwareToChange, str_LabwareConfigFilePath);
// }} ""
// {{{ 156 1 0 "35a0a6b6_a427_4474_ab71d478f8dfb5c3" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_LabwareConfigFilePath, Translate("SingleCntr"), str_Return);
// }} ""
// {{{ 157 1 0 "442ae470_d0fd_4fb5_9eadb66f0a28ece3" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToInteger(str_Return, int_SingleContainer);
// }} ""
// {{{ 158 1 0 "822bc4a9_576b_49a6_8d859e27d60c67fb" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_TotalPositions = SeqGetTotal(i_seq_LabwareToChange);
// }} ""
// {{{ 159 1 0 "64bab69d_be05_4b51_8be58ef13eb3052a" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
SEQ_GetDefaultSequenceForLabware(Instrument, str_LabID, seq_Temp);
// }} ""
// {{ 160 1 0 "e0793727_05cd_4b84_b14c8b641e8a72a8" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
{
for(i = 0; i < int_TotalPositions;)
{
i = i + 1;
// }} ""
// {{{ 161 1 0 "9811fcaf_1728_4c7c_a943bedfec8b2520" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_LabID = SeqGetLabwareId(i_seq_LabwareToChange);
// }} ""
// {{{ 162 1 0 "3ae2cf87_c01f_46aa_b7aa03fc6ef47fd4" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_PosID = SeqGetPositionId(i_seq_LabwareToChange);
// }} ""
// {{{ 163 1 0 "9336992d_f376_44f7_9e4ffe7bfde1112a" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
SeqIncrement(i_seq_LabwareToChange, 1);
// }} ""
// {{ 164 1 0 "5101f5c7_3783_4986_9a5cee480d11bac0" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (int_SingleContainer == 0)
{
// }} ""
// {{{ 165 1 0 "7e27c464_f899_4172_a68f5e77aec154d1" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_ContainerIndex = SeqLookupPosition(seq_Temp, str_LabID, str_PosID, 1, 1);
// }} ""
// {{ 166 1 0 "5101f5c7_3783_4986_9a5cee480d11bac0" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 167 1 0 "955fef7d_c793_4ea8_abb2eb1052c6d4c3" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
int_ContainerIndex = 1;
// }} ""
// {{ 168 1 0 "5101f5c7_3783_4986_9a5cee480d11bac0" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 169 1 0 "36cc9f84_8f42_40a4_ba0caeec0f5aecd1" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 170 1 0 "367bf423_be07_4f87_a6f7793fef020abf" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_OffsetX = StrConcat4(Translate("Cntr."), int_ContainerIndex, Translate(".offsetx"), Translate(""));
// }} ""
// {{{ 171 1 0 "62bfac28_71be_4d14_829215bcae742acc" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_LabwareConfigFilePath, str_OffsetX, str_Return);
// }} ""
// {{{ 172 1 0 "fe4821ee_1efe_47f6_83f59eee2764de9a" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerXOffset);
// }} ""
// {{ 173 1 0 "3e3d3556_520e_47d1_a0185bd954f20eef" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 174 1 0 "0ccdb4a6_aeea_403a_a5879c4f7366b0af" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_OffsetY = StrConcat4(Translate("Cntr."), int_ContainerIndex, Translate(".offsety"), Translate(""));
// }} ""
// {{{ 175 1 0 "4df3656e_9f95_4285_9d89d8158afcf9c0" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_LabwareConfigFilePath, str_OffsetY, str_Return);
// }} ""
// {{{ 176 1 0 "25b000ef_5b63_4c92_b7093c626c7a089c" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerYOffset);
// }} ""
// {{ 177 1 0 "3af1d02f_9355_4d6d_a555957e48252969" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
// {{{ 178 1 0 "9eef685c_495c_4bd0_892fe2950e04e135" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_OffsetZ = StrConcat4(Translate("Cntr."), int_ContainerIndex, Translate(".base"), Translate(""));
// }} ""
// {{{ 179 1 0 "1d22c608_a490_4bdb_843db2b863f0b20a" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
FILE_GetDefinitionFileValue(str_LabwareConfigFilePath, str_OffsetZ, str_Return);
// }} ""
// {{{ 180 1 0 "9f394653_01e0_4bf3_ae10da6c4ed8200d" "{7C4EF7A7-39BE-406a-897F-71F3A35B4093}"
_ConvertToFloat(str_Return, flt_ContainerBaseOffset);
// }} ""
// {{{ 181 1 0 "8c1fc9c8_c1c3_4af5_bfa24785079930c7" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_FileName = HSLExtensions::File::GetFileNameWithoutExtension(i_str_NewContainerFile);
// }} ""
// {{ 182 1 0 "80cec258_1dd4_4546_a642841ef967d832" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_X_Offset = i_flt_OffsetX + flt_ContainerXOffset;
// }} ""
// {{ 183 1 0 "894141a5_1a5c_4ecd_af0621f694aa5931" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Y_Offset = i_flt_OffsetY + flt_ContainerYOffset;
// }} ""
// {{ 184 1 0 "52331300_d937_438d_9fed9075e91d1925" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
flt_Z_Offset = i_flt_OffsetZ + flt_ContainerBaseOffset;
// }} ""
Trace("Add ",str_FileName," to ",str_LabID," at ",str_PosID," with offsets ","X: ",i_flt_OffsetX," Y: ",i_flt_OffsetY," Z: ",i_flt_OffsetZ);
// {{{ 186 1 0 "5233f6ad_f1c0_46b7_bc77ef8bc51a6ffb" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
DevAddContainerToRack(Instrument, str_LabID, str_PosID, i_str_NewContainerFile, flt_X_Offset, flt_Y_Offset, flt_Z_Offset);
// }} ""
// {{ 187 1 0 "e0793727_05cd_4b84_b14c8b641e8a72a8" "{B31F3532-5D80-11d4-A5EB-0050DA737D89}"
}
}
// }} ""
// {{ 188 1 0 "1c2c426e_6a9e_49aa_85612c2bc4d30f5a" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
Trace("");
Trace(strFunctionName_Cut," - FINISH");
Trace("===========================================================================");
// {{ 190 1 0 "1c2c426e_6a9e_49aa_85612c2bc4d30f5a" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 5 "ADJUST_AddContainerToPositions" "End"
}
// }} ""
// {{{ 5 "ADJUST_StackCreateAtTemplateSite" "Begin"
function ADJUST_StackCreateAtTemplateSite( device & Instrument, variable i_str_ConfigFile, variable i_str_LabwareNameForStack, variable i_str_TemplateID, variable i_str_TemplateSiteID, variable i_int_TotalStack, variable i_int_LabwareType, variable i_bln_LiddedLabware, variable & o_arr_StackedLabware[] ) void {
// }} ""
private variable int_CutNum;
private variable int_Length;
private variable strFunctionName;
private variable strFunctionName_Cut;
private variable int_Count;
private variable str_ConfigFile;
private variable str_LabwareNameForStack;
private variable str_TemplateID;
private variable str_TemplateSiteID;
private variable str_LabwareType;
private variable bln_LiddedLabware;
private variable int_TotalStack;
// {{ 5 "ADJUST_StackCreateAtTemplateSite" "InitLocals"
o_arr_StackedLabware.SetSize( 0);
// }} ""
// {{ 691 1 0 "3d02adbe_14d3_4465_a6a4e584bf61a9a0" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 692 1 0 "21867229_3ace_4b34_8474721d3f199dcd" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 694 1 0 "f2e431b2_4e7e_459f_92c79212b42d16fc" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Count = StrReverseFind(strFunctionName, Translate(":"));
// }} ""
// {{ 695 1 0 "567e22ed_258b_474d_8a31686594c0923b" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_Count = int_Count + 1;
// }} ""
// {{{ 696 1 0 "6043f5c0_4d6d_4c8a_a7669c4891404253" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Length = StrGetLength(strFunctionName);
// }} ""
// {{ 697 1 0 "c5eed030_e481_449d_80c9a60c906e30ce" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_CutNum = int_Length - int_Count;
// }} ""
// {{{ 698 1 0 "965092c7_6462_4272_bd9ea58a57e20cea" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
strFunctionName_Cut = StrMid(strFunctionName, int_Count, int_CutNum);
// }} ""
Trace("===========================================================================");
Trace(strFunctionName_Cut," - START");
Trace("");
// {{ 700 1 0 "3d02adbe_14d3_4465_a6a4e584bf61a9a0" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 701 1 0 "6e322525_353c_4479_aebce3d093a54132" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_ConfigFile = i_str_ConfigFile;
// }} ""
// {{ 702 1 0 "e9a2ae5c_66c7_4854_b611af60b8af863e" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_LabwareNameForStack = i_str_LabwareNameForStack;
// }} ""
// {{ 703 1 0 "44a821e8_bdda_4111_b1658214bc62d25c" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_TemplateID = i_str_TemplateID;
// }} ""
// {{ 704 1 0 "7d5aa79e_061f_4a81_abead4707f394104" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_TemplateSiteID = i_str_TemplateSiteID;
// }} ""
// {{ 705 1 0 "a59abf1f_57da_4606_bd7b4a7a82b297e3" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_TemplateSiteID = i_str_TemplateSiteID;
// }} ""
// {{ 706 1 0 "c0d7aa69_1674_4af8_9dfd3d20068dda54" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
bln_LiddedLabware = i_bln_LiddedLabware;
// }} ""
// {{ 707 1 0 "990d1327_96eb_4e12_8b4a23f1f19c91af" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
int_TotalStack = i_int_TotalStack;
// }} ""
// {{ 708 1 0 "7bc271d4_2ff1_4471_8739d2233c215a0d" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
if (i_int_LabwareType == 0)
{
// }} ""
// {{ 709 1 0 "a90f7e16_f672_40f9_b2359519eb161b9e" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_LabwareType = Translate("HxLabwr2.RectRack.1");
// }} ""
// {{ 710 1 0 "7bc271d4_2ff1_4471_8739d2233c215a0d" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
else
{
// }} ""
// {{ 711 1 0 "605612b9_a542_4850_bff6ffad9a48cbac" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_LabwareType = Translate("HxLabwr2.CircRack.1");
// }} ""
// {{ 712 1 0 "7bc271d4_2ff1_4471_8739d2233c215a0d" "{B31F3531-5D80-11d4-A5EB-0050DA737D89}"
}
// }} ""
// {{ 713 1 0 "12ccd220_f10c_42fd_ade96b0f29b8cdd3" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
o_arr_StackedLabware.SetSize(0);
// }} ""
{
   // HxPars keys
    static string P_XCOORD("Labwr_XCoord");
    static string P_YCOORD("Labwr_YCoord");
    static string P_ZCOORD("Labwr_ZCoord");
    static string P_RZCOORD("Labwr_Rotation");
    static string P_LABWARE_ID("Labwr_Id");

    // additions
    static string P_FILE("Labwr_File");
    static string P_COUNT("Labwr_count");
    static string P_DKSITEID("Labwr_DkSiteId");
    static string P_TEMPLATEID("Labwr_TemplateId");
    static string P_XDIM("Labwr_XDim");
    static string P_YDIM("Labwr_YDim");
    static string P_ISCOVERED("Labwr_IsCovered");
    static string P_CLSID("Labwr_CLSID");
    static string P_DKSITEDX("Labwr_DkSiteDimX");
    static string P_DKSITEDY("Labwr_DkSiteDimY");
    static string P_DECKSITES("Labwr_SiteData");
    static string P_STACKID("Labwr_stackID");

   object   objDecklayout;

   objDecklayout = Instrument.GetDeckLayoutObject();

   if (!objDecklayout.IsNull())
   {
          object EditDecklayout5;
          object Parameter;
          object LabwareObjects;
          object LabwareNames;
          variable myKeys[];
          variable intCounter;
          variable blnPlate(hslTrue);

          objDecklayout.GetObject("IEditDeckLayout5", EditDecklayout5);

          Parameter.CreateObject("HXPARAMSLib.HxPars");
          Parameter.Add(str_ConfigFile, P_FILE);
          Parameter.Add(str_LabwareNameForStack, P_LABWARE_ID);
          Parameter.Add(int_TotalStack, P_COUNT);
          Parameter.Add(str_TemplateSiteID, P_DKSITEID);
          Parameter.Add(str_TemplateID, P_TEMPLATEID);
          Parameter.Add(0, P_XDIM);
          Parameter.Add(0, P_YDIM);
          Parameter.Add(bln_LiddedLabware, P_ISCOVERED);
          Parameter.Add(str_LabwareType, P_CLSID);

          objDecklayout.AddStackToDecksite(Parameter);

          LabwareObjects.CreateObject("HXPARAMSLib.HxPars");
          LabwareNames.CreateObject("HXPARAMSLib.HxPars");

          objDecklayout.TemplateLabwareNames(LabwareObjects);
          myKeys = LabwareObjects.GetKeys();

          for(intCounter=1; intCounter<=myKeys.GetSize(); intCounter++)
          {
            LabwareNames = LabwareObjects.Item1(intCounter);           
            if(LabwareNames.Item1("Labwr_TemplateId") == str_TemplateID && LabwareNames.Item1("Labwr_DkSiteId") == str_TemplateSiteID)
            {
               if (!blnPlate && bln_LiddedLabware) 
               {
                  o_arr_StackedLabware.AddAsLast(LabwareNames.Item1("Labwr_Id"));
                  blnPlate=hslTrue;
               }
               else 
               {  
                  if(bln_LiddedLabware) blnPlate=hslFalse;
                  o_arr_StackedLabware.AddAsLast(LabwareNames.Item1("Labwr_Id"));
               }     
            }
          }

          objDecklayout.ReleaseObject();
          EditDecklayout5.ReleaseObject();
          Parameter.ReleaseObject();
          LabwareObjects.ReleaseObject();
          LabwareNames.ReleaseObject();
   }
}
// {{{ 715 1 0 "a3eeb059_f790_465e_820ad32306dc8758" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
Util2::Debug::TraceArray(Translate("Stacked Labware"), o_arr_StackedLabware);
// }} ""
// {{ 716 1 0 "54fd192a_287d_436b_8b05346030bb555d" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
Trace("");
Trace(strFunctionName_Cut," - FINISH");
Trace("===========================================================================");
// {{ 718 1 0 "54fd192a_287d_436b_8b05346030bb555d" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 5 "ADJUST_StackCreateAtTemplateSite" "End"
}
// }} ""
// {{{ 5 "ADJUST_StackIncrease" "Begin"
function ADJUST_StackIncrease( device & Instrument, variable i_str_LabwareNameForStack, variable & o_str_LabwareID ) void {
// }} ""
private variable int_CutNum;
private variable int_Length;
private variable strFunctionName;
private variable strFunctionName_Cut;
private variable int_Count;
private variable str_LabwareNameForStack;
// {{ 5 "ADJUST_StackIncrease" "InitLocals"
o_str_LabwareID = 0;
// }} ""
// {{ 740 1 0 "c994a739_d2ad_46da_899254b246a9af06" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 741 1 0 "5571b4d2_f0b5_45ec_aac1582dd1e9b03e" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 743 1 0 "93a854e4_23fb_4e66_8d24d371cde206d4" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Count = StrReverseFind(strFunctionName, Translate(":"));
// }} ""
// {{ 744 1 0 "70ab5c27_f76e_4a54_a34cbffe2674a966" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_Count = int_Count + 1;
// }} ""
// {{{ 745 1 0 "72527f68_8ca5_456e_8450b41822a4c3d0" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Length = StrGetLength(strFunctionName);
// }} ""
// {{ 746 1 0 "f51f2d98_d13a_4b34_a43babf0541548f4" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_CutNum = int_Length - int_Count;
// }} ""
// {{{ 747 1 0 "e3e5e123_8a01_422f_9d7407906e470f29" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
strFunctionName_Cut = StrMid(strFunctionName, int_Count, int_CutNum);
// }} ""
Trace("===========================================================================");
Trace(strFunctionName_Cut," - START");
Trace("");
// {{ 749 1 0 "c994a739_d2ad_46da_899254b246a9af06" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 750 1 0 "0f2aa095_0d84_4382_8ebf4b48c59b37ee" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_LabwareNameForStack = i_str_LabwareNameForStack;
// }} ""
// {{ 751 1 0 "3543c6ec_8b05_4095_847b8e3a96c4db3f" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
o_str_LabwareID = Translate("");
// }} ""
{
   // HxPars keys
    static string P_XCOORD("Labwr_XCoord");
    static string P_YCOORD("Labwr_YCoord");
    static string P_ZCOORD("Labwr_ZCoord");
    static string P_RZCOORD("Labwr_Rotation");
    static string P_LABWARE_ID("Labwr_Id");

    // additions
    static string P_FILE("Labwr_File");
    static string P_COUNT("Labwr_count");
    static string P_DKSITEID("Labwr_DkSiteId");
    static string P_TEMPLATEID("Labwr_TemplateId");
    static string P_XDIM("Labwr_XDim");
    static string P_YDIM("Labwr_YDim");
    static string P_ISCOVERED("Labwr_IsCovered");
    static string P_CLSID("Labwr_CLSID");
    static string P_DKSITEDX("Labwr_DkSiteDimX");
    static string P_DKSITEDY("Labwr_DkSiteDimY");
    static string P_DECKSITES("Labwr_SiteData");
    static string P_STACKID("Labwr_stackID");

   object   objDecklayout;
   variable strTemplateID;
   variable strTemplateSiteID;
   string   strLabwareID;

   objDecklayout = Instrument.GetDeckLayoutObject();

   if (!objDecklayout.IsNull())
   {
          object EditDecklayout5;
          object EditDecklayout7;
          object Parameter;
          object LabwareObjects;
          object LabwareNames;
          variable myKeys[];
          variable intCounter;
          variable intInverseCounter;
          variable blnPlate(hslTrue);

          objDecklayout.GetObject("IEditDeckLayout5", EditDecklayout5);
          objDecklayout.GetObject("IEditDeckLayout7", EditDecklayout7);

          Parameter.CreateObject("HXPARAMSLib.HxPars");
          Parameter.Add(str_LabwareNameForStack, P_STACKID);

          objDecklayout.IncreaseStack(Parameter);

          LabwareObjects.CreateObject("HXPARAMSLib.HxPars");
          LabwareNames.CreateObject("HXPARAMSLib.HxPars");

          EditDecklayout7.GetLabwareData(LabwareObjects);
          myKeys = LabwareObjects.GetKeys();

          // Get the template site ID and template ID of the stack
          for(intCounter=1; intCounter<=myKeys.GetSize(); intCounter++)
          {
            LabwareNames = LabwareObjects.Item1(intCounter);       
            if(LabwareNames.Item1("Labwr_Id") == str_LabwareNameForStack)
            {
               strTemplateID=LabwareNames.Item1("Labwr_TemplateId");
               strTemplateSiteID=LabwareNames.Item1("Labwr_DkSiteId");
            }
          }

          // Get all the labware on this site
          objDecklayout.TemplateLabwareNames(LabwareObjects);
          myKeys = LabwareObjects.GetKeys();

          intInverseCounter=myKeys.GetSize();

          for(intCounter=1; intCounter<=myKeys.GetSize(); intCounter++)
          {
            LabwareNames = LabwareObjects.Item1(intInverseCounter);
            intInverseCounter=intInverseCounter-1;
          
            if(LabwareNames.Item1("Labwr_TemplateId") == strTemplateID && LabwareNames.Item1("Labwr_DkSiteId") == strTemplateSiteID && LabwareNames.Item1("Labwr_Id")!=str_LabwareNameForStack)
            {
                 strLabwareID=LabwareNames.Item1("Labwr_Id");
                 if(strLabwareID.Find("_lid")==-1) o_str_LabwareID=strLabwareID;
                 else o_str_LabwareID=strLabwareID; 
            }
          }

          objDecklayout.ReleaseObject();
          EditDecklayout5.ReleaseObject();
          EditDecklayout7.ReleaseObject();
          Parameter.ReleaseObject();
          LabwareObjects.ReleaseObject();
          LabwareNames.ReleaseObject();
   }
}
// {{ 753 1 0 "739c4d0b_8d8b_47b4_890d0a87af6bc7ad" "{F07B0071-8EFC-11d4-A3BA-002035848439}"

// }} ""
Trace("New Labware ID:  ",o_str_LabwareID);
// {{ 755 1 0 "fac54476_1225_43f5_a37c9b5192bf918d" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
Trace("");
Trace(strFunctionName_Cut," - FINISH");
Trace("===========================================================================");
// {{ 757 1 0 "fac54476_1225_43f5_a37c9b5192bf918d" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 5 "ADJUST_StackIncrease" "End"
}
// }} ""
// {{{ 5 "ADJUST_StackDecrease" "Begin"
function ADJUST_StackDecrease( device & Instrument, variable i_str_LabwareNameForStack, variable & o_arr_StackedLabware[] ) void {
// }} ""
private variable int_CutNum;
private variable int_Length;
private variable strFunctionName;
private variable strFunctionName_Cut;
private variable int_Count;
private variable str_LabwareNameForStack;
private variable arr_CurrentStack[];
// {{ 5 "ADJUST_StackDecrease" "InitLocals"
o_arr_StackedLabware.SetSize( 0);
// }} ""
// {{ 720 1 0 "f3a4e5f8_0f48_4ddc_a91fc39358bea15d" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 721 1 0 "2b9ad4c8_8475_4552_b5055e762fa86f9f" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
strFunctionName = Translate("");
// }} ""
strFunctionName = GetFunctionName();
// {{{ 723 1 0 "fa075d5a_1d0d_4388_abe6930ed2b7a492" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Count = StrReverseFind(strFunctionName, Translate(":"));
// }} ""
// {{ 724 1 0 "53d249a9_a034_4a77_a166498cfe309e06" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_Count = int_Count + 1;
// }} ""
// {{{ 725 1 0 "c150eec6_87b3_4473_a8ab4ff1c36cea89" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Length = StrGetLength(strFunctionName);
// }} ""
// {{ 726 1 0 "ae4638c2_d6f8_4ddc_8ac50e7e8b1251b4" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_CutNum = int_Length - int_Count;
// }} ""
// {{{ 727 1 0 "142e268a_7962_4ee2_bd42ca73e9c0d361" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
strFunctionName_Cut = StrMid(strFunctionName, int_Count, int_CutNum);
// }} ""
Trace("===========================================================================");
Trace(strFunctionName_Cut," - START");
Trace("");
// {{ 729 1 0 "f3a4e5f8_0f48_4ddc_a91fc39358bea15d" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{ 730 1 0 "9e03baab_9ed3_4fd5_b45254bcaaba0260" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_LabwareNameForStack = i_str_LabwareNameForStack;
// }} ""
// {{ 731 1 0 "3c6faad4_041f_4d13_882a945bb7230208" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_CurrentStack.SetSize(0);
// }} ""
// {{ 732 1 0 "7f251bbc_b287_4f58_95ec961bf670e42a" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_CurrentStack.SetSize(0);
// }} ""
{
   // HxPars keys
    static string P_XCOORD("Labwr_XCoord");
    static string P_YCOORD("Labwr_YCoord");
    static string P_ZCOORD("Labwr_ZCoord");
    static string P_RZCOORD("Labwr_Rotation");
    static string P_LABWARE_ID("Labwr_Id");

    // additions
    static string P_FILE("Labwr_File");
    static string P_COUNT("Labwr_count");
    static string P_DKSITEID("Labwr_DkSiteId");
    static string P_TEMPLATEID("Labwr_TemplateId");
    static string P_XDIM("Labwr_XDim");
    static string P_YDIM("Labwr_YDim");
    static string P_ISCOVERED("Labwr_IsCovered");
    static string P_CLSID("Labwr_CLSID");
    static string P_DKSITEDX("Labwr_DkSiteDimX");
    static string P_DKSITEDY("Labwr_DkSiteDimY");
    static string P_DECKSITES("Labwr_SiteData");
    static string P_STACKID("Labwr_stackID");

    object   objDecklayout;
    variable strTemplateID;
    variable strTemplateSiteID;
    string   strLabwareID;

    objDecklayout = Instrument.GetDeckLayoutObject();

    if (!objDecklayout.IsNull())
    {
          object EditDecklayout5;
          object EditDecklayout7;
          object Parameter;
          object LabwareObjects;
          object LabwareNames;
          variable myKeys[];
          variable intCounter;
          variable intInverseCounter;
          variable blnPlate(hslTrue);

          objDecklayout.GetObject("IEditDeckLayout5", EditDecklayout5);
          objDecklayout.GetObject("IEditDeckLayout7", EditDecklayout7);

          Parameter.CreateObject("HXPARAMSLib.HxPars");
          Parameter.Add(str_LabwareNameForStack, P_STACKID);

          objDecklayout.DecreaseStack(Parameter);

          LabwareObjects.CreateObject("HXPARAMSLib.HxPars");
          LabwareNames.CreateObject("HXPARAMSLib.HxPars");

          EditDecklayout7.GetLabwareData(LabwareObjects);
          myKeys = LabwareObjects.GetKeys();

          // Get the template site ID and template ID of the stack
          for(intCounter=1; intCounter<=myKeys.GetSize(); intCounter++)
          {
            LabwareNames = LabwareObjects.Item1(intCounter);       
            if(LabwareNames.Item1("Labwr_Id") == str_LabwareNameForStack)
            {
               strTemplateID=LabwareNames.Item1("Labwr_TemplateId");
               strTemplateSiteID=LabwareNames.Item1("Labwr_DkSiteId");
            }
          }

          // Get all the labware on this site
          objDecklayout.TemplateLabwareNames(LabwareObjects);
          myKeys = LabwareObjects.GetKeys();

          intInverseCounter=myKeys.GetSize();

          for(intCounter=1; intCounter<=myKeys.GetSize(); intCounter++)
          {
            LabwareNames = LabwareObjects.Item1(intCounter);
            intInverseCounter=intInverseCounter-1;
          
            if(LabwareNames.Item1("Labwr_TemplateId") == strTemplateID && LabwareNames.Item1("Labwr_DkSiteId") == strTemplateSiteID && LabwareNames.Item1("Labwr_Id")!=str_LabwareNameForStack)
            {
                 strLabwareID=LabwareNames.Item1("Labwr_Id");

                 arr_CurrentStack.AddAsLast(strLabwareID);
                 //if(strLabwareID.Find("_lid")==-1) o_strLabwareID=strLabwareID;
                 //else o_strLabwareLidID=strLabwareID; 
            }
          }

          objDecklayout.ReleaseObject();
          EditDecklayout5.ReleaseObject();
          EditDecklayout7.ReleaseObject();
          Parameter.ReleaseObject();
          LabwareObjects.ReleaseObject();
          LabwareNames.ReleaseObject();
    }
}
// {{{ 734 1 0 "58ba38b4_2498_403b_bbc329d39b5f55be" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
Util2::Debug::TraceArray(Translate("Current Stack"), arr_CurrentStack);
// }} ""
// {{ 735 1 0 "2733bea7_e5a5_49c4_9272be4bfa033e1d" "{DB5A2B39-67F2-4a78-A78F-DAF3FB056366}"
o_arr_StackedLabware=arr_CurrentStack;
// }} ""
// {{ 736 1 0 "a915d75a_b1c9_49f4_b5a3304322d5b7ff" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
Trace("");
Trace(strFunctionName_Cut," - FINISH");
Trace("===========================================================================");
// {{ 738 1 0 "a915d75a_b1c9_49f4_b5a3304322d5b7ff" "{586C3429-F931-405f-9938-928E22C90BFA}"

// }} ""
// {{{ 5 "ADJUST_StackDecrease" "End"
}
// }} ""
// {{{ 5 "ADJUST_GetCurrentStack" "Begin"
function ADJUST_GetCurrentStack( device & Instrument, variable i_str_LabwareNameForStack, variable & o_arr_StackedLabware[] ) void {
// }} ""
private variable str_LabwareNameForStack;
private variable arr_CurrentStack[];
private variable int_Length;
private variable int_TrimLeftNumber;
// {{ 5 "ADJUST_GetCurrentStack" "InitLocals"
o_arr_StackedLabware.SetSize( 0);
// }} ""
/* {{ 1 "" "0" */ if(0){  /* }} "" */
// {{ 209 1 0 "8c27b719_abad_4115_a8ee98855c4d0ec7" "{B31F3543-5D80-11d4-A5EB-0050DA737D89}"
str_LabwareNameForStack = i_str_LabwareNameForStack;
// }} ""
/* {{ 1 "" "1" */ } /* }} "" */
// {{{ 210 1 0 "7c797273_3b6f_4890_b26422eb77ddb841" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
int_Length = StrGetLength(i_str_LabwareNameForStack);
// }} ""
// {{ 211 1 0 "736d60f4_93b8_4a10_a1b1b14ea806907f" "{B31F3544-5D80-11d4-A5EB-0050DA737D89}"
int_TrimLeftNumber = int_Length - 5;
// }} ""
// {{{ 212 1 0 "8f7d155a_31bc_422a_954ccef1f7a2e718" "{C1F3C015-47B3-4514-9407-AC2E65043419}"
str_LabwareNameForStack = StrLeft(i_str_LabwareNameForStack, int_TrimLeftNumber);
// }} ""
// {{ 213 1 0 "48d0bcbf_9067_4dcf_8c6de734c6cd2071" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_CurrentStack.SetSize(0);
// }} ""
// {{ 214 1 0 "4f999e05_d678_45c5_8162e0f3a762f7ec" "{4900C1F7-0FB7-4033-8253-760BDB9354DC}"
arr_CurrentStack.SetSize(0);
// }} ""
{
   // HxPars keys
    static string P_XCOORD("Labwr_XCoord");
    static string P_YCOORD("Labwr_YCoord");
    static string P_ZCOORD("Labwr_ZCoord");
    static string P_RZCOORD("Labwr_Rotation");
    static string P_LABWARE_ID("Labwr_Id");

    // additions
    static string P_FILE("Labwr_File");
    static string P_COUNT("Labwr_count");
    static string P_DKSITEID("Labwr_DkSiteId");
    static string P_TEMPLATEID("Labwr_TemplateId");
    static string P_XDIM("Labwr_XDim");
    static string P_YDIM("Labwr_YDim");
    static string P_ISCOVERED("Labwr_IsCovered");
    static string P_CLSID("Labwr_CLSID");
    static string P_DKSITEDX("Labwr_DkSiteDimX");
    static string P_DKSITEDY("Labwr_DkSiteDimY");
    static string P_DECKSITES("Labwr_SiteData");
    static string P_STACKID("Labwr_stackID");

    object   objDecklayout;
    variable strTemplateID;
    variable strTemplateSiteID;
    string   strLabwareID;

    objDecklayout = Instrument.GetDeckLayoutObject();

    if (!objDecklayout.IsNull())
    {
          object EditDecklayout5;
          object EditDecklayout7;
          object Parameter;
          object LabwareObjects;
          object LabwareNames;
          variable myKeys[];
          variable intCounter;
          variable intInverseCounter;
          variable blnPlate(hslTrue);

          objDecklayout.GetObject("IEditDeckLayout5", EditDecklayout5);
          objDecklayout.GetObject("IEditDeckLayout7", EditDecklayout7);

          //Parameter.CreateObject("HXPARAMSLib.HxPars");
          //Parameter.Add(str_LabwareNameForStack, P_STACKID);

          //objDecklayout.DecreaseStack(Parameter);

          LabwareObjects.CreateObject("HXPARAMSLib.HxPars");
          LabwareNames.CreateObject("HXPARAMSLib.HxPars");

          EditDecklayout7.GetLabwareData(LabwareObjects);
          myKeys = LabwareObjects.GetKeys();

          strTemplateID = "";
          strTemplateSiteID = "";
          // Get the template site ID and template ID of the stack
          for(intCounter=1; intCounter<=myKeys.GetSize(); intCounter++)
          {
            LabwareNames = LabwareObjects.Item1(intCounter);       
            if(LabwareNames.Item1("Labwr_Id") == str_LabwareNameForStack)
            {
               strTemplateID=LabwareNames.Item1("Labwr_TemplateId");
               strTemplateSiteID=LabwareNames.Item1("Labwr_DkSiteId");

            }
          }

          // Get all the labware on this site
          objDecklayout.TemplateLabwareNames(LabwareObjects);
          myKeys = LabwareObjects.GetKeys();

          intInverseCounter=myKeys.GetSize();

          for(intCounter=1; intCounter<=myKeys.GetSize(); intCounter++)
          {
            LabwareNames = LabwareObjects.Item1(intCounter);
            intInverseCounter=intInverseCounter-1;

            if(!strTemplateID=="" && !strTemplateSiteID =="")
            {
            if(LabwareNames.Item1("Labwr_TemplateId") == strTemplateID && LabwareNames.Item1("Labwr_DkSiteId") == strTemplateSiteID && LabwareNames.Item1("Labwr_Id")!=str_LabwareNameForStack)
            {
                 strLabwareID=LabwareNames.Item1("Labwr_Id");

                 if(strLabwareID.Find(str_LabwareNameForStack)!=-1) arr_CurrentStack.AddAsLast(strLabwareID);
                 //else o_strLabwareLidID=strLabwareID; 
            }
            }
          }

          objDecklayout.ReleaseObject();
          EditDecklayout5.ReleaseObject();
          EditDecklayout7.ReleaseObject();
          Parameter.ReleaseObject();
          LabwareObjects.ReleaseObject();
          LabwareNames.ReleaseObject();
    }
}
// {{ 216 1 0 "70a5b26c_ce5b_4174_b85a81b1895f7906" "{DB5A2B39-67F2-4a78-A78F-DAF3FB056366}"
o_arr_StackedLabware=arr_CurrentStack;
// }} ""
// {{{ 5 "ADJUST_GetCurrentStack" "End"
}
// }} ""
/* {{ 2 "SubmethodInsertLine" "" */ // }} ""
// {{{ 2 "LibraryNamespace" "End"
} // library namespace
// }} ""
// $$author=Bare_B$$valid=0$$time=2021-07-23 23:08$$checksum=faa9aeb9$$length=085$$